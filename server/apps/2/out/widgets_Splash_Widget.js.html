<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: widgets/Splash/Widget.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: widgets/Splash/Widget.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>///////////////////////////////////////////////////////////////////////////
// Copyright Â© Esri. All Rights Reserved.
//
// Licensed under the Apache License Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
///////////////////////////////////////////////////////////////////////////

/**
 * @fileoverview
 * (Custom Widget - {@link module:Splash|More info}) Splash Screen for web app. Links to IPMP home, and presents an interface for selecting a specific area &amp; time of data to display.
 *
 */
define([
	'dojo/_base/declare',
	'dojo/_base/lang',
	'dojo/_base/html',
	'dojo/on',
	'dojo/keys',
	'dojo/query',
	'dojo/cookie',
	'dijit/_WidgetsInTemplateMixin',
	'jimu/BaseWidget',
	'dojo/topic',
	'jimu/dijit/CheckBox',
	'jimu/utils',
	'esri/lang',
	'jimu/dijit/LoadingShelter',
	'dojo/Deferred',
	'dojox/form/CheckedMultiSelect',
	'dijit/form/TextBox',
	'esri/tasks/query',
	'esri/tasks/QueryTask',
	'dojo/dom-construct',
	'dojo/dom',
	'esri/geometry/Point',
	'esri/geometry/Extent',
	'esri/InfoTemplate',
	'dojo/promise/all',
	'dojo/dom-class',
	'esri/config',
	'esri/renderers/UniqueValueRenderer',
	'esri/symbols/SimpleLineSymbol',
	'esri/symbols/SimpleFillSymbol',
	'esri/symbols/SimpleMarkerSymbol',
	'esri/layers/FeatureLayer',
	'esri/request',
	'esri/Color',
	'jimu/WidgetManager',
	'dojo/domReady!',
], function (
	declare,
	lang,
	html,
	on,
	keys,
	query,
	cookie,
	_WidgetsInTemplateMixin,
	BaseWidget,
	topic,
	CheckBox,
	utils,
	esriLang,
	LoadingShelter,
	Deferred,
	CheckedMultiSelect,
	TextBox,
	Query,
	QueryTask,
	domConstruct,
	dom,
	Point,
	Extent,
	InfoTemplate,
	all,
	domClass,
	esriConfig,
	UniqueValueRenderer,
	SimpleLineSymbol,
	SimpleFillSymbol,
	SimpleMarkerSymbol,
	FeatureLayer,
	esriRequest,
	Color,
	WidgetManager
) {
	/**
	 * @module Splash
	 */
	var clazz = declare([BaseWidget, _WidgetsInTemplateMixin], {
		baseClass: 'jimu-widget-splash',
		_hasContent: null,
		_requireConfirm: null,
		_isClosed: false,
		selectedYears: null,
		yearArr: null, // 0 ~ 2013, 1 ~ 2014, 2 ~ 2015, 3 ~ 2016... 5 ~ 2018
		yearArrI: null,
		selectedYearsText: null,
		selection: null,
		query: null,
		queryTask: null,
		rArr: null,
		cArr: null,
		jArr: null,
		jArrC: null,
		extent: null,
		yearC: null,
		featureLayer: null,
		loaderWidget: null,
		inputData: null,
		curAreaType: null,
		alem: null,
		blem: null,
		searchBox: null,
		oldInner: null,
		boxAlt: null,

		/**
		 * Load initial start up information
		 */
		postCreate: function () {
			this.inherited(arguments);
			html.setAttr(this.domNode, 'aria-label', this.nls._widgetLabel);

			//LoadingShelter
			this.shelter = new LoadingShelter({
				hidden: true,
			});
			this.shelter.placeAt(this.domNode);
			this.shelter.startup();

			this._hasContent = this.config.splash &amp;&amp; this.config.splash.splashContent;
			this._requireConfirm = this.config.splash &amp;&amp; this.config.splash.requireConfirm;
			this._showOption = this.config.splash &amp;&amp; this.config.splash.showOption;
			this._confirmEverytime = this.config.splash &amp;&amp; this.config.splash.confirmEverytime;

			if (this._hasContent) {
				this.customContentNode.innerHTML = this.config.splash.splashContent;
			}

			if (!this._requireConfirm &amp;&amp; !this._showOption) {
				//html.setStyle(this.confirmCheck, 'display', 'none');
				html.addClass(this.okNode, 'enable-btn');
			} else {
				var hint = '';
				if (this._requireConfirm) {
					hint = this.config.splash.confirm.text;
					html.addClass(this.okNode, 'disable-btn');
				} else {
					hint = this.nls.notShowAgain;
					html.addClass(this.okNode, 'enable-btn');
				}
				// this.confirmCheck = new CheckBox({
				//   label: utils.stripHTML(hint),
				//   checked: false
				// }, this.confirmCheck);
				// this.own(on(this.selectYear, 'change', lang.hitch(this, this.isASwitchOn)));
				// this.confirmCheck.startup();

				this.selection = false;
			}
		},

		/**
		 * Runs on initial page load
		 */
		onOpen: function () {
			if (!utils.isInConfigOrPreviewWindow()) {
				var isFirstKey = this._getCookieKey();
				var isfirst = cookie(isFirstKey);
				if (esriLang.isDefined(isfirst) &amp;&amp; isfirst.toString() === 'false') {
					this.close();
				}
			}
			// if (true === this._requireConfirm) {
			//   //checkbox
			//   this.confirmCheck.focus();
			// } else if ((false === this._requireConfirm &amp;&amp; false === this._showOption) ||
			//   (false === this._requireConfirm &amp;&amp; true === this._showOption)) {
			//   this.okNode.focus();
			// }
			if (!this._requireConfirm &amp;&amp; !this._showOption) {
				this.okNode.focus();
			}
			// else {
			//   this.confirmCheck.focus();
			// }

			this._eventShow();
			window.isSplash = 1;
		},

		/**
		 * Sets up listeners on startup
		 */
		startup: function () {
			this.inherited(arguments);
			this.shelter.show();
			this._normalizeDomNodePosition();

			this._setConfig();

			this.own(
				on(
					this.domNode,
					'keydown',
					lang.hitch(this, function (evt) {
						if (html.hasClass(evt.target, this.baseClass) &amp;&amp; evt.keyCode === keys.ESCAPE) {
							if (!this._requireConfirm) {
								this.close();
								utils.focusOnFirstSkipLink();
							}
						}
					})
				)
			);

			this.own(
				on(
					this.splashDesktop,
					'keydown',
					lang.hitch(this, function (evt) {
						if (html.hasClass(evt.target, 'jimu-widget-splash-desktop')) {
							if (evt.keyCode === keys.TAB) {
								evt.preventDefault();
							}
							//allow user to use tab-key to focus first node from widgetDom on this spacial widget.
							if (evt.keyCode === keys.ENTER || (!evt.shiftKey &amp;&amp; evt.keyCode === keys.TAB)) {
								utils.focusFirstFocusNode(this.domNode);
							}
						}
					})
				)
			);

			var focusableNodes = utils.getFocusNodesInDom(this.domNode);
			utils.initFirstFocusNode(this.domNode, focusableNodes[0]);
			utils.initLastFocusNode(this.domNode, this.okNode);

			this._onlyFocus = true;
			this.own(
				on(
					this.customContentNode,
					'focus',
					lang.hitch(this, function () {
						if (this._onlyFocus) {
							this._onlyFocus = false;
						} else {
							this.customContentNode.scrollTop = 0;
							html.setStyle(this.customContentNode, 'display', 'none');
							// blur current node's focus state. It only works when it's between up and down settings.
							// this.domNode.focus(); //This causes the page to flicker.
							this.customContentNode.blur();
							html.setStyle(this.customContentNode, 'display', 'block');
							setTimeout(
								lang.hitch(this, function () {
									this._onlyFocus = true;
									this.customContentNode.focus();
								}),
								30
							);
						}
					})
				)
			);

			var smenu = document.querySelector('.sdropdown-el');
			smenu.addEventListener('click', (e) => this.onChangeSD(e, smenu));

			//var menu = document.querySelector('.dropdown-el');
			document.getElementById('enterData').addEventListener('change', lang.hitch(this, this.setSwitches));

			utils.setWABLogoDefaultAlt(this.customContentNode);

			this.handlerExecQuery();

			// Textbox search
			var myTextBox = new dijit.form.TextBox(
				{
					name: 'firstname',
					value: '' /* no or empty value! */,
					placeHolder: 'type in your name',
				},
				'firstname'
			);
			this.loaderWidget = WidgetManager.getInstance().getWidgetByLabel('MapProgress');
		},

		/**
		 * Fires when input menu is selected / clicked
		 * @param {*} e event
		 * @param {*} menu menu that displays available jurisdictions / area to select
		 */
		onChangeSD: function (e, menu) {
			e.preventDefault();
			e.stopPropagation();
			if (menu.classList.value === 'sdropdown-el expanded') {
				menu.classList.value = 'sdropdown-el';
				this.curAreaType = e.target.attributes[0].value;
				menu.scrollTop = 0;
				this.alem = document.querySelectorAll(`#${this.curAreaType}`)[0];
				this.alem.checked = true;
				this.setMenuItems();
			} else {
				if (this.alem) this.alem.checked = false;
				menu.classList.value = 'sdropdown-el expanded';
			}
		},

		/**
		 * Sets up and executes query
		 */
		handlerExecQuery: function () {
			// Using baseURl just in case we need to query multiple layers by year
			this.baseURL = 'https://ipmp.ctre.iastate.edu/arcgis/rest/services/aphares/feature19_merged_apharesOct14/MapServer/';
			//this.baseURL2 = "https://ipmp.ctre.iastate.edu/arcgis/rest/services/mapservice19/MapServer/";
			//this.queryTask = new QueryTask('https://ipmp.ctre.iastate.edu/arcgis/rest/services/featservice15/FeatureServer/1/');
			lang.hitch(this, this.executeQueryTask('init'));
		},

		/**
		 * Handles query functionality for interactive elements
		 * @param {String} target mode of query: 'init' -> populate drop down menus | 'year' -> get years available from data | 'draw' -> draws selected data to map
		 */
		executeQueryTask: function (target) {
			this.query = new Query();
			this.query.returnExceededLimitFeatures = true;
			this.query.outSpatialReference = this.map.spatialReference;

			if (target == 'init') {
				this.query.returnDistinctValues = true;
				this.query.returnGeometry = false;
				this.query.where = `JURISDICTION&lt;>'ARCH'`;
				this.query.outFields = ['JURISDICTION'];
				this.query.orderByFields = this.query.outFields;
				jurisTask = new QueryTask('https://ipmp.ctre.iastate.edu/arcgis/rest/services/aphares/juris/MapServer/0');
				console.log('Executed query with where = ' + this.query.where);
				jurisTask.execute(this.query, lang.hitch(this, this.genjArr));
				this.gencArr();
				this.genrArr();
			} else if (target == 'year') {
				this.loaderWidget.showOrHide(1, false);

				if (this.curAreaType == 'City') {
					this.query.where = "JURISDICTION='CITY OF " + this.inputData.toUpperCase() + "'";
				} else if (this.inputData == 'STATE OF IOWA') {
					this.query.where = "JURISDICTION='STATE OF IOWA'";
				} else if (this.curAreaType == 'County') {
					this.query.where = "JURISDICTION='COUNTY OF " + this.inputData.toUpperCase() + "'";
				} else {
					var area = this.curAreaType == 'RPA' ? 'RPA' : 'COUNTYNUM';
					this.query.where = `${area}=${this.inputData}`;
				}
				window.baseQ = this.query;
				this.query.returnDistinctValues = true;
				this.query.returnGeometry = false;
				this.query.outFields = ['YEAR'];

				window.yearArrI = [0, 0, 0, 0, 0, 0, 0];
				// this.queryTask = new QueryTask(this.baseURL2 + 1);
				// console.log("BEGINNING QUERYTASK");
				// this.queryTask.execute(this.query, (ev) => this.getYearUnique(ev, 1));

				this.queryTask = new QueryTask(this.baseURL + 0);
				this.queryTask.execute(this.query, (ev) => this.getYearsinLayer(ev));

				if (!window.PC) {
					this.publishData(
						{
							value: this.query,
						},
						true
					);
					console.log('PC is null â Published query to data manager with query.where: ' + this.query.where);
				} else {
					topic.publish('publishData', 'Splash', 'Splash_T', this.query, false);
					console.log('PC is true â Published query to data manager with query.where: ' + this.query.where);
				}

				console.log('target was year: query where statement is: ' + this.query.where);
			} else if (target == 'draw') {
				this.loaderWidget.showOrHide(1, false);
				this.query.outFields = ['*'];
				this.query.returnDistinctValues = false;
				this.query.returnGeometry = true;

				queryp = '';
				queryw = '';
				let i;

				if (this.curAreaType == 'City') {
					queryw = "JURISDICTION='CITY OF " + this.inputData.toUpperCase() + "'";
				} else if (this.inputData == 'STATE OF IOWA') {
					queryw = "JURISDICTION='STATE OF IOWA'";
				} else if (this.curAreaType == 'County') {
					queryw = "JURISDICTION='COUNTY OF " + this.inputData.toUpperCase() + "'";
				} else {
					var area = this.curAreaType == 'RPA' ? 'RPA' : 'COUNTYNUM';
					queryw = `${area}=${this.inputData}`;
				}
				var numYrs = 0;
				for (i = 0; i &lt; window.yearArrI.length; i++) if (window.yearArrI[i]) numYrs++;
				for (i = 0; i &lt; window.yearArrI.length; i++) {
					this.queryTask = new QueryTask(`${this.baseURL}${0}`);
					if (window.yearArrI[i] === 2) {
						numYrs--;
						this.query.where = queryw + ' AND YEAR = ' + (2013 + i);
						if (queryp != '') {
							queryp += ' OR YEAR=' + (2013 + i);
						} else {
							queryp += ' AND (YEAR=' + (2013 + i);
						}
						setTimeout(this.execute(0, numYrs), 2000 * i);
					} else if (window.yearArrI[i] === 1) {
						numYrs--;
						this.query.where = queryw + ' AND YEAR = ' + (2013 + i);
						setTimeout(this.execute(1, numYrs), 2000 * i);
					}
				}
			}
		},

		/**
		 * Draws the selected data to web map
		 * @param {*} hide true if this layer should be shown / false otherwise
		 * @param {*} numYrs number of years to draw
		 */
		execute: function (hide, numYrs) {
			this.queryTask.execute(this.query, (ev) => this.drawLayers(ev, hide, numYrs));
			console.log('target was draw: query where statement is: ' + this.query.where + ' | querytask = ' + this.queryTask.url);
		},

		/**
		 * Removes search element, if exists
		 */
		setMenuItemsS: function () {
			if (document.getElementById('search')) {
				var elem = document.getElementById('search');
				elem.parentNode.removeChild(elem);
			}
		},

		/**
		 * Populates Jurisdiciton / Area input text menu with rpa / countynum / city / county values (based on value of area dropdown menu)
		 */
		setMenuItems: function () {
			var options = '';
			var i;
			switch (this.curAreaType) {
				case 'RPA':
					if (this.rArr == null) {
						console.log('rArr was null!');
						return;
					}
					for (i = 0; i &lt; this.rArr.length; i++) options += '&lt;option value="' + this.rArr[i] + '" />';
					break;
				case 'CountyNum':
					if (this.cArr == null) {
						console.log('cArr was null!');
						return;
					}
					for (i = 0; i &lt; this.cArr.length; i++) options += '&lt;option value="' + this.cArr[i] + '" />';
					break;
				case 'City':
					if (this.jArr == null) {
						console.log('jArr was null!');
						return;
					}
					for (i = 0; i &lt; this.jArr.length; i++) options += '&lt;option value="' + this.jArr[i] + '" />';
					break;
				case 'County':
					if (this.jArrC == null) {
						console.log('jArrC was null!');
						return;
					}
					for (i = 0; i &lt; this.jArrC.length; i++) options += '&lt;option value="' + this.jArrC[i] + '" />';
					break;
				default:
					console.log('Not a valid input! Field was: ' + this.curAreaType);
			}
			document.getElementById('areaname').innerHTML = options;
		},

		/**
		 * Generates RPA menu with values 1 through 18
		 */
		genrArr: function () {
			// RPA 1 - 18
			this.rArr = new Array();
			for (let i = 1; i &lt;= 18; i++) this.rArr.push(i);
			console.log('genrArr');
		},

		/**
		 * Generates County menu with values 1 through 99
		 */
		gencArr: function () {
			// RPA 1 - 99
			this.cArr = new Array();
			for (let i = 1; i &lt;= 99; i++) this.cArr.push(i);
			console.log('gencArr');
		},

		/**
		 * Populate City and County menu from results in iowa
		 * @param {*} featureSet result of query
		 */
		genjArr: function (featureSet) {
			//Performance enhancer - assign featureSet array to a single variable.
			var resultFeatures = featureSet.features;
			var temp = [];
			if (resultFeatures.length === 0) {
				alert('No results found.');
			} else {
				for (let i = 0; i &lt; resultFeatures.length; i++) if (resultFeatures[i].attributes.JURISDICTION != null) temp.push(resultFeatures[i].attributes.JURISDICTION);
			}
			this.jArr = [];
			this.jArrC = [];
			for (let i = 0; i &lt; temp.length; i++) {
				if (temp[i].substring(0, 8) == 'CITY OF ') {
					this.jArr.push(this.toLowerCase(temp[i].substring(8, temp[i].length)));
				} else {
					if (temp[i].substring(0, 10) == 'COUNTY OF ') {
						temp[i] = temp[i].substring(10, temp[i].length);
					}
					this.jArrC.push(this.toLowerCase(temp[i]));
				}
			}

			console.log('genjArr');
			this.curAreaType = 'City';
			this.setMenuItems(this.curAreaType);
		},

		// writeSpaces: function (str) {
		// 	var newStr = '';
		// 	for (let i = 0; i &lt; str.length; i++) {
		// 		if (str.charAt(i) == '_') {
		// 			newStr += ' ';
		// 		} else {
		// 			newStr += str.charAt(i);
		// 		}
		// 	}
		// 	return newStr;
		// },

		/**
		 * Helper function for genjArr
		 * Convert all letters (besides first in word) to lowercase
		 * @param {string} str str to modify
		 */
		toLowerCase: function (str) {
			var newStr = str.charAt(0);
			for (let i = 1; i &lt;= str.length; i++) {
				if (str.charAt(i - 1) != ' ') {
					if (i &lt; str.length) newStr += str.charAt(i).toLowerCase();
				} else {
					newStr += str.charAt(i);
				}
			}
			return newStr;
		},

		// stringify: function (num, toString) {
		// 	var newStr = '';
		// 	if (toString) {
		// 		for (let i = 0; i &lt; num; i++) {
		// 			newStr += 'A';
		// 		}
		// 		return newStr;
		// 	}
		// 	newStr = num.length;
		// 	return newStr;
		// },

		/**
		 * Maps a year (as string) to the relevant index for querying the FeatureServer
		 * @param {string} thisYear the year to find index
		 */
		getIndexfromYear: function (thisYear) {
			switch (thisYear) {
				case '2013':
					return 0;
				case '2014':
					return 1;
				case '2015':
					return 2;
				case '2016':
					return 3;
				case '2017':
					return 4;
				case '2018':
					return 5;
				case '2019':
					return 6;
			}
		},

		/**
		 * Creates the switch buttons for splash screen, unique to each year
		 */
		setSwitches: function () {
			this.inputData = document.getElementById('enterData').value;
			window.yearArrI = [0, 0, 0, 0, 0, 0, 0];
			window.yearArr = [1, 1, 1, 1, 1, 1, 1]; // [0, 0, 0, 0, 0, 0]; javascript needs access to six elements
			this.yearC = 0;

			// Currently this works. Not sure if another solution is available (see trello), but I think could be improved
			this.OnEvent = OnEvent;

			/**
			 * Sets year of toggled button to True/False for showing/hiding on draw
			 * @param {*} ev even
			 * @param {*} index index of switch
			 * @param {*} theMap reference to main map object
			 */
			function OnEvent(ev, index, theMap) {
				let thisYear;
				switch (index) {
					case 0:
						thisYear = '2013';
						break;
					case 1:
						thisYear = '2014';
						break;
					case 2:
						thisYear = '2015';
						break;
					case 3:
						thisYear = '2016';
						break;
					case 4:
						thisYear = '2017';
						break;
					case 5:
						thisYear = '2018';
						break;
					case 6:
						thisYear = '2019';
						break;
				}

				if (window.yearArrI[index] == 2) {
					// if 2, button is on (as 1 means button is loaded, which defaults to off, and 0 means button is not loaded)
					window.yearArrI[index] = 1;
					if (theMap.getLayer(thisYear)) theMap.getLayer(thisYear).hide();
					this.yearC--;
				} else {
					if (theMap.getLayer(thisYear)) theMap.getLayer(thisYear).show();
					window.yearArrI[index] = 2;
					this.yearC++;
				}

				topic.publish('publishData', 'yearToggle', 'yearToggle', thisYear, true);
				console.log('yearArrI at index = ' + index + ' is ' + window.yearArrI[index]);
				this.isASwitchOn();
			}

			for (let i = 0; i &lt; window.yearArrI.length; i++) {
				window.yearArr[i] = document.createElement('input');
				window.yearArr[i].setAttribute('type', 'checkbox');
				window.yearArr[i].setAttribute('id', 'togBtn' + i);
				window.yearArr[i].addEventListener('change', (ev) => this.OnEvent(ev, i, this.map));
			}

			this.executeQueryTask('year');
		},

		/**
		 * Creates switch buttons based on available years of queried layer
		 */
		updateYears: function () {
			document.getElementById('myDIV1').innerHTML = '';
			for (let i = 0; i &lt; window.yearArrI.length; i++) {
				if (window.yearArrI[i]) {
					var divFlex = document.createElement('div');
					divFlex.setAttribute('style', 'flex-basis: 5%');
					// add / make switches visible
					var label = document.createElement('label');
					label.setAttribute('class', 'switch');

					var div = document.createElement('div');
					div.setAttribute('class', 'slider' + i + ' round'); // to change is the div class

					var pt = document.getElementById('myDIV1').appendChild(divFlex).appendChild(label);
					pt.appendChild(window.yearArr[i]);
					pt.appendChild(div);
				}
			}
			this.isASwitchOn();
		},

		/**
		 * Determines which years are available in queried data
		 * @param {*} response response of query
		 */
		getYearsinLayer: function (response) {
			window.yearArrI = [0, 0, 0, 0, 0, 0, 0];
			var resultFeatures = response.features;
			if (resultFeatures.length === 0) {
				alert('No results found.');
			} else {
				for (let i = 0; i &lt; resultFeatures.length; i++)
					switch (resultFeatures[i].attributes.YEAR) {
						case 2013:
							window.yearArrI[0] = 1;
							console.log('Found 2013 in query');
							break;
						case 2014:
							console.log('Found 2014 in query');
							window.yearArrI[1] = 1;
							break;
						case 2015:
							console.log('Found 2015 in query');
							window.yearArrI[2] = 1;
							break;
						case 2016:
							console.log('Found 2016 in query');
							window.yearArrI[3] = 1;
							break;
						case 2017:
							console.log('Found 2017 in query');
							window.yearArrI[4] = 1;
							break;
						case 2018:
							console.log('Found 2018 in query');
							window.yearArrI[5] = 1;
							break;
						case 2019:
							console.log('Found 2019 in query');
							window.yearArrI[6] = 1;
							break;
					}
			}
			this.updateYears();
			this.loaderWidget.showOrHide(0, false);
		},
		/**
		 * Returns which (unique) year is in queried data
		 * @param {*} response response of query
		 * @param {*} index index of queuried year
		 */
		getYearUnique: function (response, index) {
			var resultFeatures = response.features;
			if (resultFeatures.length) {
				window.yearArrI[7 - index] = 1;
				console.log(`UNIQUE: Found ${2020 - index} in query!`);
			}
			if (index &lt; 7) {
				index++;
				this.queryTask = new QueryTask(this.baseURL2 + index);
				this.queryTask.execute(this.query, (ev) => this.getYearUnique(ev, index));
			} else {
				this.updateYears();
				this.loaderWidget.showOrHide(0, false);
			}
		},

		/**
		 * Draws graphics to the main map from the data queried from server.
		 * @param {*} featureSet data to draw
		 * @param {*} hide true if this layer is hidden on map load
		 * @param {*} last true if this is the last layer to draw
		 */
		drawLayers: function (featureSet, hide, last) {
			//Performance enhancer - assign featureSet array to a single variable.
			var resultFeatures = featureSet.features;
			console.log('Beginning draw layer');
			if (resultFeatures.length === 0) {
				alert('No results found.');
			} else {
				//if (this.featureLayer) this.map.removeLayer(this.map.getLayer("Treatment"));
				//this.map.graphics.clear();
				var geometryTypeQuery = featureSet.geometryType;
				//create a feature collection
				var featureCollection = {
					layerDefinition: null,
					featureSet: {
						features: [],
						geometryType: geometryTypeQuery,
					},
				};

				featureCollection.layerDefinition = {
					geometryType: geometryTypeQuery,
					fields: featureSet.fields,
				};

				//var infoTemplateQuery = theMap.getLayer('featservice15_3982').infoTemplate; // wildcard for all fields.  Specifiy particular fields here if desired.
				//create a feature layer based on the feature collection
				this.featureLayer = new FeatureLayer(featureCollection, {
					id: `${resultFeatures[0].attributes['YEAR']}`,
					infoTemplate: window.myInfoTemplate, // very roundabout solution, prefer to load from config
				});

				this.featureLayer._name = this.featureLayer.id;
				this.featureLayer.htmlPopupType = 'esriServerHTMLPopupTypeAsHTMLText';
				this.featureLayer.infoTemplate.info.title = `{IPMP_RTE} in {YEAR} â ID: {OBJECTID}`;

				//loop though the features
				var color, pci;
				for (var i = 0, len = resultFeatures.length; i &lt; len; i++) {
					var feature = resultFeatures[i];
					pci = feature.attributes['PCI'];

					if (pci &lt;= 20) {
						color = 'red';
					} else if (pci &lt;= 40) {
						color = 'orange';
					} else if (pci &lt;= 60) {
						color = 'yellow';
					} else if (pci &lt;= 80) {
						color = 'green';
					} else {
						color = 'blue';
					}

					feature.setSymbol(new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color(color), 3));
					this.featureLayer.add(feature);
				}
				var renderer = new UniqueValueRenderer(new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color(color), 3), 'type');
				renderer.addValue('very poor', new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 'red', 3));
				renderer.addValue('poor', new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 'orange', 3));
				renderer.addValue('fair', new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 'yellow', 3));
				renderer.addValue('good', new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 'green', 3));
				renderer.addValue('very good', new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 'blue', 3));
				this.featureLayer.setRenderer(renderer);

				this.map.addLayer(this.featureLayer);
				if (hide) this.map.getLayer(this.featureLayer.id).hide();

				if (!last) {
					this.extent = this.calcGraphicsExtent(resultFeatures);
					this.map.setExtent(this.extent); //zoom to query results
					this.loaderWidget.showOrHide(0, false);
				} else {
				}
				this._openResultInAttributeTable(this.featureLayer);
			}
		},

		/**
		 * Calculates max bounds (x and y) of graphic geometry array
		 * @param {*} graphicsArray feature data with geometry
		 */
		calcGraphicsExtent: function (graphicsArray) {
			var g = graphicsArray[0].geometry,
				fullExt = g.getExtent(),
				ext,
				i,
				il = graphicsArray.length;

			if (fullExt === null) {
				fullExt = new Extent(g.x, g.y, g.x, g.y, g.spatialReference);
			}
			for (i = 1; i &lt; il; i++) {
				ext = (g = graphicsArray[i].geometry).getExtent();
				if (ext === null) {
					ext = new Extent(g.x, g.y, g.x, g.y, g.spatialReference);
				}
				fullExt = fullExt.union(ext);
			}
			return fullExt;
		},

		/**
		 * Loads the final (most recent) layer to attribute table on map load.
		 * @param {*} currentLayer data to load into table
		 */
		_openResultInAttributeTable: function (currentLayer) {
			if (this.autozoomtoresults) {
				setTimeout(
					lang.hitch(this, function () {
						this.zoomall();
					}),
					300
				);
			}
			var aLayer = {
				layerObject: currentLayer,
				title: currentLayer.name,
				id: currentLayer.id,
				getLayerObject: function () {
					var def = new Deferred();
					if (this.layerObject) {
						def.resolve(this.layerObject);
					} else {
						def.reject('layerObject is null');
					}
					return def;
				},
			};
			if (!Object.create) {
				Object.create = function (proto, props) {
					if (typeof props !== 'undefined') {
						throw 'The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.';
					}

					function ctor() {}
					ctor.prototype = proto;
					return new ctor();
				};
			}
			this.publishData({
				target: 'AttributeTable',
				layer: Object.create(aLayer),
			});
		},

		/**
		 * Styling for OK button
		 */
		_setOkNodeAriaLabel: function () {
			var okNodeAriaLabel = this.okNode.innerHTML;
			if (this._requireConfirm) {
				// &amp;&amp; !this.confirmCheck.getValue()) {
				okNodeAriaLabel = okNodeAriaLabel + ' ' + window.jimuNls.common.disabled;
			}
			html.attr(this.okNode, 'aria-label', okNodeAriaLabel);
		},

		/**
		 * Styling â Sets splash config
		 */
		_setConfig: function () {
			this._setWidthForOldVersion().then(
				lang.hitch(this, function () {
					this._setSizeFromConfig();

					var button = this.config.splash.button;
					if (typeof button !== 'undefined') {
						if (typeof button.color !== 'undefined') {
							html.setStyle(this.okNode, 'backgroundColor', button.color);
							html.setStyle(this.okNode, 'color', utils.invertColor(button.color)); //auto color for text
						}
						if (typeof button.transparency !== 'undefined') {
							html.setStyle(this.okNode, 'opacity', 1 - button.transparency);
						}
					}
					this.okNode.innerHTML = this.config.splash.button.text || this.nls.ok;
					html.attr(this.okNode, 'title', this.config.splash.button.text || this.nls.ok);
					this._setOkNodeAriaLabel();

					var background = this.config.splash.background;
					if (typeof background !== 'undefined') {
						//image
						if ('image' === background.mode &amp;&amp; typeof background.image !== 'undefined') {
							var bg = '',
								repeat = '';
							bg = 'url(' + utils.processUrlInWidgetConfig(background.image, this.folderUrl) + ') center center ';
							repeat = 'no-repeat';

							var type = background.type;
							if ('undefined' !== typeof type) {
								html.addClass(this.splashContainerNode, type);
								if ('tile' === type) {
									repeat = 'repeat'; //only "tile" need repeat
								}
							}
							html.setStyle(this.splashContainerNode, 'background', bg + repeat);
						} else if ('color' === background.mode &amp;&amp; typeof background.color !== 'undefined') {
							//color
							if ('undefined' !== typeof background.color) {
								html.setStyle(this.splashContainerBackground, 'backgroundColor', background.color);
							}
							if ('undefined' !== typeof background.transparency) {
								html.setStyle(this.splashContainerBackground, 'opacity', 1 - background.transparency);
							}
						}
					}
					//html.setStyle(query(".label", this.domNode)[0], 'color', utils.invertColor(background.color));//auto color for text
					var confirm = this.config.splash.confirm;
					if (typeof confirm !== 'undefined' &amp;&amp; this.domNode) {
						var dom = query('.label', this.domNode)[0];
						if ('undefined' !== typeof confirm.color &amp;&amp; dom) {
							html.setStyle(dom, 'color', confirm.color);
						}
						if ('undefined' !== typeof confirm.transparency &amp;&amp; dom) {
							html.setStyle(dom, 'opacity', 1 - confirm.transparency);
						}
					}

					if ('undefined' !== typeof this.config.splash.contentVertical) {
						this.contentVertical = this.config.splash.contentVertical;
					} else {
						this.contentVertical = 'top';
					}

					//resize
					if (!utils.isInConfigOrPreviewWindow()) {
						var isFirstKey = this._getCookieKey();
						var isfirst = cookie(isFirstKey);
						if (esriLang.isDefined(isfirst) &amp;&amp; isfirst.toString() === 'false') {
							this.close();
						}
					}

					this.resize();
					this.own(
						on(
							window,
							'resize',
							lang.hitch(this, function () {
								this.resize();
							})
						)
					);
					this._resizeContentImg();

					html.removeClass(this.envelopeNode, 'buried'); //show the node
					this.shelter.hide();
				})
			);
		},

		/**
		 * Styling â sets position of child element
		 */
		_normalizeDomNodePosition: function () {
			html.setStyle(this.domNode, 'top', 0);
			html.setStyle(this.domNode, 'left', 0);
			html.setStyle(this.domNode, 'right', 0);
			html.setStyle(this.domNode, 'bottom', 0);
		},

		/**
		 * Sets placement of splash screen in window
		 * @param {*} position position data
		 */
		setPosition: function (position) {
			this.position = position;

			html.place(this.domNode, window.jimuConfig.layoutId);
			this._normalizeDomNodePosition();
			if (this.started) {
				this.resize();
			}
		},

		/**
		 * Perform operations on window resize
		 */
		resize: function () {
			this._changeStatus();
		},

		/**
		 * Styling â sets main image of splash
		 */
		_resizeContentImg: function () {
			if (this._hasContent &amp;&amp; !this._isClosed) {
				var customBox = html.getContentBox(this.envelopeNode);
				html.empty(this.customContentNode);

				var splashContent = html.toDom(this.config.splash.splashContent);
				html.place(splashContent, this.customContentNode);
				// single node only(no DocumentFragment)
				if (this.customContentNode.nodeType &amp;&amp; this.customContentNode.nodeType === 1) {
					var contentImgs = query('img', this.customContentNode);
					if (contentImgs &amp;&amp; contentImgs.length) {
						contentImgs.style({
							maxWidth: customBox.w - 40 - 20 + 'px', // prevent x scroll
							maxHeight: customBox.h - 40 + 'px',
						});
					}
				}
			}
		},

		/**
		 * Performs style changes based on window transforms
		 */
		_changeStatus: function () {
			if (window.appInfo.isRunInMobile) {
				html.setStyle(this.envelopeNode, 'height', '100%');
				html.setStyle(this.envelopeNode, 'width', '100%');
			} else {
				this._setSizeFromConfig();
			}

			//this._resizeCustomContent();
			this._resizeContentImg();
		},

		/**
		 * Styling
		 * @param {*} node
		 * @param {*} prop
		 */
		_getNodeStylePx: function (node, prop) {
			if (node &amp;&amp; prop) {
				return parseInt(html.getStyle(node, prop), 10);
			} else {
				return 0;
			}
		},

		/**
		 * Styling
		 */
		_resizeCustomContent: function () {
			var containerContent = html.getContentBox(this.splashContainerNode),
				customContentScrollheight = this.customContentNode.scrollHeight,
				footerBox = html.getMarginBox(this.footerNode);
			var contentMarginButtom = this._getNodeStylePx(this.customContentNode, 'margin-bottom'), //between content &amp; confirm text
				footerBottom = this._getNodeStylePx(this.footerNode, 'bottom'), //between footer &amp; splashBottom
				contentSpace = containerContent.h - (footerBox.h + footerBottom);

			var isNeedLimitCustomContentHeight = customContentScrollheight >= contentSpace;
			if (true === isNeedLimitCustomContentHeight || window.appInfo.isRunInMobile) {
				//limit the customContent height   OR   extend height in mobile
				html.setStyle(this.customContentNode, 'height', contentSpace - contentMarginButtom + 'px');
			} else {
				html.setStyle(this.customContentNode, 'height', 'auto');
				this._moveContentToMiddle({
					contentSpace: contentSpace,
					customContentScrollheight: customContentScrollheight,
				});
			}
		},
		/**
		 * align custom content to vertically
		 * @param {*} context
		 */
		_moveContentToMiddle: function (context) {
			var contentMarginTop = 10, //this._getNodeStylePx(this.customContentNode, "margin-top"),
				middleLine = (context.contentSpace - contentMarginTop) / 2;
			//move the content to middle
			if (this.contentVertical === 'middle') {
				//customContent half-height line is upon the middleLine
				var uponTheMiddleline = context.customContentScrollheight / 2 - middleLine;
				if (uponTheMiddleline &lt; 0) {
					//Content is short
					var abs = Math.abs(uponTheMiddleline);
					html.setStyle(this.customContentNode, 'marginTop', abs + contentMarginTop + 'px');
				} else {
					//Content too long
					html.setStyle(this.customContentNode, 'marginTop', contentMarginTop + 'px');
				}
			}
		},
		/**
		 * Grey out OK button, unless at least one year button is selected (true)
		 */
		isASwitchOn: function () {
			if (this._requireConfirm &amp;&amp; this.yearC != 0) {
				html.addClass(this.okNode, 'enable-btn');
				html.removeClass(this.okNode, 'disable-btn');
				this._setOkNodeAriaLabel();
			} else {
				html.addClass(this.okNode, 'disable-btn');
				html.removeClass(this.okNode, 'enable-btn');
				this._setOkNodeAriaLabel();
			}
		},

		/**
		 * Get Cookie Information
		 */
		_getCookieKey: function () {
			return 'isfirst_' + encodeURIComponent(utils.getAppIdFromUrl());
		},

		/**
		 * Closes this widget, and draws selected data to web map.
		 */
		onOkClick: function () {
			if (this.yearC == 0 || this.yearC == null) {
				console.log('No years selected');
			} else {
				console.log('Ok Clicked: executing query task for draw');
				var yearC = this.yearC; // yearC will be set to 0 after draw task
				this.executeQueryTask('draw');
				this.yearC = yearC;

				// The following is a very roundabout way of setting the info template by directly pulling from entire dataset's infotemplate, thus 'c' cannot be null
				var temp = this.map.getLayer('TempMap_8535');
				if (temp) {
					window.myInfoTemplate = temp.infoTemplate;
					this.map.removeLayer(temp);
				}
				if (this.map.getLayer('featservice15_2789')) this.map.getLayer('featservice15_2789').hide();
				this.close();
			}
		},

		/**
		 * Fires on OK button interaction
		 * @param {*} evt button event
		 */
		onOkKeydown: function (evt) {
			if (evt.keyCode === keys.ENTER || evt.keyCode === keys.SPACE) {
				this.onOkClick();
				if (!this._requireConfirm || this._requireConfirm) {
					// always true
					utils.focusOnFirstSkipLink();
				} else {
					evt.preventDefault();
				}
			}
		},

		// _openResultInAttributeTable: function (currentLayer) {
		// 	if (this.autozoomtoresults) {
		// 		setTimeout(
		// 			lang.hitch(this, function () {
		// 				this.zoomall();
		// 			}),
		// 			300
		// 		);
		// 	}
		// 	var aLayer = {
		// 		layerObject: currentLayer,
		// 		title: currentLayer.name,
		// 		id: currentLayer.id,
		// 		getLayerObject: function () {
		// 			var def = new Deferred();
		// 			if (this.layerObject) {
		// 				def.resolve(this.layerObject);
		// 			} else {
		// 				def.reject('layerObject is null');
		// 			}
		// 			return def;
		// 		},
		// 	};
		// 	if (!Object.create) {
		// 		Object.create = function (proto, props) {
		// 			if (typeof props !== 'undefined') {
		// 				throw 'The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.';
		// 			}

		// 			function ctor() {}
		// 			ctor.prototype = proto;
		// 			return new ctor();
		// 		};
		// 	}
		// 	this.publishData({
		// 		target: 'AttributeTable',
		// 		layer: Object.create(aLayer),
		// 	});
		// },

		/**
		 * Fires on widget close
		 */
		close: function () {
			this._isClosed = true;
			this._eventHide();
			this.widgetManager.closeWidget(this);
		},

		/**
		 * Styling â set splash screen size
		 */
		_setSizeFromConfig: function () {
			var size = this.config.splash.size;
			if ('undefined' !== typeof size) {
				if (typeof size === 'object') {
					var percent = size.percent;
					var wh = size.wh;
					if ('percent' === size.mode &amp;&amp; typeof percent !== 'undefined') {
						html.setStyle(this.envelopeNode, 'width', percent);
						html.setStyle(this.envelopeNode, 'height', percent);
					} else if ('wh' === size.mode &amp;&amp; typeof wh !== 'undefined') {
						this._setWidthInCurrentScreen(wh);
						this._setHeightInCurrentScreen(wh);
					}
				}
			}
		},

		/**
		 * set width based on window size
		 * @param {*} wh pixels
		 */
		_setWidthInCurrentScreen: function (wh) {
			var screenWidth = window.innerWidth;
			if (!window.appInfo.isRunInMobile &amp;&amp; wh.w &lt;= screenWidth) {
				html.setStyle(this.envelopeNode, 'width', wh.w + 'px');
			} else {
				html.setStyle(this.envelopeNode, 'width', '100%');
			}
		},

		/**
		 * Set Height
		 * @param {*} wh pixel
		 */
		_setHeightInCurrentScreen: function (wh) {
			var screenHeight = window.innerHeight;
			if (!window.appInfo.isRunInMobile &amp;&amp; wh.h &lt;= screenHeight) {
				html.setStyle(this.envelopeNode, 'height', wh.h + 'px');
			} else {
				html.setStyle(this.envelopeNode, 'height', '100%');
			}
		},

		/**
		 * for old version update
		 */
		_setWidthForOldVersion: function () {
			var def = new Deferred();
			var size = this.config.splash.size;
			var isOldVersion = 'wh' === size.mode &amp;&amp; typeof size.wh !== 'undefined' &amp;&amp; null === size.wh.h;
			if (true === isOldVersion) {
				//this._setWhiteColorTextForOldVersion();
				return utils
					.getEditorContentHeight(this.config.splash.splashContent, this.domNode, {
						contentWidth: 600 - 40,
						contentMarginTop: 20, //contentMarginTop
						footerHeight: 88 + 10, //contentMarginBottom
					})
					.then(
						lang.hitch(this, function (h) {
							size.wh.h = h;
							return h;
						})
					);
			} else {
				//this._restoreTextColorForNormal();
				def.resolve();
				return def;
			}
		},
		// _setWhiteColorTextForOldVersion: function() {
		//   html.setStyle(this.customContentNode, 'color', "#fff");
		// },
		// _restoreTextColorForNormal: function() {
		//   html.setStyle(this.customContentNode, 'color', "#000");
		// }

		/**
		 * event for AppStatePopup
		 */
		_eventShow: function () {
			setTimeout(
				lang.hitch(this, function () {
					topic.publish('splashPopupShow');
				}),
				800
			); // becauseof MapManager._checkAppState setTimeout 500;
		},

		/**
		 * event for AppStatePopup
		 */
		_eventHide: function () {
			topic.publish('splashPopupHide');
		},
	});
	return clazz;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="echarts_coord_scale_Ordinal%250D%250Dhttp___en.wikipedia.org_wiki_Level_of_measurementmodule_.html">echarts/coord/scale/Ordinalhttp://en.wikipedia.org/wiki/Level_of_measurement</a></li><li><a href="echarts-module_ECharts.html">ECharts</a></li><li><a href="echarts-module_MessageCenter.html">MessageCenter</a></li><li><a href="module-AttributeTable.html">AttributeTable</a></li><li><a href="module-BasemapGallery.html">BasemapGallery</a></li><li><a href="module-Draw.html">Draw</a></li><li><a href="module-echarts_animation_Animator.html">echarts/animation/Animator</a></li><li><a href="module-echarts_chart_helper_Line.html">echarts/chart/helper/Line</a></li><li><a href="module-echarts_chart_helper_LineDraw.html">echarts/chart/helper/LineDraw</a></li><li><a href="module-echarts_chart_helper_Symbol.html">echarts/chart/helper/Symbol</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_geo_parseGeoJson.html">echarts/coord/geo/parseGeoJson</a></li><li><a href="module-echarts_coord_geo_Region.html">echarts/coord/geo/Region</a></li><li><a href="module-echarts_core_BoundingRect.html">echarts/core/BoundingRect</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-echarts_scale_Interval.html">echarts/scale/Interval</a></li><li><a href="module-echarts_scale_Log.html">echarts/scale/Log</a></li><li><a href="module-echarts_scale_Scale.html">echarts/scale/Scale</a></li><li><a href="module-echarts_stream_Scheduler.html">echarts/stream/Scheduler</a></li><li><a href="module-Geoprocessing.html">Geoprocessing</a></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Infographic.html">Infographic</a></li><li><a href="module-LayerList.html">LayerList</a></li><li><a href="module-MapProgress.html">MapProgress</a></li><li><a href="module-PickColumns.html">PickColumns</a></li><li><a href="module-Search.html">Search</a></li><li><a href="module-Select.html">Select</a></li><li><a href="module-Splash.html">Splash</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_BaseIconItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/BaseIconItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_DockableItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/DockableItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_GroupItems.html">themes/LaunchpadTheme/widgets/AnchorBarController/GroupItems</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_Widget.html">themes/LaunchpadTheme/widgets/AnchorBarController/Widget</a></li><li><a href="module-Treatment.html">Treatment</a></li><li><a href="module-widgets_Coordinate.html">widgets/Coordinate</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_easing.html">zrender/animation/easing</a></li><li><a href="module-zrender_core_bbox.html">zrender/core/bbox</a></li><li><a href="module-zrender_core_curve.html">zrender/core/curve</a></li><li><a href="module-zrender_core_event.html">zrender/core/event</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_core_util.html">zrender/core/util</a></li><li><a href="module-zrender_graphic_Displayable.html">zrender/graphic/Displayable</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_shape_Arc.html">zrender/graphic/shape/Arc</a></li><li><a href="module-zrender_graphic_shape_Line.html">zrender/graphic/shape/Line</a></li><li><a href="module-zrender_graphic_shape_Polyline.html">zrender/graphic/shape/Polyline</a></li><li><a href="module-zrender_graphic_shape_Rect.html">zrender/graphic/shape/Rect</a></li><li><a href="module-zrender_graphic_shape_Ring.html">zrender/graphic/shape/Ring</a></li><li><a href="module-zrender_graphic_shape_Sector.html">zrender/graphic/shape/Sector</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_RectText.html">zrender/mixin/RectText</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_shape_BezierCurve.html">zrender/shape/BezierCurve</a></li><li><a href="module-zrender_shape_Circle.html">zrender/shape/Circle</a></li><li><a href="module-zrender_shape_Polygon.html">zrender/shape/Polygon</a></li><li><a href="module-zrender_shape_util_smoothBezier.html">zrender/shape/util/smoothBezier</a></li><li><a href="module-zrender_shape_util_smoothSpline.html">zrender/shape/util/smoothSpline</a></li><li><a href="module-zrender_tool_matrix.html">zrender/tool/matrix</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="module-%257Becharts_model_Global%257D.html">{echarts/model/Global}</a></li><li><a href="module-%257Becharts_model_OptionManager%257D.html">{echarts/model/OptionManager}</a></li></ul><h3>Namespaces</h3><ul><li><a href="crc.html">crc</a></li><li><a href="LocalMediaStream%2520--%2520https___developer.mozilla.org_en-US_docs_WebRTC_MediaStream_API_LocalMediaStream.html">LocalMediaStream</a></li><li><a href="xhr.sendAsBinary%2520%2520https___developer.mozilla.org_ru_XMLHttpRequest_Sending_binary_content.html">Sending_binary_content</a></li></ul><h3>Classes</h3><ul><li><a href="FileAPI.Camera.html">Camera</a></li><li><a href="FileAPI.Camera.Shot.html">Shot</a></li><li><a href="modue_zrender_mixin_Animatable.html">modue:zrender/mixin/Animatable</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_component_marker_LineDraw.html">echarts/component/marker/LineDraw</a></li><li><a href="module-echarts_component_tooltip_TooltipContent.html">echarts/component/tooltip/TooltipContent</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_Cartesian-module_echarts_coord_cartesian_Axis2D.html">echarts/coord/cartesian/Axis2D</a></li><li><a href="module-echarts_coord_scale_Interval.html">echarts/coord/scale/Interval</a></li><li><a href="module-echarts_coord_scale_Time.html">echarts/coord/scale/Time</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_Animator.html">zrender/animation/Animator</a></li><li><a href="module-zrender_core_LRU.html">zrender/core/LRU</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_Element.html">zrender/Element</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_Path.html">zrender/graphic/Path</a></li><li><a href="module-zrender_Handler.html">zrender/Handler</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_Painter.html">zrender/Painter</a></li><li><a href="module-zrender_Storage.html">zrender/Storage</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="zrender_graphic_Image.html">zrender/graphic/Image</a></li><li><a href="zrender_graphic_Text.html">zrender/graphic/Text</a></li><li>{<a href="module-echarts_chart_helper_Line.html">module:echarts/chart/helper/Line</a>}</li><li>{<a href="module-echarts_chart_helper_Symbol.html">module:echarts/chart/helper/Symbol</a>}</li></ul><h3>Events</h3><ul><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendScroll">legendScroll</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendSelect">legendSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendToggleSelect">legendToggleSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendUnSelect">legendUnSelect</a></li></ul><h3>Mixins</h3><ul><li><a href="module-echarts_chart_helper_LineDraw-%257Bmodule_zrender_mixin_Eventful%257D.html">{zrender/mixin/Eventful}</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_addExternalStyleSheets">_addExternalStyleSheets</a></li><li><a href="global.html#_addSectionTitle">_addSectionTitle</a></li><li><a href="global.html#_createLayout">_createLayout</a></li><li><a href="global.html#_createPrintMapParameters">_createPrintMapParameters</a></li><li><a href="global.html#_createPrintTask">_createPrintTask</a></li><li><a href="global.html#_createReportNote">_createReportNote</a></li><li><a href="global.html#_displayLayers">_displayLayers</a></li><li><a href="global.html#_executePrintTask">_executePrintTask</a></li><li><a href="global.html#_filters">_filters</a></li><li><a href="global.html#_findContentItemById">_findContentItemById</a></li><li><a href="global.html#_formatAndRenderTables">_formatAndRenderTables</a></li><li><a href="global.html#_getFixedThemeStyles">_getFixedThemeStyles</a></li><li><a href="global.html#_handleDataSourceForWidgets">_handleDataSourceForWidgets</a></li><li><a href="global.html#_onAppProxyForMapChanged">_onAppProxyForMapChanged</a></li><li><a href="global.html#_onAppProxyForUrlChanged">_onAppProxyForUrlChanged</a></li><li><a href="global.html#_onFieldVisibleChange">_onFieldVisibleChange</a></li><li><a href="global.html#_renderHTMLData">_renderHTMLData</a></li><li><a href="global.html#_renderTable">_renderTable</a></li><li><a href="global.html#_resetCoordinate">_resetCoordinate</a></li><li><a href="global.html#_setButtonLabels">_setButtonLabels</a></li><li><a href="global.html#_setCoordControlsTabindex">_setCoordControlsTabindex</a></li><li><a href="global.html#_setFootNotes">_setFootNotes</a></li><li><a href="global.html#_setPageSize">_setPageSize</a></li><li><a href="global.html#_setReportData">_setReportData</a></li><li><a href="global.html#_setReportLogo">_setReportLogo</a></li><li><a href="global.html#_setReportSizeMessage">_setReportSizeMessage</a></li><li><a href="global.html#_setReportTitle">_setReportTitle</a></li><li><a href="global.html#_updatePartForBetween">_updatePartForBetween</a></li><li><a href="global.html#_validateParameters">_validateParameters</a></li><li><a href="global.html#acceptValue">acceptValue</a></li><li><a href="global.html#action">action</a></li><li><a href="global.html#applyWidgetFilter">applyWidgetFilter</a></li><li><a href="global.html#calculateLayerIndex">calculateLayerIndex</a></li><li><a href="global.html#canAssignUsersToOrgGroups">canAssignUsersToOrgGroups</a></li><li><a href="global.html#canChangeUserRoles">canChangeUserRoles</a></li><li><a href="global.html#canCreateGroup">canCreateGroup</a></li><li><a href="global.html#canCreateItem">canCreateItem</a></li><li><a href="global.html#canDeleteOrgGroups">canDeleteOrgGroups</a></li><li><a href="global.html#canDeleteOrgItems">canDeleteOrgItems</a></li><li><a href="global.html#canDeleteUsers">canDeleteUsers</a></li><li><a href="global.html#canDesignateOpenDataGroups">canDesignateOpenDataGroups</a></li><li><a href="global.html#canDisableUsers">canDisableUsers</a></li><li><a href="global.html#canEditFeatures">canEditFeatures</a></li><li><a href="global.html#canEditFeaturesFullControl">canEditFeaturesFullControl</a></li><li><a href="global.html#canInviteUsers">canInviteUsers</a></li><li><a href="global.html#canJoinNonOrgGroup">canJoinNonOrgGroup</a></li><li><a href="global.html#canJoinOrgGroup">canJoinOrgGroup</a></li><li><a href="global.html#canManageEnterpriseGroups">canManageEnterpriseGroups</a></li><li><a href="global.html#canManageLicenses">canManageLicenses</a></li><li><a href="global.html#canManageMarketplace">canManageMarketplace</a></li><li><a href="global.html#canManageOpenData">canManageOpenData</a></li><li><a href="global.html#canPublishFeatures">canPublishFeatures</a></li><li><a href="global.html#canPublishScenes">canPublishScenes</a></li><li><a href="global.html#canPublishTiles">canPublishTiles</a></li><li><a href="global.html#canPurchaseMarketplace">canPurchaseMarketplace</a></li><li><a href="global.html#canReassignOrgGroups">canReassignOrgGroups</a></li><li><a href="global.html#canReassignOrgItems">canReassignOrgItems</a></li><li><a href="global.html#canShareGroupToOrg">canShareGroupToOrg</a></li><li><a href="global.html#canShareGroupToPublic">canShareGroupToPublic</a></li><li><a href="global.html#canShareItemToGroup">canShareItemToGroup</a></li><li><a href="global.html#canShareItemToOrg">canShareItemToOrg</a></li><li><a href="global.html#canShareItemToPublic">canShareItemToPublic</a></li><li><a href="global.html#canTrialMarketplace">canTrialMarketplace</a></li><li><a href="global.html#canUpdateOrgGroups">canUpdateOrgGroups</a></li><li><a href="global.html#canUpdateOrgItems">canUpdateOrgItems</a></li><li><a href="global.html#canUpdateUsers">canUpdateUsers</a></li><li><a href="global.html#canUseDemographics">canUseDemographics</a></li><li><a href="global.html#canUseElevation">canUseElevation</a></li><li><a href="global.html#canUseGeocode">canUseGeocode</a></li><li><a href="global.html#canUseGeoenrichment">canUseGeoenrichment</a></li><li><a href="global.html#canUseNetworkAnalysis">canUseNetworkAnalysis</a></li><li><a href="global.html#canUseSpatialAnalysis">canUseSpatialAnalysis</a></li><li><a href="global.html#canViewOrgGroups">canViewOrgGroups</a></li><li><a href="global.html#canViewOrgItems">canViewOrgItems</a></li><li><a href="global.html#canViewUsers">canViewUsers</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#coordTextInputKeyWasPressed">coordTextInputKeyWasPressed</a></li><li><a href="global.html#cpBtnWasClicked">cpBtnWasClicked</a></li><li><a href="global.html#cpSubBtnWasClicked">cpSubBtnWasClicked</a></li><li><a href="global.html#createPages">createPages</a></li><li><a href="global.html#deactivateDrawTool">deactivateDrawTool</a></li><li><a href="global.html#destroyOnScreenWidgetsAndGroups">destroyOnScreenWidgetsAndGroups</a></li><li><a href="global.html#drawPointButtonWasClicked">drawPointButtonWasClicked</a></li><li><a href="global.html#expandButtonWasClicked">expandButtonWasClicked</a></li><li><a href="global.html#formatButtonWasClicked">formatButtonWasClicked</a></li><li><a href="global.html#formatDialogApplyButtonClicked">formatDialogApplyButtonClicked</a></li><li><a href="global.html#geomSrvcDidComplete">geomSrvcDidComplete</a></li><li><a href="global.html#geomSrvcDidFail">geomSrvcDidFail</a></li><li><a href="global.html#getCandidateParamNames">getCandidateParamNames</a></li><li><a href="global.html#getCleanInput">getCleanInput</a></li><li><a href="global.html#getCoordValues">getCoordValues</a></li><li><a href="global.html#getCurrentMapCoordinate">getCurrentMapCoordinate</a></li><li><a href="global.html#getDDPoint">getDDPoint</a></li><li><a href="global.html#getExportString">getExportString</a></li><li><a href="global.html#getFormattedCoordinates">getFormattedCoordinates</a></li><li><a href="global.html#getFormattedCoordinateText">getFormattedCoordinateText</a></li><li><a href="global.html#getFormattedDDMStr">getFormattedDDMStr</a></li><li><a href="global.html#getFormattedDDStr">getFormattedDDStr</a></li><li><a href="global.html#getFormattedDMSStr">getFormattedDMSStr</a></li><li><a href="global.html#getFormattedGARSStr">getFormattedGARSStr</a></li><li><a href="global.html#getFormattedGEOREFStr">getFormattedGEOREFStr</a></li><li><a href="global.html#getFormattedMGRSStr">getFormattedMGRSStr</a></li><li><a href="global.html#getFormattedUSNGStr">getFormattedUSNGStr</a></li><li><a href="global.html#getFormattedUTMHStr">getFormattedUTMHStr</a></li><li><a href="global.html#getFormattedUTMStr">getFormattedUTMStr</a></li><li><a href="global.html#getIcon">getIcon</a></li><li><a href="global.html#getMapCoordinateDD">getMapCoordinateDD</a></li><li><a href="global.html#getOrderableInput">getOrderableInput</a></li><li><a href="global.html#getOrderableOutput">getOrderableOutput</a></li><li><a href="global.html#getProjectedPoint">getProjectedPoint</a></li><li><a href="global.html#getStatisticsResult">getStatisticsResult</a></li><li><a href="global.html#getSupportExportFormats">getSupportExportFormats</a></li><li><a href="global.html#getWidgetFilter">getWidgetFilter</a></li><li><a href="global.html#getXYNotation">getXYNotation</a></li><li><a href="global.html#iconClass">iconClass</a></li><li><a href="global.html#iconFormat">iconFormat</a></li><li><a href="global.html#initUI">initUI</a></li><li><a href="global.html#inputError">inputError</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#isBasedOnAdmin">isBasedOnAdmin</a></li><li><a href="global.html#isBasedOnPublisher">isBasedOnPublisher</a></li><li><a href="global.html#isBasedOnUser">isBasedOnUser</a></li><li><a href="global.html#isCustom">isCustom</a></li><li><a href="global.html#isFeatureSupported">isFeatureSupported</a></li><li><a href="global.html#isPublisher">isPublisher</a></li><li><a href="global.html#isUser">isUser</a></li><li><a href="global.html#label">label</a></li><li><a href="global.html#loadAndLayout">loadAndLayout</a></li><li><a href="global.html#mapWasClicked">mapWasClicked</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#nodes">nodes</a></li><li><a href="global.html#onClose">onClose</a></li><li><a href="global.html#onExecute">onExecute</a></li><li><a href="global.html#onMinimize">onMinimize</a></li><li><a href="global.html#onNormalize">onNormalize</a></li><li><a href="global.html#parentWidget">parentWidget</a></li><li><a href="global.html#popupDidClose">popupDidClose</a></li><li><a href="global.html#postCreate">postCreate</a></li><li><a href="global.html#postMixInProperties">postMixInProperties</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#processCoordTextInput">processCoordTextInput</a></li><li><a href="global.html#profile">profile</a></li><li><a href="global.html#QRCode">QRCode</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#setActions">setActions</a></li><li><a href="global.html#setCoordUI">setCoordUI</a></li><li><a href="global.html#setHidden">setHidden</a></li><li><a href="global.html#setMapLayout">setMapLayout</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setPrivileges">setPrivileges</a></li><li><a href="global.html#setReportLayout">setReportLayout</a></li><li><a href="global.html#setSubCoordUI">setSubCoordUI</a></li><li><a href="global.html#setUIListeners">setUIListeners</a></li><li><a href="global.html#setVisible">setVisible</a></li><li><a href="global.html#showToolTip">showToolTip</a></li><li><a href="global.html#statInfo">statInfo</a></li><li><a href="global.html#stringify">stringify</a></li><li><a href="global.html#stringifyPretty">stringifyPretty</a></li><li><a href="global.html#stringifyPrivileges">stringifyPrivileges</a></li><li><a href="global.html#stringifyRole">stringifyRole</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#zoomButtonWasClicked">zoomButtonWasClicked</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Dec 31 2020 13:49:27 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
