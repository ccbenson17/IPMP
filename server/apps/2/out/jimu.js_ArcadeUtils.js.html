<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: jimu.js/ArcadeUtils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: jimu.js/ArcadeUtils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>///////////////////////////////////////////////////////////////////////////
// Copyright Â© Esri. All Rights Reserved.
//
// Licensed under the Apache License Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
///////////////////////////////////////////////////////////////////////////
define([
  'dojo/_base/array',
  'dojo/_base/lang',
  'dojo/Deferred',
  'dojo/promise/all',
  'dojo/string',
  'esri/arcade/arcade',
  'esri/arcade/Feature',
  'esri/tasks/RelationshipQuery',
  'jimu/utils',
  'jimu/LayerStructure'
],
function(
  array, lang, Deferred, all, string,
  Arcade, ArcadeFeature, RelationshipQuery, jimuUtils, LayerStructure) {
  var mo = {};
  /*------------------------------------------------------------------------------------------------------------------*/
  /********read arcade expr info*********/
  mo.readExprInfo = {};
  //public functions
  /** Get arcade profiles by type.
  * @param {string} type, arcade profile types, it could be three types:render, label, infoTemplate.
                          it's optional, if no type or wrong type, it retruns all the profiles.
  * @return {object} when type is one of the three strings above.
                     format: {render:[],label:[],infoTemplate:[]}
            {array}  when type is none or others, every item in array is a object.
                     item's format depends on the type of arcade profile's type.
                     eg: infoTemplate's format is {layer:'layerId',expressionInfos:[]}
                     //https://developers.arcgis.com/javascript/3/jshelp/arcade.html#popups
  */
  mo.readExprInfo.getArcadeProfilesByType = function(map, operlayer, /* optional */ type){
    var args = {
      map: map,
      layer: operlayer
    };
    if(type === 'render'){
      return mo.readExprInfo._getArcadeRender(args);
    }else if(type === 'label'){
      return mo.readExprInfo._getArcadeLabel(args);
    }else if(type === 'infoTemplate'){
      return mo.readExprInfo._getArcadeInfoTemplate(args);
    }else{
      return mo.readExprInfo._getAllArcade(args);
    }
  };

  //private functions
  mo.readExprInfo._getArcadeRender = function(args) {
    return mo.readExprInfo._lookupArcadeRender({layers: mo.readExprInfo._checkPassInLayer(args)});
  };

  mo.readExprInfo._getArcadeInfoTemplate = function(args) {
    return mo.readExprInfo._lookupArcadeInfoTemplate({layers: mo.readExprInfo._checkPassInLayer(args)});
  };

  mo.readExprInfo._getArcadeLabel = function(args) {
    return mo.readExprInfo._lookupArcadeLabel({layers: mo.readExprInfo._checkPassInLayer(args)});
  };

  mo.readExprInfo._getAllArcade = function(args) {
    var render = mo.readExprInfo._getArcadeRender(args);
    var infoTemplate = mo.readExprInfo._getArcadeInfoTemplate(args);
    var label = mo.readExprInfo._getArcadeLabel(args);
    // var arcadeObj = Object.assign(infoTemplate, render, label);
    // return arcadeObj;
    return {
      render: render,
      infoTemplate: infoTemplate,
      label: label
    };
  };

  mo.readExprInfo._checkPassInLayer = function(args) {
    var layerList = [];
    if(typeof(args) !== 'undefined') {
      if(typeof(args.layer) !== 'undefined') {
        if((args.layer !== null) &amp;&amp; (args.layer !== '')) {
          //layerList.push(args.layer);
          layerList = mo.readExprInfo._getAllMapLayers(args);
        } else {
          layerList = mo.readExprInfo._getAllMapLayers();
        }
      } else {
        layerList = mo.readExprInfo._getAllMapLayers();
      }
    } else {
      layerList = mo.readExprInfo._getAllMapLayers();
    }
    return layerList;
  };

  //This gets all the operational layers and gets the info and places it in a custom data object.
  mo.readExprInfo._getAllMapLayers = function(args) {
    var lookupId = "";
    var layerList = [];
    var layerStructure = LayerStructure.getInstance();
    // if(typeof(args) !== 'undefined') {
    if(args &amp;&amp; args.layer) {
      lookupId = args.layer.id;
    }
    if(lookupId !== "") {
      var foundLayer = layerStructure.getNodeById(lookupId);
      // if(foundLayer !== 'undefined') {
      if(foundLayer) {
        layerList.push(foundLayer._layerInfo.layerObject);
      }
    } else {
      //No layer ID passed in, just get all layers.
      layerStructure.traversal(function(layerNode) {
        //check to see if type exist and if it's not any tiles
        if(typeof(layerNode._layerInfo.layerObject.type) !== 'undefined') {
          if((layerNode._layerInfo.layerObject.type).indexOf("tile") === -1) {
            layerList.push(layerNode._layerInfo.layerObject);
          }
        } else {
          //It is a grouped Map service
          layerList.push(layerNode._layerInfo.layerObject);
        }
      });
    }
    return layerList;
  };

  mo.readExprInfo._lookupArcadeRender = function(args) {
    var lyrArcadeExpr = [];
    if(args.layers.length > 0) {
      array.forEach(args.layers, lang.hitch(this, function(layer) {
        var expObj = {};
        //Only add if there is a renderer object, maps services do not have this.
        if(typeof(layer.renderer) !== 'undefined') {
          var lyrObjRender = layer.renderer;
          if(typeof(lyrObjRender.valueExpression) !== 'undefined') {
            expObj.layer = layer.id;
            expObj.valueExpression = lyrObjRender.valueExpression;
            expObj.valueExpressionTitle = lyrObjRender.valueExpressionTitle;
            if(typeof(lyrObjRender.values) !== 'undefined') {
              expObj.values = lyrObjRender.values;
            }
            if(typeof(lyrObjRender.visualVariables) !== 'undefined') {
              expObj.visualVariables = lyrObjRender.visualVariables;
            }
          }
          if(Object.keys(expObj).length > 1 &amp;&amp; expObj.constructor === Object) {
            lyrArcadeExpr.push(expObj);
          }else{ //if layer has no arcade expressionInfos
            lyrArcadeExpr.push({
              layer: layer.id,
              valueExpression: null,
              valueExpressionTitle: null,
              values: null,
              visualVariables: null
            });
          }
        }
      }));
    }
    return lyrArcadeExpr;
  };

  mo.readExprInfo._lookupArcadeInfoTemplate = function(args) {
    var lyrArcadeExpr = [];
    if(args.layers.length > 0) {
      array.forEach(args.layers, lang.hitch(this, function(layer) {
        var expObj = {};
        //InfoTemplate handling for feature layers
        if(typeof(layer.infoTemplate) !== 'undefined') {
          if(typeof(layer.infoTemplate.info.expressionInfos) !== 'undefined') {
            if(layer.infoTemplate.info.expressionInfos.length > 0) {
              expObj.layer = layer.id;
              expObj.expressionInfos = layer.infoTemplate.info.expressionInfos;
            }
          }
        } else {
          //feature handling for map service
          if(typeof(layer.infoTemplates) !== 'undefined') {
            //check if it template is arcade and only store it if it is.
            //Arcade is stored in the group level, not sublayers
            for (var key in layer.infoTemplates) {
              if((layer.infoTemplates).hasOwnProperty(key)) {
                if(typeof(layer.infoTemplates[key].infoTemplate.info.expressionInfos) !== 'undefined') {
                  var arcadeNode = layer.infoTemplates[key].infoTemplate;
                  if(arcadeNode.info.expressionInfos.length > 0) {
                    expObj.layer = layer.id;
                    expObj.expressionInfos = arcadeNode.info.expressionInfos;
                  }
                }
              }
            }
          } else {
            //no infoTemplates defined
          }
        }
        if(Object.keys(expObj).length > 1 &amp;&amp; expObj.constructor === Object) {
          lyrArcadeExpr.push(expObj);
        }else{ //if layer has no arcade expressionInfos
          lyrArcadeExpr.push({
            layer: layer.id,
            expressionInfos: null
          });
        }

      }));
    }
    return lyrArcadeExpr;
  };

  mo.readExprInfo._lookupArcadeLabel = function(args) {
    var lyrArcadeExpr = [];
    if(args.layers.length > 0) {
      array.forEach(args.layers, lang.hitch(this, function(layer) {
        var expObj = {};
        var lyrObj = layer;
        if(typeof(lyrObj.labelingInfo) !== 'undefined') {
          array.forEach(lyrObj.labelingInfo, lang.hitch(this, function(labelInfo) {
            //check if 'name' exists, it is present when Arcade is used
            if(typeof(labelInfo.name) !== 'undefined') {
              expObj.layer = layer.id;
              expObj.name = labelInfo.name;
              expObj.labelingInfo = labelInfo;
              expObj.expression = labelInfo.labelExpressionInfo.expression;
            }
          }));
        }
        if(Object.keys(expObj).length > 1 &amp;&amp; expObj.constructor === Object) {
          lyrArcadeExpr.push(expObj);
        }else{ //if layer has no arcade expressionInfos
          lyrArcadeExpr.push({
            layer: layer.id,
            name: null,
            labelingInfo: null,
            expression: null
          });
        }
      }));
    }
    return lyrArcadeExpr;
  };


  /********************custom arcade expression***********************/
  mo.customExpr = {};
  /**
  * Get one graphic's all attributes by custom expressionInfos.
  * @param {array} expressionInfos, every item is an object, likes: {name,title,expression}
  * @param {object} graphic, it contains geometry, a symbol, attributes, or an infoTemplate
  * @return {object} attributes object, including orginal attributes and custom arcade attributes
  */
  mo.customExpr.getAttributesFromCustomArcadeExpr = function (expressionInfos, graphic, layerDefinition) {
    var parsedExprs = mo.InfoTemplate._parseArcadeExpressions(expressionInfos);
    var graphicAttrs = mo.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(graphic, parsedExprs,
      layerDefinition);
    return graphicAttrs;
  };

  /**
  * Get Graphics's attributes value list by custom expressionInfos.
  * @param {array} expressionInfos, every item is an object, likes: {name,title,expression}
  * @param {array} graphicList, graphic object array.
  * @return {array} every item in array is an object, it contains the attributes's values by custom expressionInfos.
  */
  mo.customExpr.getAttributesValueFromCustomArcadeExprBatch = function (expressionInfos, graphicList, layerDefinition) {
    var features = [];
    for(var key in graphicList){
      features.push(graphicList[key]);
    }
    var parsedExprs = mo.InfoTemplate._parseArcadeExpressions(expressionInfos);

    var customExprTemplates = mo.InfoTemplate._getExprNamesArrayFromPopupExprInfos(expressionInfos);
    customExprTemplates.relationships = null;
    customExprTemplates.parsedExpressions = parsedExprs;

    var def = new Deferred();
    var labelDef = mo.InfoTemplate._getPopupFieldsValueFromArcadeFeatures(features, customExprTemplates,
      layerDefinition);
    labelDef.then(function(customFieldsValueArray){
      def.resolve(customFieldsValueArray);
    });
    return def;
  };


  /********************Render***********************/


  /********************Label***********************/


  /********************InfoTemplate***********************/
  mo.InfoTemplate = {};
  /**
  * Get one graphic's all attributes.
  * @param {operlayer} layerInfo, it needs to have layerObject(already).
  * @param {object} graphic, it contains geometry, a symbol, attributes, or an infoTemplate
  * @return {object} attributes object, including orginal attributes and arcade attributes
                     format:{'OBJECTID':1, 'expression/expr1':"394-Waterous", 'relationships/0/CHAINS':123}
  */
  mo.InfoTemplate.getAttributesFromInfoTemplate = function (map, operlayer, graphic) {
    var layerDefinition = {fields: []};
    if(operlayer.layerObject &amp;&amp; operlayer.layerObject.fields){
      layerDefinition.fields = operlayer.layerObject.fields;
    }
    var arcadeTemplate = mo.readExprInfo.getArcadeProfilesByType(map, operlayer, 'infoTemplate');
    var expressionInfos = arcadeTemplate[0].expressionInfos;
    if(!expressionInfos){
      return graphic.attributes;
    }
    var parsedExprs = mo.InfoTemplate._parseArcadeExpressions(expressionInfos);
    var graphicAttrs = mo.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(graphic, parsedExprs,
      layerDefinition);
    return graphicAttrs;
  };

  /**
  * Get Graphics's attributes value list which configurate in InfoTemplate.
  * @param {operlayer} layerInfo, it needs to have layerObject(already).
  * @param {array} graphicList, graphic object array.
  * @return {array} every item in array is an object
                    it contains the attributes's values which configurate in InfoTemplate.
                    format:[["278-Waterous","Waterous---str"],["279-Clow Corporation","Clow Corporation---str"]]
  */
  mo.InfoTemplate.getAttributesValueFromInfoTemplateBatch = function (map, operlayer, graphicList) {
    var layerDefinition = {fields: []};
    if(operlayer.layerObject &amp;&amp; operlayer.layerObject.fields){
      layerDefinition.fields = operlayer.layerObject.fields;
    }
    var features = [];
    for(var key in graphicList){
      features.push(graphicList[key]);
    }
    var arcadeTemplate = mo.readExprInfo.getArcadeProfilesByType(map, operlayer, 'infoTemplate');
    var expressionInfos = arcadeTemplate[0].expressionInfos;
    var def = new Deferred();
    if(!expressionInfos){//layer has no arcade infotemplate
      def.resolve([]);
      return def;
    }
    var parsedExprs = mo.InfoTemplate._parseArcadeExpressions(expressionInfos);
    var popupExprTemplates = null;
    var popupDesc = operlayer.getPopupInfo().description;
    //from popupDesc
    if(popupDesc !== null){
      popupExprTemplates = mo.InfoTemplate._convertPopupDescToFieldNamesArray(popupDesc);
      popupExprTemplates.relationships = mo.InfoTemplate._getRelationshipQueries(operlayer);
    }else{ //from expressionInfos
      popupExprTemplates = mo.InfoTemplate._getExprNamesArrayFromPopupExprInfos(expressionInfos);
      popupExprTemplates.relationships = null; //doesn't support relationships in this case.
    }
    //add parsedExpr
    popupExprTemplates.parsedExpressions = parsedExprs;

    var labelDef = mo.InfoTemplate._getPopupFieldsValueFromArcadeFeatures(features, popupExprTemplates,
      layerDefinition);
    labelDef.then(function(popupFieldsValueArray){
      def.resolve(popupFieldsValueArray);
    });
    return def;
  };

  // Get relationshipQueries from a layer.
  mo.InfoTemplate._getRelationshipQueries = function (operLayer) {
    var hasRelationships = false, relationships = {}, relationshipFieldPattern = /\{relationships\/\d+\//gm,
      relationshipIdPattern = /\d+/, matches;

    matches = operLayer.getPopupInfo().description.match(relationshipFieldPattern);
    if (matches) {
      hasRelationships = true;
      array.forEach(matches, function (match) {
        var relatedQuery, id = match.match(relationshipIdPattern)[0];
        if (!relationships.hasOwnProperty(id)) {
          relatedQuery = new RelationshipQuery();
          relatedQuery.outFields = ['*'];
          relatedQuery.relationshipId = id;
          relatedQuery.returnGeometry = false;
          relationships[id] = {
            operLayer: operLayer,
            relatedQuery: relatedQuery
          };
        }
      });
    }
    return hasRelationships? relationships : null;
  };

  /**
   * Converts the arcade exprs obj of a custom popup into a multiline label specification;
   * @param {array} popupExprInfos, an arry of objects by customing popup arcade exprs in configuration.
                                    every object, likes: {name,title,expression}
   * @return {array} an array of exprs's name, format: ["${expression/expr1}"]
   */
  mo.InfoTemplate._getExprNamesArrayFromPopupExprInfos = function (popupExprInfos) {
    var exprNames = [];
    for(var key in popupExprInfos){
      var exprName = popupExprInfos[key].name;
      exprNames.push('${expression/' + exprName + '}');
    }
    return exprNames;
  };

  /**
   * Converts the text of a custom popup into an array of fields's name.
   * conversion splits text into lines on &lt;br>s,
   * removes HTML tags, and changes field tags from popup style to string.substitute form.
   * @param {string} popupDesc, popup's descriptions.
   * format: "&lt;font face='Arial' size='3'>{OBJECTID}&lt;br />{relationships/0/Creator}&lt;br />{expression/expr0}&lt;/font>"
   * @return {array} an array of fields' name
   * format: ["${OBJECTID}","${relationships/0/CreationDate}","${expression/expr0}"]
   */
  mo.InfoTemplate._convertPopupDescToFieldNamesArray = function (popupDesc) {
    // e.g., Occupant&lt;br/>{FULLADDR}&lt;br />{MUNICIPALITY}, IL {PSTLZIP5}
    // Sanitize the description after converting &lt;br>s and &lt;/p>s to line breaks
    var descEOLs1 = mo.InfoTemplate._convertEndParasToEOLs(popupDesc);
    var descEOLs2 = mo.InfoTemplate._convertBreaksToEOLs(descEOLs1);
    var desc = mo.InfoTemplate._sanitizeNoTags(descEOLs2).trim();

    // Change the open brace used for attribute names to "${" so that we can use dojo/string's substitute()
    desc = desc.replace(/\{/gi, '${');

    // Remove non-breaking spaces, which aren't rendered correctly in CSV output and aren't needed in PDF output
    desc = desc.replace(/\u00a0/gi, ' ');

    // Split on the line breaks
    desc = desc.split('\n');

    // Trim each line, since HTML pretty much does that
    desc = array.map(desc, function (line) {
      return line.trim();
    });

    return desc;
  };

  /**
   * Removes HTML tags from string.
   * @param {string} taggedText String to clean
   * @return {string} Cleaned string
   */
  mo.InfoTemplate._sanitizeNoTags = function (taggedText) {
    var cleanedText, tagBody, tagOrComment;

    cleanedText = jimuUtils.sanitizeHTML(taggedText);

    // Remove remaining tags
    // From Stack Overflow https://stackoverflow.com/a/430240/5090610
    // CC BY-SA 3.0 (https://creativecommons.org/licenses/by-sa/3.0/)
    // Mike Samuel (https://stackoverflow.com/users/20394/mike-samuel)
    tagBody = '(?:[^"\'>]|"[^"]*"|\'[^\']*\')*';
    tagOrComment = new RegExp(
        '&lt;(?:' +
        // Comment body.
        '!--(?:(?:-*[^->])*--+|-?)' +
        // Special "raw text" elements whose content should be elided.
        '|script\\b' + tagBody + '>[\\s\\S]*?&lt;/script\\s*' +
        '|style\\b' + tagBody + '>[\\s\\S]*?&lt;/style\\s*' +
        // Regular name
        '|/?[a-z]' +
        tagBody +
        ')>',
        'gi');
    function removeTags(html) {
      var oldHtml;
      do {
        oldHtml = html;
        html = html.replace(tagOrComment, '');
      } while (html !== oldHtml);
      return html.replace(/&lt;/g, '&amp;lt;');
    }

    cleanedText = removeTags(cleanedText);
    return cleanedText;
  };

  /**
   * Creates fields's value from popup configuration by arcade features.
   * @param {array} features, Arcade features whose attributes are to be
   *        used to populate labels
   * @param {array} popupExprTemplates as created by _convertPopupDescToFieldNamesArray
     format: [
      "${OBJECTID}","${relationships/0/CreationDate}","${expression/expr0}",
      relationships: as created by _getRelationshipQueries,
      parsedExpressions: as created by _parseArcadeExpressions
      ]
    * @return {Deferred} Array of labels; each label is an array of label line strings
    */
  mo.InfoTemplate._getPopupFieldsValueFromArcadeFeatures = function (features, popupExprTemplates, layerDefinition) {
    var deferred = new Deferred(), content = [], promises = [], relatedRecordsFound = 0;

    if (popupExprTemplates.relationships) {
      // For each feature,
      array.forEach(features, function (feature) {

        // For each relationship in the label,
        mo.InfoTemplate._objEach(popupExprTemplates.relationships, function (relationship, relationshipId) {
          var promise = new Deferred(), relatedQuery = relationship.relatedQuery, objectId;
          promises.push(promise);

          // Query the relationship for this feature
          objectId = feature.attributes[relationship.operLayer.layerObject.objectIdField];
          relatedQuery.objectIds = [objectId];
          relationship.operLayer.layerObject.queryRelatedFeatures(relatedQuery, function (relatedRecords) {
            var labels = [], relatedFeatures;

            if (relatedRecords[objectId] &amp;&amp; relatedRecords[objectId].features) {
              relatedFeatures = relatedRecords[objectId].features;

              array.forEach(relatedFeatures, function (relatedFeature) {
                var labelLines = [], attributes, prefix, newKey;

                // Merge the base and related feature attributes and create the label
                // Prefix related feature's attributes with "relationships/&lt;id>/" to match popup
                attributes = feature.attributes;
                prefix = 'relationships/' + relationshipId + '/';
                mo.InfoTemplate._objEach(relatedFeature.attributes, function (value, key) {
                  newKey = prefix + key;
                  attributes[newKey] = value;
                });

                // Substitute attribute values and resolved Arcade expressions into label lines
                array.forEach(popupExprTemplates, function (labelLineRule) {
                  labelLines.push(string.substitute(labelLineRule,
                    mo.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(
                      feature, popupExprTemplates.parsedExpressions, layerDefinition),
                    mo.InfoTemplate._useEmptyStringForNull));
                });
                labels.push(labelLines);
              });
            }

            promise.resolve(labels);
          });
        });
      });

      all(promises).then(function (results) {
        // Look at the related records for each found address
        array.forEach(results, function (labels) {
          // For each found address, save its labels
          array.forEach(labels, function (labelLines) {
            ++relatedRecordsFound;
            content.push(labelLines);
          });
        });
        console.log(relatedRecordsFound + ' related address features found');
        deferred.resolve(content);
      });

    }else {
      array.forEach(features, function (feature) {
        var labelLines = [];
        // Substitute attribute values and resolved Arcade expressions into label lines
        array.forEach(popupExprTemplates, function (labelLineRule) {
          labelLines.push(string.substitute(labelLineRule,
            mo.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(
              feature, popupExprTemplates.parsedExpressions, layerDefinition),
            mo.InfoTemplate._useEmptyStringForNull));
        });
        content.push(labelLines);
      });
      deferred.resolve(content);
    }

    return deferred;
  };

  /**
   * Parses Arcade expression infos.
   * @param {array} expressionInfos Expression info list from popupInfo
   * @return {object} List of parsed expressions keyed by the expression name
   */
  mo.InfoTemplate._parseArcadeExpressions = function (expressionInfos) {
    var parsedExpressions;
    if (Array.isArray(expressionInfos) &amp;&amp; expressionInfos.length > 0) {
      parsedExpressions = {};
      array.forEach(expressionInfos, function (info) {
        parsedExpressions[info.name] = Arcade.parseScript(info.expression);
      });
    }
    return parsedExpressions;
  };

  /**
   * Initializes the Arcade context with an ArcadeFeature.
   * @param {object} feature Feature to convert into an ArcadeFeature and to add to the context's vars object
   * @return {object} Arcade context object
   */
  mo.InfoTemplate._initArcadeContext = function (feature, layerDefinition) {
    var context = {
      vars: {}
    };
    context.vars.$feature = ArcadeFeature.createFromGraphicLikeObject(feature.geometry, feature.attributes,
      layerDefinition);
    return context;
  };

  /**
   * Creates a list of feature attributes and resolved Arcade expressions for the feature.
   * @param {object} feature Feature whose attributes are to be used
   * @param {object} parsedExpressions Parsed Arcade expressions keyed by the expression name; each expression
   *        is resolved and added to the output object keyed by 'expression/' + the expression's name
   * @return {object} Combination of feature attributes and resolved expressions
   */
  mo.InfoTemplate._combineFeatureAttributesAndExpressionResolutions = function (feature, parsedExpressions,
    layerDefinition) {
    var attributesAndExpressionResolutions, arcadeContext, name, resolvedExpression;

    // Resolve Arcade expressions for this feature; convert to string in case its return type is not already string
    attributesAndExpressionResolutions = lang.mixin({}, feature.attributes);
    if (parsedExpressions) {
      arcadeContext = mo.InfoTemplate._initArcadeContext(feature, layerDefinition);

      for (name in parsedExpressions) {
        resolvedExpression = Arcade.executeScript(parsedExpressions[name], arcadeContext);
        attributesAndExpressionResolutions['expression/' + name] =
          resolvedExpression ? resolvedExpression.toString() : '';
      }
    }

    return attributesAndExpressionResolutions;
  };

  /**
   * Converts &lt;/p>s into CRLFs.
   * @param {string} html Text to scan
   * @return {string} Converted text
   */
  mo.InfoTemplate._convertEndParasToEOLs = function (html) {
    var html2 = html, matches = html.match(/&lt;\/p>/gi);
    array.forEach(matches, function (match) {
      html2 = html2.replace(match, '\n');
    });
    return html2;
  };

  /**
   * Converts &lt;br>s into CRLFs.
   * @param {string} html Text to scan
   * @return {string} Converted text
   */
  mo.InfoTemplate._convertBreaksToEOLs = function (html) {
    var html2 = html, matches = html.match(/&lt;br\s*\/?>/gi);
    array.forEach(matches, function (match) {
      html2 = html2.replace(match, '\n');
    });
    return html2;
  };

  /**
   * Insures that a string is not undefined or null.
   * @param {string} str String to check
   * @return {string} str, or '' if str is undefined, null, or empty
   */
  mo.InfoTemplate._useEmptyStringForNull = function (str) {
    return str ? str : '';
  };

  /**
   * Interates over the items in an associative array (forIn).
   * @param {object} obj Object to interate over
   * @param {function} fcn Function to call for each item
   * @param {object} scope Scope to apply to function call
   */
  mo.InfoTemplate._objEach = function (obj, fcn, scope){
    var key;
    for (key in obj){
      if(obj.hasOwnProperty(key)){
        fcn.call(scope, obj[key], key);
      }
    }
  };
  return mo;

});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="echarts_coord_scale_Ordinal%250D%250Dhttp___en.wikipedia.org_wiki_Level_of_measurementmodule_.html">echarts/coord/scale/Ordinalhttp://en.wikipedia.org/wiki/Level_of_measurement</a></li><li><a href="echarts-module_ECharts.html">ECharts</a></li><li><a href="echarts-module_MessageCenter.html">MessageCenter</a></li><li><a href="module-AttributeTable.html">AttributeTable</a></li><li><a href="module-BasemapGallery.html">BasemapGallery</a></li><li><a href="module-Draw.html">Draw</a></li><li><a href="module-echarts_animation_Animator.html">echarts/animation/Animator</a></li><li><a href="module-echarts_chart_helper_Line.html">echarts/chart/helper/Line</a></li><li><a href="module-echarts_chart_helper_LineDraw.html">echarts/chart/helper/LineDraw</a></li><li><a href="module-echarts_chart_helper_Symbol.html">echarts/chart/helper/Symbol</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_geo_parseGeoJson.html">echarts/coord/geo/parseGeoJson</a></li><li><a href="module-echarts_coord_geo_Region.html">echarts/coord/geo/Region</a></li><li><a href="module-echarts_core_BoundingRect.html">echarts/core/BoundingRect</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-echarts_scale_Interval.html">echarts/scale/Interval</a></li><li><a href="module-echarts_scale_Log.html">echarts/scale/Log</a></li><li><a href="module-echarts_scale_Scale.html">echarts/scale/Scale</a></li><li><a href="module-echarts_stream_Scheduler.html">echarts/stream/Scheduler</a></li><li><a href="module-Geoprocessing.html">Geoprocessing</a></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Infographic.html">Infographic</a></li><li><a href="module-LayerList.html">LayerList</a></li><li><a href="module-MapProgress.html">MapProgress</a></li><li><a href="module-PickColumns.html">PickColumns</a></li><li><a href="module-Search.html">Search</a></li><li><a href="module-Select.html">Select</a></li><li><a href="module-Splash.html">Splash</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_BaseIconItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/BaseIconItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_DockableItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/DockableItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_GroupItems.html">themes/LaunchpadTheme/widgets/AnchorBarController/GroupItems</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_Widget.html">themes/LaunchpadTheme/widgets/AnchorBarController/Widget</a></li><li><a href="module-Treatment.html">Treatment</a></li><li><a href="module-widgets_Coordinate.html">widgets/Coordinate</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_easing.html">zrender/animation/easing</a></li><li><a href="module-zrender_core_bbox.html">zrender/core/bbox</a></li><li><a href="module-zrender_core_curve.html">zrender/core/curve</a></li><li><a href="module-zrender_core_event.html">zrender/core/event</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_core_util.html">zrender/core/util</a></li><li><a href="module-zrender_graphic_Displayable.html">zrender/graphic/Displayable</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_shape_Arc.html">zrender/graphic/shape/Arc</a></li><li><a href="module-zrender_graphic_shape_Line.html">zrender/graphic/shape/Line</a></li><li><a href="module-zrender_graphic_shape_Polyline.html">zrender/graphic/shape/Polyline</a></li><li><a href="module-zrender_graphic_shape_Rect.html">zrender/graphic/shape/Rect</a></li><li><a href="module-zrender_graphic_shape_Ring.html">zrender/graphic/shape/Ring</a></li><li><a href="module-zrender_graphic_shape_Sector.html">zrender/graphic/shape/Sector</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_RectText.html">zrender/mixin/RectText</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_shape_BezierCurve.html">zrender/shape/BezierCurve</a></li><li><a href="module-zrender_shape_Circle.html">zrender/shape/Circle</a></li><li><a href="module-zrender_shape_Polygon.html">zrender/shape/Polygon</a></li><li><a href="module-zrender_shape_util_smoothBezier.html">zrender/shape/util/smoothBezier</a></li><li><a href="module-zrender_shape_util_smoothSpline.html">zrender/shape/util/smoothSpline</a></li><li><a href="module-zrender_tool_matrix.html">zrender/tool/matrix</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="module-%257Becharts_model_Global%257D.html">{echarts/model/Global}</a></li><li><a href="module-%257Becharts_model_OptionManager%257D.html">{echarts/model/OptionManager}</a></li></ul><h3>Namespaces</h3><ul><li><a href="crc.html">crc</a></li><li><a href="LocalMediaStream%2520--%2520https___developer.mozilla.org_en-US_docs_WebRTC_MediaStream_API_LocalMediaStream.html">LocalMediaStream</a></li><li><a href="xhr.sendAsBinary%2520%2520https___developer.mozilla.org_ru_XMLHttpRequest_Sending_binary_content.html">Sending_binary_content</a></li></ul><h3>Classes</h3><ul><li><a href="FileAPI.Camera.html">Camera</a></li><li><a href="FileAPI.Camera.Shot.html">Shot</a></li><li><a href="modue_zrender_mixin_Animatable.html">modue:zrender/mixin/Animatable</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_component_marker_LineDraw.html">echarts/component/marker/LineDraw</a></li><li><a href="module-echarts_component_tooltip_TooltipContent.html">echarts/component/tooltip/TooltipContent</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_Cartesian-module_echarts_coord_cartesian_Axis2D.html">echarts/coord/cartesian/Axis2D</a></li><li><a href="module-echarts_coord_scale_Interval.html">echarts/coord/scale/Interval</a></li><li><a href="module-echarts_coord_scale_Time.html">echarts/coord/scale/Time</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_Animator.html">zrender/animation/Animator</a></li><li><a href="module-zrender_core_LRU.html">zrender/core/LRU</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_Element.html">zrender/Element</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_Path.html">zrender/graphic/Path</a></li><li><a href="module-zrender_Handler.html">zrender/Handler</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_Painter.html">zrender/Painter</a></li><li><a href="module-zrender_Storage.html">zrender/Storage</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="zrender_graphic_Image.html">zrender/graphic/Image</a></li><li><a href="zrender_graphic_Text.html">zrender/graphic/Text</a></li><li>{<a href="module-echarts_chart_helper_Line.html">module:echarts/chart/helper/Line</a>}</li><li>{<a href="module-echarts_chart_helper_Symbol.html">module:echarts/chart/helper/Symbol</a>}</li></ul><h3>Events</h3><ul><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendScroll">legendScroll</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendSelect">legendSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendToggleSelect">legendToggleSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendUnSelect">legendUnSelect</a></li></ul><h3>Mixins</h3><ul><li><a href="module-echarts_chart_helper_LineDraw-%257Bmodule_zrender_mixin_Eventful%257D.html">{zrender/mixin/Eventful}</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_addExternalStyleSheets">_addExternalStyleSheets</a></li><li><a href="global.html#_addSectionTitle">_addSectionTitle</a></li><li><a href="global.html#_createLayout">_createLayout</a></li><li><a href="global.html#_createPrintMapParameters">_createPrintMapParameters</a></li><li><a href="global.html#_createPrintTask">_createPrintTask</a></li><li><a href="global.html#_createReportNote">_createReportNote</a></li><li><a href="global.html#_displayLayers">_displayLayers</a></li><li><a href="global.html#_executePrintTask">_executePrintTask</a></li><li><a href="global.html#_filters">_filters</a></li><li><a href="global.html#_findContentItemById">_findContentItemById</a></li><li><a href="global.html#_formatAndRenderTables">_formatAndRenderTables</a></li><li><a href="global.html#_getFixedThemeStyles">_getFixedThemeStyles</a></li><li><a href="global.html#_handleDataSourceForWidgets">_handleDataSourceForWidgets</a></li><li><a href="global.html#_onAppProxyForMapChanged">_onAppProxyForMapChanged</a></li><li><a href="global.html#_onAppProxyForUrlChanged">_onAppProxyForUrlChanged</a></li><li><a href="global.html#_onFieldVisibleChange">_onFieldVisibleChange</a></li><li><a href="global.html#_renderHTMLData">_renderHTMLData</a></li><li><a href="global.html#_renderTable">_renderTable</a></li><li><a href="global.html#_resetCoordinate">_resetCoordinate</a></li><li><a href="global.html#_setButtonLabels">_setButtonLabels</a></li><li><a href="global.html#_setCoordControlsTabindex">_setCoordControlsTabindex</a></li><li><a href="global.html#_setFootNotes">_setFootNotes</a></li><li><a href="global.html#_setPageSize">_setPageSize</a></li><li><a href="global.html#_setReportData">_setReportData</a></li><li><a href="global.html#_setReportLogo">_setReportLogo</a></li><li><a href="global.html#_setReportSizeMessage">_setReportSizeMessage</a></li><li><a href="global.html#_setReportTitle">_setReportTitle</a></li><li><a href="global.html#_updatePartForBetween">_updatePartForBetween</a></li><li><a href="global.html#_validateParameters">_validateParameters</a></li><li><a href="global.html#acceptValue">acceptValue</a></li><li><a href="global.html#action">action</a></li><li><a href="global.html#applyWidgetFilter">applyWidgetFilter</a></li><li><a href="global.html#calculateLayerIndex">calculateLayerIndex</a></li><li><a href="global.html#canAssignUsersToOrgGroups">canAssignUsersToOrgGroups</a></li><li><a href="global.html#canChangeUserRoles">canChangeUserRoles</a></li><li><a href="global.html#canCreateGroup">canCreateGroup</a></li><li><a href="global.html#canCreateItem">canCreateItem</a></li><li><a href="global.html#canDeleteOrgGroups">canDeleteOrgGroups</a></li><li><a href="global.html#canDeleteOrgItems">canDeleteOrgItems</a></li><li><a href="global.html#canDeleteUsers">canDeleteUsers</a></li><li><a href="global.html#canDesignateOpenDataGroups">canDesignateOpenDataGroups</a></li><li><a href="global.html#canDisableUsers">canDisableUsers</a></li><li><a href="global.html#canEditFeatures">canEditFeatures</a></li><li><a href="global.html#canEditFeaturesFullControl">canEditFeaturesFullControl</a></li><li><a href="global.html#canInviteUsers">canInviteUsers</a></li><li><a href="global.html#canJoinNonOrgGroup">canJoinNonOrgGroup</a></li><li><a href="global.html#canJoinOrgGroup">canJoinOrgGroup</a></li><li><a href="global.html#canManageEnterpriseGroups">canManageEnterpriseGroups</a></li><li><a href="global.html#canManageLicenses">canManageLicenses</a></li><li><a href="global.html#canManageMarketplace">canManageMarketplace</a></li><li><a href="global.html#canManageOpenData">canManageOpenData</a></li><li><a href="global.html#canPublishFeatures">canPublishFeatures</a></li><li><a href="global.html#canPublishScenes">canPublishScenes</a></li><li><a href="global.html#canPublishTiles">canPublishTiles</a></li><li><a href="global.html#canPurchaseMarketplace">canPurchaseMarketplace</a></li><li><a href="global.html#canReassignOrgGroups">canReassignOrgGroups</a></li><li><a href="global.html#canReassignOrgItems">canReassignOrgItems</a></li><li><a href="global.html#canShareGroupToOrg">canShareGroupToOrg</a></li><li><a href="global.html#canShareGroupToPublic">canShareGroupToPublic</a></li><li><a href="global.html#canShareItemToGroup">canShareItemToGroup</a></li><li><a href="global.html#canShareItemToOrg">canShareItemToOrg</a></li><li><a href="global.html#canShareItemToPublic">canShareItemToPublic</a></li><li><a href="global.html#canTrialMarketplace">canTrialMarketplace</a></li><li><a href="global.html#canUpdateOrgGroups">canUpdateOrgGroups</a></li><li><a href="global.html#canUpdateOrgItems">canUpdateOrgItems</a></li><li><a href="global.html#canUpdateUsers">canUpdateUsers</a></li><li><a href="global.html#canUseDemographics">canUseDemographics</a></li><li><a href="global.html#canUseElevation">canUseElevation</a></li><li><a href="global.html#canUseGeocode">canUseGeocode</a></li><li><a href="global.html#canUseGeoenrichment">canUseGeoenrichment</a></li><li><a href="global.html#canUseNetworkAnalysis">canUseNetworkAnalysis</a></li><li><a href="global.html#canUseSpatialAnalysis">canUseSpatialAnalysis</a></li><li><a href="global.html#canViewOrgGroups">canViewOrgGroups</a></li><li><a href="global.html#canViewOrgItems">canViewOrgItems</a></li><li><a href="global.html#canViewUsers">canViewUsers</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#coordTextInputKeyWasPressed">coordTextInputKeyWasPressed</a></li><li><a href="global.html#cpBtnWasClicked">cpBtnWasClicked</a></li><li><a href="global.html#cpSubBtnWasClicked">cpSubBtnWasClicked</a></li><li><a href="global.html#createPages">createPages</a></li><li><a href="global.html#deactivateDrawTool">deactivateDrawTool</a></li><li><a href="global.html#destroyOnScreenWidgetsAndGroups">destroyOnScreenWidgetsAndGroups</a></li><li><a href="global.html#drawPointButtonWasClicked">drawPointButtonWasClicked</a></li><li><a href="global.html#expandButtonWasClicked">expandButtonWasClicked</a></li><li><a href="global.html#formatButtonWasClicked">formatButtonWasClicked</a></li><li><a href="global.html#formatDialogApplyButtonClicked">formatDialogApplyButtonClicked</a></li><li><a href="global.html#geomSrvcDidComplete">geomSrvcDidComplete</a></li><li><a href="global.html#geomSrvcDidFail">geomSrvcDidFail</a></li><li><a href="global.html#getCandidateParamNames">getCandidateParamNames</a></li><li><a href="global.html#getCleanInput">getCleanInput</a></li><li><a href="global.html#getCoordValues">getCoordValues</a></li><li><a href="global.html#getCurrentMapCoordinate">getCurrentMapCoordinate</a></li><li><a href="global.html#getDDPoint">getDDPoint</a></li><li><a href="global.html#getExportString">getExportString</a></li><li><a href="global.html#getFormattedCoordinates">getFormattedCoordinates</a></li><li><a href="global.html#getFormattedCoordinateText">getFormattedCoordinateText</a></li><li><a href="global.html#getFormattedDDMStr">getFormattedDDMStr</a></li><li><a href="global.html#getFormattedDDStr">getFormattedDDStr</a></li><li><a href="global.html#getFormattedDMSStr">getFormattedDMSStr</a></li><li><a href="global.html#getFormattedGARSStr">getFormattedGARSStr</a></li><li><a href="global.html#getFormattedGEOREFStr">getFormattedGEOREFStr</a></li><li><a href="global.html#getFormattedMGRSStr">getFormattedMGRSStr</a></li><li><a href="global.html#getFormattedUSNGStr">getFormattedUSNGStr</a></li><li><a href="global.html#getFormattedUTMHStr">getFormattedUTMHStr</a></li><li><a href="global.html#getFormattedUTMStr">getFormattedUTMStr</a></li><li><a href="global.html#getIcon">getIcon</a></li><li><a href="global.html#getMapCoordinateDD">getMapCoordinateDD</a></li><li><a href="global.html#getOrderableInput">getOrderableInput</a></li><li><a href="global.html#getOrderableOutput">getOrderableOutput</a></li><li><a href="global.html#getProjectedPoint">getProjectedPoint</a></li><li><a href="global.html#getStatisticsResult">getStatisticsResult</a></li><li><a href="global.html#getSupportExportFormats">getSupportExportFormats</a></li><li><a href="global.html#getWidgetFilter">getWidgetFilter</a></li><li><a href="global.html#getXYNotation">getXYNotation</a></li><li><a href="global.html#iconClass">iconClass</a></li><li><a href="global.html#iconFormat">iconFormat</a></li><li><a href="global.html#initUI">initUI</a></li><li><a href="global.html#inputError">inputError</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#isBasedOnAdmin">isBasedOnAdmin</a></li><li><a href="global.html#isBasedOnPublisher">isBasedOnPublisher</a></li><li><a href="global.html#isBasedOnUser">isBasedOnUser</a></li><li><a href="global.html#isCustom">isCustom</a></li><li><a href="global.html#isFeatureSupported">isFeatureSupported</a></li><li><a href="global.html#isPublisher">isPublisher</a></li><li><a href="global.html#isUser">isUser</a></li><li><a href="global.html#label">label</a></li><li><a href="global.html#loadAndLayout">loadAndLayout</a></li><li><a href="global.html#mapWasClicked">mapWasClicked</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#nodes">nodes</a></li><li><a href="global.html#onClose">onClose</a></li><li><a href="global.html#onExecute">onExecute</a></li><li><a href="global.html#onMinimize">onMinimize</a></li><li><a href="global.html#onNormalize">onNormalize</a></li><li><a href="global.html#parentWidget">parentWidget</a></li><li><a href="global.html#popupDidClose">popupDidClose</a></li><li><a href="global.html#postCreate">postCreate</a></li><li><a href="global.html#postMixInProperties">postMixInProperties</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#processCoordTextInput">processCoordTextInput</a></li><li><a href="global.html#profile">profile</a></li><li><a href="global.html#QRCode">QRCode</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#setActions">setActions</a></li><li><a href="global.html#setCoordUI">setCoordUI</a></li><li><a href="global.html#setHidden">setHidden</a></li><li><a href="global.html#setMapLayout">setMapLayout</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setPrivileges">setPrivileges</a></li><li><a href="global.html#setReportLayout">setReportLayout</a></li><li><a href="global.html#setSubCoordUI">setSubCoordUI</a></li><li><a href="global.html#setUIListeners">setUIListeners</a></li><li><a href="global.html#setVisible">setVisible</a></li><li><a href="global.html#showToolTip">showToolTip</a></li><li><a href="global.html#statInfo">statInfo</a></li><li><a href="global.html#stringify">stringify</a></li><li><a href="global.html#stringifyPretty">stringifyPretty</a></li><li><a href="global.html#stringifyPrivileges">stringifyPrivileges</a></li><li><a href="global.html#stringifyRole">stringifyRole</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#zoomButtonWasClicked">zoomButtonWasClicked</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Dec 31 2020 13:49:27 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
