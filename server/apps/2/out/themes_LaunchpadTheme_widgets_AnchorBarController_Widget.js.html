<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: themes/LaunchpadTheme/widgets/AnchorBarController/Widget.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: themes/LaunchpadTheme/widgets/AnchorBarController/Widget.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>///////////////////////////////////////////////////////////////////////////
// Copyright Â© Esri. All Rights Reserved.
//
// Licensed under the Apache License Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
///////////////////////////////////////////////////////////////////////////

define(['dojo/_base/declare',
  'dojo/_base/lang',
  'dojo/_base/array',
  'dojo/_base/html',
  'dojo/dom-geometry',
  'dojo/dom-style',
  'dojo/dom-class',
  'dojo/dom-construct',
  'dojo/fx',
  'dojo/on',
  'dojo/keys',
  'dijit/Tooltip',
  'jimu/utils',
  'dojo/query',
  'dojo/aspect',
  'jimu/BaseWidget',
  'jimu/PoolControllerMixin',
  './DockableItem',
  './GroupItems',
  './PopupMoreNodes'
], function (declare, lang, array, html, domGeometry, domStyle, domClass, domConstruct, coreFx, on, keys,
  Tooltip, utils, query, aspect, BaseWidget, PoolControllerMixin, DockableItem, GroupItems, PopupMoreNodes) {
  /* global jimuConfig*/
  var MIN_MARGIN = 8,
    ICON_SIZE = 40,
    ICON_IMG_SIZE = 20,
    BUTTON_SIZE = 60,
    NORMAL_MODE = 1,
    MOBILE_MODE = 2;
  /**
   * @exports themes/LaunchpadTheme/widgets/AnchorBarController/Widget
   */
  var clazz = declare([BaseWidget, PoolControllerMixin], {
    baseClass: 'jimu-anchorbar-controller',

    visibleIcons: 0,
    iconList: [],
    enableNext: false,
    enablePrevious: false,
    currentMode: NORMAL_MODE,
    iconMargin: MIN_MARGIN,
    groupList: [],
    openedIds: [],
    currentStyle: 'default',

    constructor: function () {
      this.previousNls = window.jimuNls.common.previous;
      this.nextNls = window.jimuNls.common.next;
    },

    postCreate: function () {
      this.inherited(arguments);

      this.iconList = [];
      this.groupList = [];
      this.openedIds = [];
      this.currentStyle = this.appConfig.theme.styles[0];
      this.allConfigs = this.getAllConfigs();

      array.forEach(this.allConfigs, function (configItem, index) {
        this._createItem(configItem, index);
      }, this);

      html.setAttr(this.previousButton, 'tabindex', this.tabIndex);
      html.setAttr(this.nextButton, 'tabindex', this.tabIndex);
    },

    _createItem: function (configItem, index) {
      var item, itemGroup, containerNode;
      item = new DockableItem({
        config: configItem,
        backgroundIndex: index,
        itemTabIndex: this.tabIndex
      });
      item.placeAt(this.iconGroupNode);
      this.iconList.push(item);

      if (item.isGroup()) {
        //create widget group icon
        itemGroup = new GroupItems({
          config: configItem,
          dockableItem: item
        });

        if (window.appInfo.isRunInMobile) {
          containerNode = jimuConfig.layoutId;
        } else {
          containerNode = jimuConfig.mapId;
        }
        itemGroup.placeAt(containerNode);
        domStyle.set(itemGroup.domNode, 'display', 'none');

        this.own(on(itemGroup, 'groupItemClicked', lang.hitch(this, function (data) {
          this._onDockableNodeClick(data.target);
        })));

        this.own(on(itemGroup, 'groupCloseBtnClicked', lang.hitch(this, function () {
          item.iconItemNode.focus();
        })));

        this.own(on(item, 'nodeClick', lang.hitch(this, function (data) {
          this._onGroupNodeClick(data.target, itemGroup);
        })));

        this.groupList.push(itemGroup);
      } else {
        this.own(on(item, 'nodeClick', lang.hitch(this, function (data) {
          this._onDockableNodeClick(data.target);
        })));
      }
      //add tooltips
      utils.addTooltipByDomNode(Tooltip, item.iconItemNode, configItem.label);

      return item;
    },

    startup: function () {
      this.inherited(arguments);
      this.resize();

      // handle open at start widget, only one is allowed to open at start
      array.some(this.iconList, function (iconItem, index) {
        if (iconItem.isOpenAtStart()) {
          if (!window.appInfo.isRunInMobile) {
            this._makeIconVisible(index);
          }
          iconItem._onNodeClick();
          return true;
        }
      }, this);
    },

    destroy: function () {
      this.inherited(arguments);

      array.forEach(this.groupList, function (widgetGroup) {
        widgetGroup.destroy();
      });
    },

    onAction: function (action, data) {
      /*jshint unused: false*/
      if (action === 'highLight' &amp;&amp; data) {
        var node = query('div[settingid="' + data.widgetId + '"]', this.domNode)[0];
        this._highLight(node);
      }
      if (action === 'removeHighLight') {
        this._removeHighLight();
      }
    },

    onOpen: function () {
      if (this.iconList.length === 0 &amp;&amp; this.appConfig.mode !== 'config') {
        this.widgetManager.closeWidget(this);
      }
    },

    onAppConfigChanged: function (appConfig) {
      this.currentStyle = appConfig.theme.styles[0];
      this.allConfigs = this.getAllConfigs();
    },

    /**
     * @override
     * @param {[type]} ids [description]
     */
    setOpenedIds: function (ids) {
      var item;
      if (ids.length === 0) {
        return;
      }
      array.forEach(ids, function (id) {
        item = this._getIconItemById(id);
        if (item !== null) {
          item._onNodeClick();
        }
      }, this);
    },

    getOpenedIds: function () {
      this.inherited(arguments);

      return array.filter(this.openedIds, function (item) {
        return typeof item !== 'undefined';
      });
    },

    _highLight: function (node) {
      if (this.hlDiv) {
        this._removeHighLight();
      }
      if (!node || domStyle.get(node, 'display') === 'none') {
        return;
      }
      var marginLeft = domStyle.get(node, 'margin-left');
      var position = domGeometry.getMarginBox(node);
      var hlStyle = {
        position: 'absolute',
        left: (position.l + marginLeft) + 'px',
        top: (position.t) + 'px',
        width: ICON_SIZE + 'px',
        height: ICON_SIZE + 'px'
      };
      if (this.currentStyle !== 'style2') {
        hlStyle['margin-top'] = (-ICON_SIZE / 2) + 'px';
      }
      this.hlDiv = domConstruct.create('div', {
        "style": hlStyle,
        "class": 'icon-highlight'
      }, node, 'before');
    },

    _removeHighLight: function () {
      if (this.hlDiv) {
        domConstruct.destroy(this.hlDiv);
        this.hlDiv = null;
      }
    },

    clearIconGroupNode: function () {
      while (this.iconGroupNode.firstChild) {
        this.iconGroupNode.removeChild(this.iconGroupNode.firstChild);
      }
    },

    resize: function () {
      if (window.appInfo.isRunInMobile) {
        if (this.currentMode === NORMAL_MODE) {
          //mode changed
          this.currentMode = MOBILE_MODE;
          domClass.add(this.domNode, 'mobile');
          this.clearIconGroupNode();
          this.lastVisibleIcons = 0;
        }

        if (this.popupMore) {
          this.popupMore.hide();
        }

        this.switchToMobileStyle();
      } else {
        if (this.currentMode === MOBILE_MODE) {
          //mode changed
          this.currentMode = NORMAL_MODE;
          domClass.remove(this.domNode, 'mobile');
          this.clearIconGroupNode();
          this.lastVisibleIcons = 0;

          //set width of iconGroupNode large enough to hold all the icons
          domStyle.set(this.iconGroupNode, 'width',
            this.allConfigs.length * 2 * ICON_SIZE + 'px');

          array.forEach(this.iconList, function (iconItem) { // recreate icon list once
            iconItem.placeAt(this.iconGroupNode);
          }, this);
        }

        this.switchToNormalStyle();
      }
      this._resizeOpenedPanel();
    },

    switchToMobileStyle: function () {
      var mapBox, containerSize, iconGroupWidth;

      mapBox = domGeometry.getContentBox(jimuConfig.mapId);
      containerSize = mapBox.w;

      iconGroupWidth = Math.max(containerSize, this.allConfigs.length * 2 * ICON_SIZE);
      //set width of iconGroupNode large enough to hold all the icons
      domStyle.set(this.iconGroupNode, 'width', iconGroupWidth + 'px');

      //calculate widgets
      this.visibleIcons = Math.floor(containerSize / (ICON_SIZE + MIN_MARGIN));
      if (this.visibleIcons >= this.iconList.length) {
        this.visibleIcons = this.iconList.length;
      }

      if (this.visibleIcons !== this.lastVisibleIcons) {
        this.lastVisibleIcons = this.visibleIcons;
        this.clearIconGroupNode();
        this._reArrangeIconItems(containerSize);
      } else {
        this._adjustIconMargin(containerSize);
      }
    },

    _reArrangeIconItems: function (currentWidth) {
      var showMore, normalIconNumber, moreIconItem, moreItemArray = [],
        args;

      showMore = this.visibleIcons &lt; this.iconList.length;
      normalIconNumber = showMore ? (this.visibleIcons - 1) : this.visibleIcons;
      this.iconMargin = Math.floor((currentWidth - (this.visibleIcons * ICON_SIZE)) /
        (this.visibleIcons + 1));

      array.forEach(this.iconList, function (item, index) {
        //clear styles set in PopupMoreNodes.js
        args = {
          display: '',
          position: '',
          left: '',
          top: ''
        };
        //reset the size of iconItem and image
        domStyle.set(item.iconItemNode, {
          width: ICON_SIZE + 'px',
          height: ICON_SIZE + 'px'
        });
        domStyle.set(item.imgNode, {
          width: ICON_IMG_SIZE + 'px',
          height: ICON_IMG_SIZE + 'px'
        });
        if (index &lt; normalIconNumber) {
          if (window.isRTL) {
            args['margin-right'] = this.iconMargin + 'px';
          } else {
            args['margin-left'] = this.iconMargin + 'px';
          }
          domStyle.set(item.domNode, args);
          item.placeAt(this.iconGroupNode);
        } else {
          domStyle.set(item.domNode, args);
          moreItemArray.push(item);
        }
      }, this);

      if (showMore) {
        moreIconItem = this._createIconItemForMore();
        args = {};
        if (window.isRTL) {
          args['margin-right'] = this.iconMargin + 'px';
        } else {
          args['margin-left'] = this.iconMargin + 'px';
        }
        domStyle.set(moreIconItem.domNode, args);
        moreIconItem.placeAt(this.iconGroupNode);

        this.own(on(moreIconItem, 'nodeClick', lang.hitch(this, function (data) {
          this._onShowMoreNodeClick(data.target, moreItemArray);
        })));
      }
    },

    _createIconItemForMore: function () {
      var moreIconItem = new DockableItem({
        config: {
          id: 'show_more_widget_icons',
          label: this.nls.more,
          icon: this.folderUrl + 'images/more_icon.png'
        },
        backgroundIndex: this.visibleIcons
      });

      return moreIconItem;
    },

    _adjustIconMargin: function (currentWidth) {
      var args = {};
      this.iconMargin = Math.floor((currentWidth - (this.visibleIcons * ICON_SIZE)) /
        (this.visibleIcons + 1));

      if (window.isRTL) {
        args['margin-right'] = this.iconMargin + 'px';
      } else {
        args['margin-left'] = this.iconMargin + 'px';
      }

      query('div.jimu-anchorbar-iconitem', this.iconGroupNode).forEach(function (node) {
        domStyle.set(node, args);
      }, this);
    },

    switchToNormalStyle: function () {
      var mapBox, widgetWidth, left, containerSize,
        firstVisible = 0,
        lastVisible;

      mapBox = domGeometry.getContentBox(jimuConfig.mapId);
      widgetWidth = Math.floor(mapBox.w / 2);

      if (widgetWidth > this.allConfigs.length * (ICON_SIZE + MIN_MARGIN) + BUTTON_SIZE) {
        widgetWidth = this.allConfigs.length * (ICON_SIZE + MIN_MARGIN) + BUTTON_SIZE;
      }
      left = Math.floor((mapBox.w - widgetWidth) / 2);

      domStyle.set(this.domNode, {
        width: widgetWidth + 'px',
        left: left + 'px'
      });

      //calculate widgets
      containerSize = widgetWidth - BUTTON_SIZE;
      this.visibleIcons = Math.floor(containerSize / (ICON_SIZE + MIN_MARGIN));
      if (this.visibleIcons > this.iconList.length) {
        this.visibleIcons = this.iconList.length;
      }

      //calculate the visible range
      array.some(this.iconList, function (item, index) {
        if (item.visible) {
          firstVisible = index;
          return true;
        }
      });

      lastVisible = firstVisible + this.visibleIcons - 1;
      if (lastVisible >= this.iconList.length) {
        lastVisible = this.iconList.length - 1;
        firstVisible = lastVisible - this.visibleIcons + 1;
      }

      this.iconMargin = Math.floor((containerSize - (this.visibleIcons * ICON_SIZE)) /
        (this.visibleIcons + 1));

      this._adjustIconStyle(firstVisible, lastVisible);
    },

    _previous: function () {
      var idxFirst = -1,
        idxLast = -1,
        animArray = [];
      if (this.enablePrevious) {
        //find the first visible iconItem
        array.some(this.iconList, function (iconItem, index) {
          if (iconItem.visible) {
            idxFirst = index - 1; //get the previous item index
            return true;
          }
        }, this);

        if (idxFirst >= 0) {
          idxLast = idxFirst + this.visibleIcons;
          animArray = animArray.concat(this.iconList[idxLast].hideAnim(this.iconMargin),
            this.iconList[idxFirst].showAnim(this.iconMargin));
          coreFx.combine(animArray).play();

          this.enableNext = true;
          domClass.add(this.nextButton, 'enabled');
          html.setAttr(this.nextButton, 'aria-disabled', 'false');

          if (idxFirst === 0) {
            this.enablePrevious = false;
            domClass.remove(this.previousButton, 'enabled');
            html.setAttr(this.previousButton, 'aria-disabled', 'true');
          }
        }
      }
    },

    _previousKeyDown: function (evt) {
      if (this.enablePrevious &amp;&amp; (evt.keyCode === keys.ENTER || evt.keyCode === keys.SPACE)) {
        this._previous();
      }
    },

    _next: function () {
      var idxFirst = -1,
        idxLast = -1,
        animArray = [];
      if (this.enableNext) {
        //find the first visible iconItem
        array.some(this.iconList, function (iconItem, index) {
          if (iconItem.visible) {
            idxFirst = index;
            return true;
          }
        }, this);

        if (idxFirst >= 0) {
          idxLast = idxFirst + this.visibleIcons;
          animArray = animArray.concat(this.iconList[idxFirst].hideAnim(this.iconMargin),
            this.iconList[idxLast].showAnim(this.iconMargin));
          coreFx.combine(animArray).play();

          this.enablePrevious = true;
          domClass.add(this.previousButton, 'enabled');
          html.setAttr(this.previousButton, 'aria-disabled', 'false');

          if (idxLast === this.iconList.length - 1) {
            this.enableNext = false;
            domClass.remove(this.nextButton, 'enabled');
            html.setAttr(this.nextButton, 'aria-disabled', 'true');
          }
        }
      }
    },

    _nextKeyDown: function (evt) {
      if (this.enableNext &amp;&amp; (evt.keyCode === keys.ENTER || evt.keyCode === keys.SPACE)) {
        this._next();
      }
    },

    _getGroupPanelPosition: function (dockableItem, widgetBox) {
      var position = {},
        iconBox = domGeometry.position(dockableItem.iconItemNode),
        mapBox = domGeometry.getContentBox(jimuConfig.mapId);

      position.top = iconBox.y - widgetBox.h - MIN_MARGIN;

      if (window.isRTL) {
        if (iconBox.x &lt; widgetBox.w + MIN_MARGIN) {
          position.left = MIN_MARGIN;
        } else {
          position.left = iconBox.x - widgetBox.w + iconBox.w;
        }
      } else {
        if (iconBox.x + widgetBox.w + MIN_MARGIN > mapBox.w) {
          position.left = mapBox.w - widgetBox.w - MIN_MARGIN;
        } else {
          position.left = iconBox.x;
        }
      }
      return position;
    },

    //off panel widget position
    _getOffPanelPosition: function (dockableItem, widgetBox) {
      var position = {},
        iconBox = domGeometry.position(dockableItem.iconItemNode),
        mapBox = domGeometry.getContentBox(jimuConfig.mapId);

      position.bottom = mapBox.h - (iconBox.y + MIN_MARGIN) + ICON_SIZE / 2;

      if (window.isRTL) {
        if (iconBox.x &lt; widgetBox.w + MIN_MARGIN) {
          position.right = mapBox.w - widgetBox.w - MIN_MARGIN;
        } else {
          position.right = iconBox.x - widgetBox.w;
        }
      } else {
        if (iconBox.x + widgetBox.w + MIN_MARGIN > mapBox.w) {
          position.left = mapBox.w - widgetBox.w - MIN_MARGIN;
        } else {
          position.left = iconBox.x;
        }
      }
      if (dockableItem.config.position) {
        position.relativeTo = dockableItem.config.position.relativeTo;
      }
      return position;
    },

    _createPopupMoreNodes: function () {
      if (!this.popupMore) {
        this._createCoverNode();

        this.popupMore = new PopupMoreNodes();
        this.popupMore.placeAt(jimuConfig.mapId);

        aspect.after(this.popupMore, 'show', lang.hitch(this, function () {
          domStyle.set(this.moreIconPaneCoverNode, 'display', '');
        }), true);

        aspect.after(this.popupMore, 'hide', lang.hitch(this, function () {
          domStyle.set(this.moreIconPaneCoverNode, 'display', 'none');
        }), true);
      }
    },

    _onShowMoreNodeClick: function (dockableItem, moreItemsArray) {
      this._createPopupMoreNodes();

      if (dockableItem.isOpen) {
        this.popupMore.setForIcon(dockableItem);
        this.popupMore.setNodes(moreItemsArray);
        this.popupMore.show();
      } else {
        this.popupMore.hide();
      }
    },

    _getIconItemById: function (id) {
      var ret = null;

      array.some(this.iconList, function (item) {
        if (item.config.id === id) {
          ret = item;
          return true;
        }
      });

      if (ret === null) {
        array.some(this.groupList, function (groupItem) {
          return array.some(groupItem.getItemList(), function (item) {
            if (item.config.id === id) {
              ret = item;
              return true;
            }
          });
        });
      }

      return ret;
    },

    _addToOpenedIds: function (id) {
      if (this.openedIds.indexOf(id) === -1) {
        this.openedIds.push(id);
      }
    },

    _removeFromOpenedIds: function (id) {
      var idx = this.openedIds.indexOf(id);
      if (idx !== -1) {
        this.openedIds[idx] = undefined;
      }
    },

    _onGroupNodeClick: function (dockableItem, groupItem) {
      var position;

      if (dockableItem.isOpen) {
        position = this._getGroupPanelPosition(dockableItem, groupItem.box);
        groupItem.setPosition(position);
        groupItem.open();
        this._addToOpenedIds(dockableItem.config.id);
      } else {
        groupItem.close();
        this._removeFromOpenedIds(dockableItem.config.id);
      }
    },

    _onDockableNodeClick: function (dockableItem) {
      var panelId, panelConfig;
      if (dockableItem.config.inPanel === false) {
        if (dockableItem.isOpen) {
          this.widgetManager.loadWidget(dockableItem.config).then(
            lang.hitch(this, function (widget) {
              this._addToOpenedIds(dockableItem.config.id);

              var position = this._getOffPanelPosition(dockableItem,
                this.widgetManager.getWidgetMarginBox(widget));
              position.zIndex = 100;
              widget.setPosition(position, this.containerNode);
              this.widgetManager.openWidget(widget);

              this.own(aspect.after(widget, 'onClose', lang.hitch(this, function () {
                dockableItem.setOpened(false);
                this._removeFromOpenedIds(dockableItem.config.id);
                dockableItem.iconItemNode.focus();
              })));
            }));
        } else {
          this.widgetManager.closeWidget(dockableItem.config.id);
          this._removeFromOpenedIds(dockableItem.config.id);
        }
      } else {
        panelId = dockableItem.config.id + '_panel';
        if (dockableItem.isOpen) {
          dockableItem.setPanelIndex(this._calPanelIndex());
          panelConfig = dockableItem.getConfigForPanel();

          this.panelManager.showPanel(panelConfig).then(lang.hitch(this, function (panel) {
            panel.setPosition(panelConfig.panel.position);
            aspect.after(panel, 'onClose', lang.hitch(this, function () {
              dockableItem.setOpened(false);
              this._removeFromOpenedIds(dockableItem.config.id);
              dockableItem.iconItemNode.focus();
            }));
          }));

          if (this.popupMore) {
            this.popupMore.hide();
          }
          this._addToOpenedIds(dockableItem.config.id);
        } else {
          this.panelManager.closePanel(panelId);
          this._removeFromOpenedIds(dockableItem.config.id);
        }
      }
    },

    _calPanelIndex: function () {
      var openedList = [],
        i, len;

      //collect panel index of opened widget.
      array.forEach(this.iconList, function (item) {
        if (!item.isGroup() &amp;&amp; item.config.inPanel !== false &amp;&amp; item.isOpen) {
          openedList.push(item.getPanelIndex());
        }
      });
      array.forEach(this.groupList, function (groupItem) {
        array.forEach(groupItem.getItemList(), function (item) {
          if (item.config.inPanel !== false &amp;&amp; item.isOpen) {
            openedList.push(item.getPanelIndex());
          }
        });
      });

      if (openedList.length === 0) {
        return 0;
      }

      //sort asc
      openedList.sort(function (a, b) {
        return a - b;
      });

      //Find the smallest panel index that is not used.
      if (openedList[0] > 0) {
        return 0;
      }

      for (i = 0, len = openedList.length - 1; i &lt; len; i++) {
        if (openedList[i + 1] - openedList[i] > 1) {
          return openedList[i] + 1;
        }
      }

      return openedList[len] + 1;
    },

    _createCoverNode: function () {
      this.moreIconPaneCoverNode = domConstruct.create('div', {
        'class': 'jimu-more-icon-cover'
      }, jimuConfig.layoutId);
    },

    _resizeOpenedPanel: function () {
      var panel;
      //collect panel index of opened widget.
      array.forEach(this.iconList, function (item) {
        if (!item.isGroup() &amp;&amp; item.config.inPanel !== false &amp;&amp; item.isOpen) {
          panel = this.panelManager.getPanelById(item.config.id + '_panel');
          if (panel &amp;&amp; item.config.gid != "widgetOnScreen") {
            panel.onWindowResize();
          }
        }
      }, this);
      array.forEach(this.groupList, function (groupItem) {
        array.forEach(groupItem.getItemList(), function (item) {
          if (item.config.inPanel !== false &amp;&amp; item.isOpen) {
            panel = this.panelManager.getPanelById(item.config.id + '_panel');
            if (panel) {
              panel.onWindowResize();
            }
          }
        }, this);
      }, this);
    },

    /**
     * Used by open at start widget. Make the widget icon at the center of the anchor bar.
     * @param  {number} index [description]
     */
    _makeIconVisible: function (index) {
      var firstVisible, lastVisible;
      if (this.visibleIcons === this.iconList.length) {
        return;
      }

      firstVisible = index - Math.floor(this.visibleIcons / 2);
      firstVisible = firstVisible >= 0 ? firstVisible : 0;
      lastVisible = firstVisible + this.visibleIcons - 1;
      if (lastVisible >= this.iconList.length) {
        lastVisible = this.iconList.length - 1;
        firstVisible = lastVisible - this.visibleIcons + 1;
      }

      this._adjustIconStyle(firstVisible, lastVisible);
    },

    _adjustIconStyle: function (firstVisible, lastVisible) {
      var args;
      array.forEach(this.iconList, function (iconItem, index) {
        iconItem.visible = index >= firstVisible &amp;&amp; index &lt;= lastVisible;
        args = {
          position: '',
          left: '',
          top: '',
          display: iconItem.visible ? '' : 'none'
        };
        if (window.isRTL) {
          args['margin-right'] = this.iconMargin + 'px';
        } else {
          args['margin-left'] = this.iconMargin + 'px';
        }
        domStyle.set(iconItem.domNode, args);
        domStyle.set(iconItem.iconItemNode, {
          width: ICON_SIZE + 'px',
          height: ICON_SIZE + 'px'
        });
        domStyle.set(iconItem.imgNode, {
          width: ICON_IMG_SIZE + 'px',
          height: ICON_IMG_SIZE + 'px'
        });
      }, this);

      if (lastVisible &lt; this.allConfigs.length - 1) {
        domClass.add(this.nextButton, 'enabled');
        this.enableNext = true;
      } else {
        domClass.remove(this.nextButton, 'enabled');
        this.enableNext = false;
      }

      if (firstVisible > 0) {
        this.enablePrevious = true;
        domClass.add(this.previousButton, 'enabled');
      } else {
        this.enablePrevious = false;
        domClass.remove(this.previousButton, 'enabled');
      }
    }
  });
  return clazz;
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="echarts_coord_scale_Ordinal%250D%250Dhttp___en.wikipedia.org_wiki_Level_of_measurementmodule_.html">echarts/coord/scale/Ordinalhttp://en.wikipedia.org/wiki/Level_of_measurement</a></li><li><a href="echarts-module_ECharts.html">ECharts</a></li><li><a href="echarts-module_MessageCenter.html">MessageCenter</a></li><li><a href="module-AttributeTable.html">AttributeTable</a></li><li><a href="module-BasemapGallery.html">BasemapGallery</a></li><li><a href="module-Draw.html">Draw</a></li><li><a href="module-echarts_animation_Animator.html">echarts/animation/Animator</a></li><li><a href="module-echarts_chart_helper_Line.html">echarts/chart/helper/Line</a></li><li><a href="module-echarts_chart_helper_LineDraw.html">echarts/chart/helper/LineDraw</a></li><li><a href="module-echarts_chart_helper_Symbol.html">echarts/chart/helper/Symbol</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_geo_parseGeoJson.html">echarts/coord/geo/parseGeoJson</a></li><li><a href="module-echarts_coord_geo_Region.html">echarts/coord/geo/Region</a></li><li><a href="module-echarts_core_BoundingRect.html">echarts/core/BoundingRect</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-echarts_scale_Interval.html">echarts/scale/Interval</a></li><li><a href="module-echarts_scale_Log.html">echarts/scale/Log</a></li><li><a href="module-echarts_scale_Scale.html">echarts/scale/Scale</a></li><li><a href="module-echarts_stream_Scheduler.html">echarts/stream/Scheduler</a></li><li><a href="module-Geoprocessing.html">Geoprocessing</a></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Infographic.html">Infographic</a></li><li><a href="module-LayerList.html">LayerList</a></li><li><a href="module-MapProgress.html">MapProgress</a></li><li><a href="module-PickColumns.html">PickColumns</a></li><li><a href="module-Search.html">Search</a></li><li><a href="module-Select.html">Select</a></li><li><a href="module-Splash.html">Splash</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_BaseIconItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/BaseIconItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_DockableItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/DockableItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_GroupItems.html">themes/LaunchpadTheme/widgets/AnchorBarController/GroupItems</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_Widget.html">themes/LaunchpadTheme/widgets/AnchorBarController/Widget</a></li><li><a href="module-Treatment.html">Treatment</a></li><li><a href="module-widgets_Coordinate.html">widgets/Coordinate</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_easing.html">zrender/animation/easing</a></li><li><a href="module-zrender_core_bbox.html">zrender/core/bbox</a></li><li><a href="module-zrender_core_curve.html">zrender/core/curve</a></li><li><a href="module-zrender_core_event.html">zrender/core/event</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_core_util.html">zrender/core/util</a></li><li><a href="module-zrender_graphic_Displayable.html">zrender/graphic/Displayable</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_shape_Arc.html">zrender/graphic/shape/Arc</a></li><li><a href="module-zrender_graphic_shape_Line.html">zrender/graphic/shape/Line</a></li><li><a href="module-zrender_graphic_shape_Polyline.html">zrender/graphic/shape/Polyline</a></li><li><a href="module-zrender_graphic_shape_Rect.html">zrender/graphic/shape/Rect</a></li><li><a href="module-zrender_graphic_shape_Ring.html">zrender/graphic/shape/Ring</a></li><li><a href="module-zrender_graphic_shape_Sector.html">zrender/graphic/shape/Sector</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_RectText.html">zrender/mixin/RectText</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_shape_BezierCurve.html">zrender/shape/BezierCurve</a></li><li><a href="module-zrender_shape_Circle.html">zrender/shape/Circle</a></li><li><a href="module-zrender_shape_Polygon.html">zrender/shape/Polygon</a></li><li><a href="module-zrender_shape_util_smoothBezier.html">zrender/shape/util/smoothBezier</a></li><li><a href="module-zrender_shape_util_smoothSpline.html">zrender/shape/util/smoothSpline</a></li><li><a href="module-zrender_tool_matrix.html">zrender/tool/matrix</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="module-%257Becharts_model_Global%257D.html">{echarts/model/Global}</a></li><li><a href="module-%257Becharts_model_OptionManager%257D.html">{echarts/model/OptionManager}</a></li></ul><h3>Namespaces</h3><ul><li><a href="crc.html">crc</a></li><li><a href="LocalMediaStream%2520--%2520https___developer.mozilla.org_en-US_docs_WebRTC_MediaStream_API_LocalMediaStream.html">LocalMediaStream</a></li><li><a href="xhr.sendAsBinary%2520%2520https___developer.mozilla.org_ru_XMLHttpRequest_Sending_binary_content.html">Sending_binary_content</a></li></ul><h3>Classes</h3><ul><li><a href="FileAPI.Camera.html">Camera</a></li><li><a href="FileAPI.Camera.Shot.html">Shot</a></li><li><a href="modue_zrender_mixin_Animatable.html">modue:zrender/mixin/Animatable</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_component_marker_LineDraw.html">echarts/component/marker/LineDraw</a></li><li><a href="module-echarts_component_tooltip_TooltipContent.html">echarts/component/tooltip/TooltipContent</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_Cartesian-module_echarts_coord_cartesian_Axis2D.html">echarts/coord/cartesian/Axis2D</a></li><li><a href="module-echarts_coord_scale_Interval.html">echarts/coord/scale/Interval</a></li><li><a href="module-echarts_coord_scale_Time.html">echarts/coord/scale/Time</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_Animator.html">zrender/animation/Animator</a></li><li><a href="module-zrender_core_LRU.html">zrender/core/LRU</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_Element.html">zrender/Element</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_Path.html">zrender/graphic/Path</a></li><li><a href="module-zrender_Handler.html">zrender/Handler</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_Painter.html">zrender/Painter</a></li><li><a href="module-zrender_Storage.html">zrender/Storage</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="zrender_graphic_Image.html">zrender/graphic/Image</a></li><li><a href="zrender_graphic_Text.html">zrender/graphic/Text</a></li><li>{<a href="module-echarts_chart_helper_Line.html">module:echarts/chart/helper/Line</a>}</li><li>{<a href="module-echarts_chart_helper_Symbol.html">module:echarts/chart/helper/Symbol</a>}</li></ul><h3>Events</h3><ul><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendScroll">legendScroll</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendSelect">legendSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendToggleSelect">legendToggleSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendUnSelect">legendUnSelect</a></li></ul><h3>Mixins</h3><ul><li><a href="module-echarts_chart_helper_LineDraw-%257Bmodule_zrender_mixin_Eventful%257D.html">{zrender/mixin/Eventful}</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_addExternalStyleSheets">_addExternalStyleSheets</a></li><li><a href="global.html#_addSectionTitle">_addSectionTitle</a></li><li><a href="global.html#_createLayout">_createLayout</a></li><li><a href="global.html#_createPrintMapParameters">_createPrintMapParameters</a></li><li><a href="global.html#_createPrintTask">_createPrintTask</a></li><li><a href="global.html#_createReportNote">_createReportNote</a></li><li><a href="global.html#_displayLayers">_displayLayers</a></li><li><a href="global.html#_executePrintTask">_executePrintTask</a></li><li><a href="global.html#_filters">_filters</a></li><li><a href="global.html#_findContentItemById">_findContentItemById</a></li><li><a href="global.html#_formatAndRenderTables">_formatAndRenderTables</a></li><li><a href="global.html#_getFixedThemeStyles">_getFixedThemeStyles</a></li><li><a href="global.html#_handleDataSourceForWidgets">_handleDataSourceForWidgets</a></li><li><a href="global.html#_onAppProxyForMapChanged">_onAppProxyForMapChanged</a></li><li><a href="global.html#_onAppProxyForUrlChanged">_onAppProxyForUrlChanged</a></li><li><a href="global.html#_onFieldVisibleChange">_onFieldVisibleChange</a></li><li><a href="global.html#_renderHTMLData">_renderHTMLData</a></li><li><a href="global.html#_renderTable">_renderTable</a></li><li><a href="global.html#_resetCoordinate">_resetCoordinate</a></li><li><a href="global.html#_setButtonLabels">_setButtonLabels</a></li><li><a href="global.html#_setCoordControlsTabindex">_setCoordControlsTabindex</a></li><li><a href="global.html#_setFootNotes">_setFootNotes</a></li><li><a href="global.html#_setPageSize">_setPageSize</a></li><li><a href="global.html#_setReportData">_setReportData</a></li><li><a href="global.html#_setReportLogo">_setReportLogo</a></li><li><a href="global.html#_setReportSizeMessage">_setReportSizeMessage</a></li><li><a href="global.html#_setReportTitle">_setReportTitle</a></li><li><a href="global.html#_updatePartForBetween">_updatePartForBetween</a></li><li><a href="global.html#_validateParameters">_validateParameters</a></li><li><a href="global.html#acceptValue">acceptValue</a></li><li><a href="global.html#action">action</a></li><li><a href="global.html#applyWidgetFilter">applyWidgetFilter</a></li><li><a href="global.html#calculateLayerIndex">calculateLayerIndex</a></li><li><a href="global.html#canAssignUsersToOrgGroups">canAssignUsersToOrgGroups</a></li><li><a href="global.html#canChangeUserRoles">canChangeUserRoles</a></li><li><a href="global.html#canCreateGroup">canCreateGroup</a></li><li><a href="global.html#canCreateItem">canCreateItem</a></li><li><a href="global.html#canDeleteOrgGroups">canDeleteOrgGroups</a></li><li><a href="global.html#canDeleteOrgItems">canDeleteOrgItems</a></li><li><a href="global.html#canDeleteUsers">canDeleteUsers</a></li><li><a href="global.html#canDesignateOpenDataGroups">canDesignateOpenDataGroups</a></li><li><a href="global.html#canDisableUsers">canDisableUsers</a></li><li><a href="global.html#canEditFeatures">canEditFeatures</a></li><li><a href="global.html#canEditFeaturesFullControl">canEditFeaturesFullControl</a></li><li><a href="global.html#canInviteUsers">canInviteUsers</a></li><li><a href="global.html#canJoinNonOrgGroup">canJoinNonOrgGroup</a></li><li><a href="global.html#canJoinOrgGroup">canJoinOrgGroup</a></li><li><a href="global.html#canManageEnterpriseGroups">canManageEnterpriseGroups</a></li><li><a href="global.html#canManageLicenses">canManageLicenses</a></li><li><a href="global.html#canManageMarketplace">canManageMarketplace</a></li><li><a href="global.html#canManageOpenData">canManageOpenData</a></li><li><a href="global.html#canPublishFeatures">canPublishFeatures</a></li><li><a href="global.html#canPublishScenes">canPublishScenes</a></li><li><a href="global.html#canPublishTiles">canPublishTiles</a></li><li><a href="global.html#canPurchaseMarketplace">canPurchaseMarketplace</a></li><li><a href="global.html#canReassignOrgGroups">canReassignOrgGroups</a></li><li><a href="global.html#canReassignOrgItems">canReassignOrgItems</a></li><li><a href="global.html#canShareGroupToOrg">canShareGroupToOrg</a></li><li><a href="global.html#canShareGroupToPublic">canShareGroupToPublic</a></li><li><a href="global.html#canShareItemToGroup">canShareItemToGroup</a></li><li><a href="global.html#canShareItemToOrg">canShareItemToOrg</a></li><li><a href="global.html#canShareItemToPublic">canShareItemToPublic</a></li><li><a href="global.html#canTrialMarketplace">canTrialMarketplace</a></li><li><a href="global.html#canUpdateOrgGroups">canUpdateOrgGroups</a></li><li><a href="global.html#canUpdateOrgItems">canUpdateOrgItems</a></li><li><a href="global.html#canUpdateUsers">canUpdateUsers</a></li><li><a href="global.html#canUseDemographics">canUseDemographics</a></li><li><a href="global.html#canUseElevation">canUseElevation</a></li><li><a href="global.html#canUseGeocode">canUseGeocode</a></li><li><a href="global.html#canUseGeoenrichment">canUseGeoenrichment</a></li><li><a href="global.html#canUseNetworkAnalysis">canUseNetworkAnalysis</a></li><li><a href="global.html#canUseSpatialAnalysis">canUseSpatialAnalysis</a></li><li><a href="global.html#canViewOrgGroups">canViewOrgGroups</a></li><li><a href="global.html#canViewOrgItems">canViewOrgItems</a></li><li><a href="global.html#canViewUsers">canViewUsers</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#coordTextInputKeyWasPressed">coordTextInputKeyWasPressed</a></li><li><a href="global.html#cpBtnWasClicked">cpBtnWasClicked</a></li><li><a href="global.html#cpSubBtnWasClicked">cpSubBtnWasClicked</a></li><li><a href="global.html#createPages">createPages</a></li><li><a href="global.html#deactivateDrawTool">deactivateDrawTool</a></li><li><a href="global.html#destroyOnScreenWidgetsAndGroups">destroyOnScreenWidgetsAndGroups</a></li><li><a href="global.html#drawPointButtonWasClicked">drawPointButtonWasClicked</a></li><li><a href="global.html#expandButtonWasClicked">expandButtonWasClicked</a></li><li><a href="global.html#formatButtonWasClicked">formatButtonWasClicked</a></li><li><a href="global.html#formatDialogApplyButtonClicked">formatDialogApplyButtonClicked</a></li><li><a href="global.html#geomSrvcDidComplete">geomSrvcDidComplete</a></li><li><a href="global.html#geomSrvcDidFail">geomSrvcDidFail</a></li><li><a href="global.html#getCandidateParamNames">getCandidateParamNames</a></li><li><a href="global.html#getCleanInput">getCleanInput</a></li><li><a href="global.html#getCoordValues">getCoordValues</a></li><li><a href="global.html#getCurrentMapCoordinate">getCurrentMapCoordinate</a></li><li><a href="global.html#getDDPoint">getDDPoint</a></li><li><a href="global.html#getExportString">getExportString</a></li><li><a href="global.html#getFormattedCoordinates">getFormattedCoordinates</a></li><li><a href="global.html#getFormattedCoordinateText">getFormattedCoordinateText</a></li><li><a href="global.html#getFormattedDDMStr">getFormattedDDMStr</a></li><li><a href="global.html#getFormattedDDStr">getFormattedDDStr</a></li><li><a href="global.html#getFormattedDMSStr">getFormattedDMSStr</a></li><li><a href="global.html#getFormattedGARSStr">getFormattedGARSStr</a></li><li><a href="global.html#getFormattedGEOREFStr">getFormattedGEOREFStr</a></li><li><a href="global.html#getFormattedMGRSStr">getFormattedMGRSStr</a></li><li><a href="global.html#getFormattedUSNGStr">getFormattedUSNGStr</a></li><li><a href="global.html#getFormattedUTMHStr">getFormattedUTMHStr</a></li><li><a href="global.html#getFormattedUTMStr">getFormattedUTMStr</a></li><li><a href="global.html#getIcon">getIcon</a></li><li><a href="global.html#getMapCoordinateDD">getMapCoordinateDD</a></li><li><a href="global.html#getOrderableInput">getOrderableInput</a></li><li><a href="global.html#getOrderableOutput">getOrderableOutput</a></li><li><a href="global.html#getProjectedPoint">getProjectedPoint</a></li><li><a href="global.html#getStatisticsResult">getStatisticsResult</a></li><li><a href="global.html#getSupportExportFormats">getSupportExportFormats</a></li><li><a href="global.html#getWidgetFilter">getWidgetFilter</a></li><li><a href="global.html#getXYNotation">getXYNotation</a></li><li><a href="global.html#iconClass">iconClass</a></li><li><a href="global.html#iconFormat">iconFormat</a></li><li><a href="global.html#initUI">initUI</a></li><li><a href="global.html#inputError">inputError</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#isBasedOnAdmin">isBasedOnAdmin</a></li><li><a href="global.html#isBasedOnPublisher">isBasedOnPublisher</a></li><li><a href="global.html#isBasedOnUser">isBasedOnUser</a></li><li><a href="global.html#isCustom">isCustom</a></li><li><a href="global.html#isFeatureSupported">isFeatureSupported</a></li><li><a href="global.html#isPublisher">isPublisher</a></li><li><a href="global.html#isUser">isUser</a></li><li><a href="global.html#label">label</a></li><li><a href="global.html#loadAndLayout">loadAndLayout</a></li><li><a href="global.html#mapWasClicked">mapWasClicked</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#nodes">nodes</a></li><li><a href="global.html#onClose">onClose</a></li><li><a href="global.html#onExecute">onExecute</a></li><li><a href="global.html#onMinimize">onMinimize</a></li><li><a href="global.html#onNormalize">onNormalize</a></li><li><a href="global.html#parentWidget">parentWidget</a></li><li><a href="global.html#popupDidClose">popupDidClose</a></li><li><a href="global.html#postCreate">postCreate</a></li><li><a href="global.html#postMixInProperties">postMixInProperties</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#processCoordTextInput">processCoordTextInput</a></li><li><a href="global.html#profile">profile</a></li><li><a href="global.html#QRCode">QRCode</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#setActions">setActions</a></li><li><a href="global.html#setCoordUI">setCoordUI</a></li><li><a href="global.html#setHidden">setHidden</a></li><li><a href="global.html#setMapLayout">setMapLayout</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setPrivileges">setPrivileges</a></li><li><a href="global.html#setReportLayout">setReportLayout</a></li><li><a href="global.html#setSubCoordUI">setSubCoordUI</a></li><li><a href="global.html#setUIListeners">setUIListeners</a></li><li><a href="global.html#setVisible">setVisible</a></li><li><a href="global.html#showToolTip">showToolTip</a></li><li><a href="global.html#statInfo">statInfo</a></li><li><a href="global.html#stringify">stringify</a></li><li><a href="global.html#stringifyPretty">stringifyPretty</a></li><li><a href="global.html#stringifyPrivileges">stringifyPrivileges</a></li><li><a href="global.html#stringifyRole">stringifyRole</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#zoomButtonWasClicked">zoomButtonWasClicked</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Dec 31 2020 13:49:27 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
