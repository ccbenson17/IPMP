<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: widgets/Search/Widget.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: widgets/Search/Widget.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>///////////////////////////////////////////////////////////////////////////
// Copyright Â© Esri. All Rights Reserved.
//
// Licensed under the Apache License Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
///////////////////////////////////////////////////////////////////////////

/**
 * @fileoverview
 * Search main web map for location or area (adds search bar to project) ({@link module:Search|More info})
 */
define([
	'dojo/_base/declare',
	'dojo/_base/lang',
	'dojo/_base/array',
	'dojo/_base/html',
	'dojo/when',
	'dojo/on',
	'dojo/aspect',
	'dojo/query',
	'dojo/keys',
	'dojo/Deferred',
	'dojo/promise/all',
	'dijit/focus',
	'jimu/BaseWidget',
	'jimu/LayerInfos/LayerInfos',
	'jimu/utils',
	'jimu/SpatialReference/wkidUtils',
	'esri/config',
	'esri/dijit/Search',
	'esri/tasks/locator',
	'esri/layers/FeatureLayer',
	'esri/dijit/PopupTemplate',
	'esri/lang',
	'esri/geometry/Point',
	'esri/geometry/coordinateFormatter',
	'esri/SpatialReference',
	'esri/tasks/query',
	'esri/Color',
	'esri/symbols/SimpleMarkerSymbol',
	'esri/symbols/SimpleFillSymbol',
	'esri/symbols/SimpleLineSymbol',
	'./utils',
	'dojo/NodeList-dom',
], function (
	declare,
	lang,
	array,
	html,
	when,
	on,
	aspect,
	query,
	keys,
	Deferred,
	all,
	focusUtil,
	BaseWidget,
	LayerInfos,
	jimuUtils,
	wkidUtils,
	esriConfig,
	Search,
	Locator,
	FeatureLayer,
	PopupTemplate,
	esriLang,
	Point,
	coordinateFormatter,
	SpatialReference,
	FeatureQuery,
	Color,
	SimpleMarkerSymbol,
	SimpleFillSymbol,
	SimpleLineSymbol,
	utils
) {
	/**
	 * @module Search
	 */
	return declare([BaseWidget], {
		name: 'Search',
		baseClass: 'jimu-widget-search',
		searchDijit: null,
		searchResults: null,
		_startWidth: null,
		_pointOfSpecifiedUtmCache: null,

		postCreate: function () {
			html.setAttr(this.domNode, 'aria-label', this.nls._widgetLabel);

			if (this.closeable || !this.isOnScreen) {
				html.addClass(this.searchNode, 'default-width-for-openAtStart');
			}

			this.listenWidgetIds.push('framework');
			this._pointOfSpecifiedUtmCache = {};
		},

		startup: function () {
			this.inherited(arguments);

			if (!(this.config &amp;&amp; this.config.sources)) {
				this.config.sources = [];
			}

			coordinateFormatter.load();
			LayerInfos.getInstance(this.map, this.map.itemInfo).then(
				lang.hitch(this, function (layerInfosObj) {
					this.layerInfosObj = layerInfosObj;
					this.own(this.layerInfosObj.on('layerInfosFilterChanged', lang.hitch(this, this.onLayerInfosFilterChanged)));

					utils.setMap(this.map);
					utils.setLayerInfosObj(this.layerInfosObj);
					utils.setAppConfig(this.appConfig);
					when(utils.getConfigInfo(this.config))
						.then(
							lang.hitch(this, function (config) {
								return all(this._convertConfig(config)).then(function (searchSouces) {
									return array.filter(searchSouces, function (source) {
										return source;
									});
								});
							})
						)
						.then(
							lang.hitch(this, function (searchSouces) {
								if (!this.domNode) {
									return;
								}

								this.searchDijit = new Search({
									activeSourceIndex: searchSouces.length === 1 ? 0 : 'all',
									allPlaceholder: jimuUtils.stripHTML(esriLang.isDefined(this.config.allPlaceholder) ? this.config.allPlaceholder : ''),
									autoSelect: true,
									enableButtonMode: false,
									enableLabel: false,
									enableHighlight: true,
									enableInfoWindow: true,
									showInfoWindowOnSelect: true,
									map: this.map,
									sources: searchSouces,
									theme: 'arcgisSearch',
								});
								html.place(this.searchDijit.domNode, this.searchNode);
								this.searchDijit.startup();

								this._resetSearchDijitStyle();

								this.own(this.searchDijit.watch('activeSourceIndex', lang.hitch(this, '_onSourceIndexChange')));

								this.own(on(this.searchDijit, 'search-results', lang.hitch(this, '_onSearchResults')));

								this.own(on(this.searchDijit, 'suggest-results', lang.hitch(this, '_onSuggestResults')));

								this.own(on(this.searchDijit, 'select-result', lang.hitch(this, '_onSelectResult')));

								this.own(on(this.searchDijit, 'clear-search', lang.hitch(this, '_onClearSearch')));

								this.own(aspect.around(this.searchDijit, '_search', lang.hitch(this, '_convertSR')));

								/*****************************************
								 * Binding events about 508 accessbility
								 * ***************************************/

								if (searchSouces.length === 1) {
									jimuUtils.initFirstFocusNode(this.domNode, this.searchDijit.inputNode);
								} else {
									jimuUtils.initFirstFocusNode(this.domNode, this.searchDijit.sourcesBtnNode);
								}
								jimuUtils.initLastFocusNode(this.domNode, this.searchDijit.submitNode);
								this.own(
									on(
										this.domNode,
										'keydown',
										lang.hitch(this, function (evt) {
											if (html.hasClass(evt.target, this.baseClass) &amp;&amp; evt.keyCode === keys.ENTER) {
												//enter to first node
												this.searchDijit.sourcesBtnNode.focus();
											}
											//esc to close searched list
											else if (!html.hasClass(evt.target, this.baseClass) &amp;&amp; evt.keyCode === keys.ESCAPE) {
												if (html.getStyle(this.searchResultsNode, 'display') === 'block') {
													html.setStyle(this.searchResultsNode, 'display', 'none');
												}
											}
										})
									)
								);

								this.own(
									aspect.around(
										this.searchDijit,
										'_inputKey',
										lang.hitch(this, function (originalFun) {
											return lang.hitch(this, function (e) {
												var returnValue = null;
												if (html.getStyle(this.searchResultsNode, 'display') === 'block') {
													console.log('searchResultsNode');
													this._inputKey(e);
												} else {
													returnValue = originalFun.apply(this.searchDijit, [e]);
												}
												return returnValue;
											});
										})
									)
								);

								/*****************************************
								 * Binding events for control result menu
								 * ***************************************/
								this.own(on(this.searchDijit.domNode, 'click', lang.hitch(this, '_onSearchDijitClick')));

								this.own(
									on(
										this.searchDijit.inputNode,
										'keyup',
										lang.hitch(this, function (e) {
											if (e.keyCode !== keys.ENTER &amp;&amp; e.keyCode !== keys.UP_ARROW &amp;&amp; e.keyCode !== keys.DOWN_ARROW) {
												this._onClearSearch();
											}
										})
									)
								);

								this.own(on(this.searchResultsNode, 'li:click', lang.hitch(this, '_onSelectSearchResult')));
								this.own(on(this.searchResultsNode, 'li:keyup', lang.hitch(this, '_onSearchResultLiKey')));

								this.own(on(this.searchResultsNode, '.show-all-results:click', lang.hitch(this, '_showResultMenu')));

								this.own(
									on(
										window.document,
										'click',
										lang.hitch(this, function (e) {
											if (!html.isDescendant(e.target, this.searchResultsNode)) {
												this._hideResultMenu();
												this._resetSelectorPosition('.show-all-results');
											}
										})
									)
								);
								this.fetchData('framework');
							})
						);
				})
			);
		},

		_convertConfig: function (config) {
			var sourceDefs = array.map(
				config.sources,
				lang.hitch(this, function (source) {
					var def = new Deferred();
					if (source &amp;&amp; source.url &amp;&amp; source.type === 'locator') {
						var _source = {
							locator: new Locator(source.url || ''),
							outFields: ['*'],
							singleLineFieldName: source.singleLineFieldName || '',
							name: jimuUtils.stripHTML(source.name || ''),
							placeholder: jimuUtils.stripHTML(source.placeholder || ''),
							countryCode: source.countryCode || '',
							maxResults: source.maxResults || 6,
							zoomScale: source.zoomScale || 50000,
							useMapExtent: !!source.searchInCurrentMapExtent,
							enableInfoWindow: esriLang.isDefined(this.config.showInfoWindowOnSelect) ? !!this.config.showInfoWindowOnSelect : true,
							showInfoWindowOnSelect: esriLang.isDefined(this.config.showInfoWindowOnSelect) ? !!this.config.showInfoWindowOnSelect : true,
							_zoomScaleOfConfigSource: source.zoomScale,
							_panToScale: source.panToScale,
						};

						if (source.maxSuggestions === 0) {
							_source.enableSuggestions = false;
						} else if (source.maxSuggestions === null || source.maxSuggestions === undefined) {
							_source.maxSuggestions = 6;
						} else {
							_source.maxSuggestions = source.maxSuggestions;
						}

						if (source.enableLocalSearch) {
							_source.localSearchOptions = {
								minScale: source.localSearchMinScale,
								distance: this._getLocalSearchDistance(source),
							};
						}

						if (source.panToScale || source.zoomScale) {
							_source.autoNavigate = false;
						}

						def.resolve(_source);
					} else if (source &amp;&amp; source.url &amp;&amp; source.type === 'query') {
						var searchLayer = new FeatureLayer(source.url || null, {
							outFields: ['*'],
						});

						this.own(
							on(
								searchLayer,
								'load',
								lang.hitch(this, function (result) {
									var flayer = result.layer;

									// identify the data source
									var sourceLayer = this.map.getLayer(source.layerId);
									var sourceLayerInfo = this.layerInfosObj.getLayerInfoById(source.layerId);
									var showInfoWindowOnSelect;
									var enableInfoWindow;
									if (sourceLayer) {
										// pure feature service layer defined in the map
										showInfoWindowOnSelect = false;
										enableInfoWindow = false;
									} else if (sourceLayerInfo) {
										// feature service layer defined in the map
										showInfoWindowOnSelect = false;
										enableInfoWindow = false;
									} else {
										// data source from the outside
										showInfoWindowOnSelect = esriLang.isDefined(this.config.showInfoWindowOnSelect) ? !!this.config.showInfoWindowOnSelect : true;
										enableInfoWindow = esriLang.isDefined(this.config.showInfoWindowOnSelect) ? !!this.config.showInfoWindowOnSelect : true;
									}

									var fNames = null;
									if (source.searchFields &amp;&amp; source.searchFields.length > 0) {
										fNames = source.searchFields;
									} else {
										fNames = [];
										array.forEach(flayer.fields, function (field) {
											if (field.type !== 'esriFieldTypeOID' &amp;&amp; field.name !== flayer.objectIdField &amp;&amp; field.type !== 'esriFieldTypeGeometry') {
												fNames.push(field.name);
											}
										});
									}

									var convertedSource = {
										featureLayer: flayer,
										outFields: ['*'],
										searchFields: fNames,
										autoNavigate: false,
										displayField: source.displayField || '',
										exactMatch: !!source.exactMatch,
										name: jimuUtils.stripHTML(source.name || ''),
										placeholder: jimuUtils.stripHTML(source.placeholder || ''),
										maxResults: source.maxResults || 6,
										zoomScale: source.zoomScale || 50000,
										//infoTemplate: lang.clone(template),
										useMapExtent: !!source.searchInCurrentMapExtent,
										showInfoWindowOnSelect: showInfoWindowOnSelect,
										enableInfoWindow: enableInfoWindow,
										_featureLayerId: source.layerId,
										_zoomScaleOfConfigSource: source.zoomScale,
										_panToScale: source.panToScale,
									};
									/*
              if (!template) {
                delete convertedSource.infoTemplate;
              }
              */

									if (source.maxSuggestions === 0) {
										convertedSource.enableSuggestions = false;
									} else if (source.maxSuggestions === null || source.maxSuggestions === undefined) {
										convertedSource.maxSuggestions = 6;
									} else {
										convertedSource.maxSuggestions = source.maxSuggestions;
									}

									if (convertedSource._featureLayerId) {
										var layerInfo = this.layerInfosObj.getLayerInfoById(convertedSource._featureLayerId);
										if (layerInfo) {
											flayer.setDefinitionExpression(layerInfo.getFilter());
										}
									}

									//var template = this._getInfoTemplate(flayer, source, source.displayField);
									this._getInfoTemplate(flayer, source).then(
										lang.hitch(this, function (infoTemplate) {
											//convertedSource.infoTemplate = lang.clone(infoTemplate);
											convertedSource.infoTemplate = infoTemplate;
											def.resolve(convertedSource);
										}),
										lang.hitch(this, function () {
											def.resolve(convertedSource);
										})
									);

									if (sourceLayerInfo) {
										if (searchLayer.geometryType === 'esriGeometryPoint') {
											convertedSource.highlightSymbol = new SimpleMarkerSymbol(
												SimpleMarkerSymbol.STYLE_CIRCLE,
												10,
												new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255, 0.0]), 2),
												new Color([0, 0, 0, 0.0])
											);
										} else if (searchLayer.geometryType === 'esriGeometryPolyline') {
											convertedSource.highlightSymbol = new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255, 0.0]), 2);
										} else if (searchLayer.geometryType === 'esriGeometryPolygon') {
											convertedSource.highlightSymbol = new SimpleFillSymbol(
												SimpleFillSymbol.STYLE_NULL,
												new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255, 0.0]), 2)
											);
										}
									} else {
										if (searchLayer.geometryType === 'esriGeometryPoint') {
											convertedSource.highlightSymbol = new SimpleMarkerSymbol(
												SimpleMarkerSymbol.STYLE_CIRCLE,
												10,
												new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255]), 2),
												new Color([0, 0, 0])
											);
										} else if (searchLayer.geometryType === 'esriGeometryPolyline') {
											convertedSource.highlightSymbol = new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255]), 2);
										} else if (searchLayer.geometryType === 'esriGeometryPolygon') {
											convertedSource.highlightSymbol = new SimpleFillSymbol(
												SimpleFillSymbol.STYLE_NULL,
												new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, new Color([0, 255, 255]), 2)
											);
										}
									}
								})
							)
						);

						this.own(
							on(searchLayer, 'error', function () {
								def.resolve(null);
							})
						);
					} else {
						def.resolve(null);
					}
					return def;
				})
			);

			return sourceDefs;
		},

		_getLocalSearchDistance: function (source) {
			var result;
			switch (source.radiusUnit || 'meter') {
				case 'kilometer':
					result = source.localSearchDistance * 1000;
					break;
				case 'nauticalMile':
					result = source.localSearchDistance * 1852;
					break;
				case 'mile':
					result = source.localSearchDistance * 1609.344;
					break;
				case 'yard':
					result = source.localSearchDistance * 0.9144;
					break;
				case 'foot':
					result = source.localSearchDistance * 0.3048;
					break;
				case 'inch':
					result = source.localSearchDistance * 0.0254;
					break;
				default:
					result = source.localSearchDistance;
					break;
			}
			return result;
		},

		_getInfoTemplate: function (fLayer, source) {
			var def = new Deferred();
			var layerInfo = this.layerInfosObj.getLayerInfoById(source.layerId);
			var template;

			if (layerInfo) {
				def = layerInfo.loadInfoTemplate();
			} else {
				var fieldNames = [];
				array.filter(fLayer.fields, function (field) {
					var fieldName = field.name.toLowerCase();
					if (fieldName.indexOf('shape') &lt; 0 &amp;&amp; fieldName.indexOf('objectid') &lt; 0 &amp;&amp; fieldName.indexOf('globalid') &lt; 0 &amp;&amp; fieldName.indexOf('perimeter') &lt; 0) {
						fieldNames.push(field.name);
					}
				});

				var title = source.name + ': {' + source.displayField + '}';
				var popupInfo = jimuUtils.getDefaultPopupInfo(fLayer, title, fieldNames);
				if (popupInfo) {
					template = new PopupTemplate(popupInfo);
				}
				def.resolve(template);
			}
			return def;
		},

		_getSourceIndexOfResult: function (e) {
			if (this.searchResults) {
				for (var i in this.searchResults) {
					var sourceResults = this.searchResults[i];
					var pos = array.indexOf(sourceResults, e);
					if (pos > -1) {
						return parseInt(i, 10);
					}
				}
			}

			return null;
		},

		_zoomToScale: function (zoomScale, features) {
			this.map.setScale(zoomScale);
			jimuUtils.featureAction.panTo(this.map, features);
		},

		_showPopupByFeatures: function (layerInfo, features, selectEvent) {
			/*jshint unused: false*/
			var location = null;
			var isPoint = false;

			if (this.config.showInfoWindowOnSelect) {
				//this.map.infoWindow.clearFeatures();
				//this.map.infoWindow.hide();
				this.map.infoWindow.setFeatures(features);
				if (features[0].geometry.type === 'point') {
					location = features[0].geometry;
					isPoint = true;
				} else {
					var extent = features[0].geometry &amp;&amp; features[0].geometry.getExtent();
					location = extent &amp;&amp; extent.getCenter();
				}
				if (location) {
					this.map.infoWindow.show(location, {
						closetFirst: true,
					});
				}
			} else {
				// hightlight result
				this.map.infoWindow.setFeatures(features);
				this.map.infoWindow.updateHighlight(this.map, features[0]);
				this.map.infoWindow.showHighlight();
			}

			// zoomto result
			if (selectEvent.source._panToScale) {
				jimuUtils.featureAction.panTo(this.map, features);
			} else if (selectEvent.source._zoomScaleOfConfigSource) {
				this._zoomToScale(selectEvent.source.zoomScale, features);
			} else {
				var featureSet = jimuUtils.toFeatureSet(features);
				jimuUtils.zoomToFeatureSet(this.map, featureSet);
			}
		},

		_cloneInfoTemplate: function (infoTemplate) {
			var newInfoTemplate = null;
			if (infoTemplate &amp;&amp; infoTemplate.toJson) {
				newInfoTemplate = new infoTemplate.constructor(infoTemplate.toJson());
			}
			return newInfoTemplate;
		},

		_loadInfoTemplateAndShowPopup: function (layerInfo, selectedFeature, selectEvent) {
			if (layerInfo) {
				//this.searchDijit.clearGraphics();
				var layerObjectInMap = this.map.getLayer(layerInfo.id);
				if (layerInfo.isPopupEnabled() &amp;&amp; layerObjectInMap) {
					this._showPopupByFeatures(layerInfo, [selectedFeature], selectEvent);
				} else {
					layerInfo.loadInfoTemplate().then(
						lang.hitch(this, function (infoTemplate) {
							//temporary set infoTemplate to selectedFeature.
							selectedFeature.setInfoTemplate(this._cloneInfoTemplate(infoTemplate));
							this._showPopupByFeatures(layerInfo, [selectedFeature], selectEvent);
							// clear infoTemplate for selectedFeature;
							var handle = aspect.before(
								this.map,
								'onClick',
								lang.hitch(this, function () {
									selectedFeature.setInfoTemplate(null);
									handle.remove();
								})
							);
						})
					);
				}
			}
		},

		_onSelectResult: function (e) {
			var result = e.result;
			var dataSourceIndex = e.sourceIndex;
			var sourceResults = this.searchResults[dataSourceIndex];
			var dataIndex = 0;
			var resultFeature = e.result.feature;
			var sourceLayerId = e.source._featureLayerId;

			var getGraphics = function (layer, fid) {
				var graphics = layer.graphics;
				var gs = array.filter(graphics, function (g) {
					return g.attributes[layer.objectIdField] === fid;
				});
				return gs;
			};

			for (var i = 0, len = sourceResults.length; i &lt; len; i++) {
				if (jimuUtils.isEqual(sourceResults[i], result)) {
					dataIndex = i;
					break;
				}
			}
			query('li', this.searchResultsNode).forEach(
				lang.hitch(this, function (li) {
					html.removeClass(li, 'result-item-selected');
					var title = html.getAttr(li, 'title');
					var dIdx = html.getAttr(li, 'data-index');
					var dsIndex = html.getAttr(li, 'data-source-index');

					if (result &amp;&amp; result.name &amp;&amp; title === result.name.toString() &amp;&amp; dIdx === dataIndex.toString() &amp;&amp; dsIndex === dataSourceIndex.toString()) {
						html.addClass(li, 'result-item-selected');
						focusUtil.focus(li);
					}
				})
			);

			//var layer = this.map.getLayer(sourceLayerId);
			var layerInfo = this.layerInfosObj.getLayerInfoById(sourceLayerId);

			if (layerInfo) {
				layerInfo.getLayerObject().then(
					lang.hitch(this, function (layer) {
						var gs = getGraphics(layer, resultFeature.attributes[layer.objectIdField]);
						if (gs &amp;&amp; gs.length > 0) {
							//this._showPopupByFeatures(gs);
							this._loadInfoTemplateAndShowPopup(layerInfo, gs[0], e);
						} else {
							var featureQuery = new FeatureQuery();
							featureQuery.where = layer.objectIdField + ' = ' + resultFeature.attributes[layer.objectIdField];
							featureQuery.outSpatialReference = this.map.spatialReference;
							featureQuery.outFields = ['*'];

							layer.queryFeatures(
								featureQuery,
								lang.hitch(this, function (featureSet) {
									var selectedFeature = null;
									if (featureSet &amp;&amp; featureSet.features.length > 0) {
										selectedFeature = featureSet.features[0];
										// working around for js-api's generalization.
										//   incorrect geometry of polygon result of queryFeatures.
										selectedFeature.geometry = resultFeature.geometry;

										this._loadInfoTemplateAndShowPopup(layerInfo, selectedFeature, e);
									}
								}),
								lang.hitch(this, function () {
									// show popupInfo of searchResult.
									var selectedFeature = resultFeature;
									this._loadInfoTemplateAndShowPopup(layerInfo, selectedFeature, e);
								})
							);
						}
					})
				);
			} else if (e.source.featureLayer &amp;&amp; !e.source.locator) {
				// outside resource result:
				// zoomTo or panto by zoomToExtent, popup by search dijit
				if (e.source._panToScale) {
					jimuUtils.featureAction.panTo(this.map, [e.result.feature]);
				} else if (e.source._zoomScaleOfConfigSource) {
					this._zoomToScale(e.source._zoomScaleOfConfigSource, [e.result.feature]);
				} else {
					jimuUtils.zoomToExtent(this.map, e.result.extent);
				}
			} else {
				//result of geocoder service
				if (e.source._panToScale) {
					//panToScale is configed, panTo by jimuFeatureAction. popup by search dijit
					jimuUtils.featureAction.panTo(this.map, [e.result.feature]);
				} else if (e.source._zoomScaleOfConfigSource) {
					//zoomScale is configed, zoomto by _zoomScale. popup by search dijit
					this._zoomToScale(e.source._zoomScaleOfConfigSource, [e.result.feature]);
				}
				//zoomSclae keep default value, popup and zoomto by search dijit;
			}

			// publish select result to other widgets
			this.publishData({
				selectResult: e,
			});
		},

		destroy: function () {
			utils.setMap(null);
			utils.setLayerInfosObj(null);
			utils.setAppConfig(null);
			if (this.searchDijit) {
				this.searchDijit.clear();
			}

			this.inherited(arguments);
		},

		/*********************************
		 * Methods for Events
		 * ******************************/
		onReceiveData: function (name, widgetId, data) {
			if (name === 'framework' &amp;&amp; widgetId === 'framework' &amp;&amp; data &amp;&amp; data.searchString) {
				this.searchDijit.set('value', data.searchString);
				this.searchDijit.search();
			}
		},

		onLayerInfosFilterChanged: function (changedLayerInfos) {
			array.some(
				changedLayerInfos,
				lang.hitch(this, function (info) {
					if (this.searchDijit &amp;&amp; this.searchDijit.sources &amp;&amp; this.searchDijit.sources.length > 0) {
						array.forEach(this.searchDijit.sources, function (s) {
							if (s._featureLayerId === info.id) {
								s.featureLayer.setDefinitionExpression(info.getFilter());
							}
						});
					}
				})
			);
		},

		_onSourceIndexChange: function () {
			if (this.searchDijit.value) {
				this.searchDijit.search(this.searchDijit.value);
			}
		},

		_onSearchResults: function (evt) {
			var sources = this.searchDijit.get('sources');
			var activeSourceIndex = this.searchDijit.get('activeSourceIndex');
			var value = this.searchDijit.get('value');
			var htmlContent = '';
			var results = evt.results;
			var _activeSourceNumber = null;

			var outputTextforCustomInput = this._getOutputTextForCustomInput(evt.value); //*******

			if (results &amp;&amp; evt.numResults > 0) {
				html.removeClass(this.searchDijit.containerNode, 'showSuggestions');

				this.searchResults = results;
				htmlContent += '&lt;div class="show-all-results jimu-ellipsis" title="' + this.nls.showAll + '">' + this.nls.showAllResults + '&lt;strong >' + value + '&lt;/strong>&lt;/div>';
				htmlContent += '&lt;div class="searchMenu" role="menu">';
				for (var i in results) {
					if (results[i] &amp;&amp; results[i].length) {
						var source = sources[parseInt(i, 10)];
						var name = source.name;
						if (sources.length > 1 &amp;&amp; activeSourceIndex === 'all') {
							htmlContent += '&lt;div title="' + name + '" class="menuHeader">' + name + '&lt;/div>';
						}
						htmlContent += '&lt;ul>';
						//var partialMatch = value;
						//var r = new RegExp("(" + partialMatch + ")", "gi");
						var maxResults = sources[i].maxResults;

						for (var j = 0, len = results[i].length; j &lt; len &amp;&amp; j &lt; maxResults; j++) {
							//var text = esriLang.isDefined(results[i][j].name) ?
							//  results[i][j].name : this.nls.untitled;
							var text;
							if (esriLang.isDefined(results[i][j].name)) {
								if (source &amp;&amp; source.locator &amp;&amp; outputTextforCustomInput) {
									results[i][j].name = outputTextforCustomInput;
								}
								text = results[i][j].name;
							} else {
								text = this.nls.untitled;
							}

							htmlContent +=
								'&lt;li title="' +
								text +
								'" data-index="' +
								j +
								'" data-source-index="' +
								i +
								'" role="menuitem" tabindex="0">' +
								/*text.toString().replace(r, "&lt;strong >$1&lt;/strong>") +*/ text.toString() +
								'&lt;/li>';
						}
						htmlContent += '&lt;/ul>';

						if (evt.numResults === 1) {
							_activeSourceNumber = i;
						}
					}
				}
				htmlContent += '&lt;/div>';
				this.searchResultsNode.innerHTML = htmlContent;

				this._showResultMenu();

				this._resetSelectorPosition('.searchMenu');
			} else {
				this._onClearSearch();
			}
			// publish search results to other widgets
			this.publishData({
				searchResults: evt,
			});
		},

		_onSuggestResults: function (evt) {
			this._resetSelectorPosition('.searchMenu');

			this._hideResultMenu();
			// publish suggest results to other widgets
			this.publishData({
				suggestResults: evt,
			});
		},

		_onClearSearch: function () {
			html.setStyle(this.searchResultsNode, 'display', 'none');
			this.searchResultsNode.innerHTML = '';
			this.searchResults = null;
			//this.map.infoWindow.hideHighlight();
		},

		/*
      onActive: function() {
        this._mapClickHandle = aspect.before(this.map, 'onClick', lang.hitch(this, function() {
          this._hidePopup();
          return arguments;
        }));
      },

      onDeActive: function() {
        if (this._mapClickHandle &amp;&amp; this._mapClickHandle.remove) {
          this._mapClickHandle.remove();
        }
        this._hidePopup();
      },
      */

		_hidePopup: function () {
			if (this.map.infoWindow.isShowing) {
				this.map.infoWindow.hide();
			}
		},

		setPosition: function (position) {
			this._resetSearchDijitStyle(position);
			this.inherited(arguments);
		},

		resize: function () {
			this._resetSearchDijitStyle();
		},

		// use for small screen responsive
		_resetSearchDijitStyle: function () {
			html.removeClass(this.domNode, 'use-absolute');
			if (this.searchDijit &amp;&amp; this.searchDijit.domNode) {
				html.setStyle(this.searchDijit.domNode, 'width', 'auto');
			}

			setTimeout(
				lang.hitch(this, function () {
					if (this.searchDijit &amp;&amp; this.searchDijit.domNode) {
						var box = {
							w: !window.appInfo.isRunInMobile
								? 274 // original width of search dijit
								: parseInt(html.getComputedStyle(this.domNode).width, 10),
						};
						var sourcesBox = html.getMarginBox(this.searchDijit.sourcesBtnNode);
						var submitBox = html.getMarginBox(this.searchDijit.submitNode);
						var style = null;
						if (box.w) {
							html.setStyle(this.searchDijit.domNode, 'width', box.w + 'px');
							html.addClass(this.domNode, 'use-absolute');

							if (isFinite(sourcesBox.w) &amp;&amp; isFinite(submitBox.w)) {
								if (window.isRTL) {
									style = {
										left: submitBox.w + 'px',
										right: sourcesBox.w + 'px',
									};
								} else {
									style = {
										left: sourcesBox.w + 'px',
										right: submitBox.w + 'px',
									};
								}
								var inputGroup = query('.searchInputGroup', this.searchDijit.domNode)[0];

								if (inputGroup) {
									html.setStyle(inputGroup, style);
									var groupBox = html.getMarginBox(inputGroup);
									var extents = html.getPadBorderExtents(this.searchDijit.inputNode);
									html.setStyle(this.searchDijit.inputNode, 'width', groupBox.w - extents.w + 'px');
								}
							}
						}
					}
				}),
				50
			);
		},

		/**************************************
		 * Mehtods for covert SR
		 * ***********************************/
		_convertSR: function (originalFun) {
			return lang.hitch(this, function (e) {
				var source = this.searchDijit.sources[e.index];
				var pointOfSpecifiedWkid = this._getPointFromSpecifiedWkid(e.text);
				//var pointOfSpecifiedUtm = this._getPointFromSpecifiedUtm(e.text);
				if (source &amp;&amp; source.locator &amp;&amp; pointOfSpecifiedWkid) {
					return jimuUtils.projectToSpatialReference(pointOfSpecifiedWkid, new SpatialReference({ wkid: 4326 })).then(
						lang.hitch(
							this,
							function (event, targetPoint) {
								var inputText = this._getFormatedInputFromPoint(targetPoint);
								if (inputText) {
									event.text = inputText;
								}
								return originalFun.apply(this.searchDijit, [event]);
							},
							lang.clone(e)
						)
					);
				} else if (source &amp;&amp; source.locator) {
					return this._getPointFromSpecifiedUtm(e.text).then(
						lang.hitch(
							this,
							function (event, pointOfSpecifiedUtm) {
								var inputText = this._getFormatedInputFromPoint(pointOfSpecifiedUtm);
								if (inputText) {
									event.text = inputText;
								}
								return originalFun.apply(this.searchDijit, [event]);
							},
							lang.clone(e)
						)
					);
				} else {
					return originalFun.apply(this.searchDijit, [e]);
				}
			});
		},

		_getFormatedInputFromPoint: function (point) {
			var inputText = null;
			if (point &amp;&amp; !isNaN(point.x) &amp;&amp; !isNaN(point.y)) {
				//inputText = "X:" + point.x + "," + "Y:" + point.y;
				inputText = 'Y:' + point.y + ',' + 'X:' + point.x;
			}
			return inputText;
		},

		_getPointFromSpecifiedWkid: function (inputString) {
			var point = null;
			if (!inputString) {
				return point;
			}
			var coordinateParams = inputString.split(':');
			var coordinateText = coordinateParams[0];
			var wkid = Number(coordinateParams[1]);
			if (wkid &amp;&amp; wkidUtils.isValidWkid(wkid) &amp;&amp; coordinateText) {
				var coordinateValues = coordinateText.split(',');
				var x = Number(coordinateValues[0]);
				var y = Number(coordinateValues[1]);
				if (!isNaN(x) &amp;&amp; !isNaN(y)) {
					point = new Point(x, y, new SpatialReference({ wkid: wkid }));
				}
			}
			return point;
		},

		_getPointFromSpecifiedUtmByGeometryService: function (inputString) {
			var retDef = new Deferred();
			var resultPoint = null;
			var params = {
				sr: 4326,
				conversionType: 'UTM',
				conversionMode: 'utmDefault',
				strings: [inputString],
			};
			var geometryService = esriConfig &amp;&amp; esriConfig.defaults &amp;&amp; esriConfig.defaults.geometryService;
			if (geometryService &amp;&amp; geometryService.declaredClass === 'esri.tasks.GeometryService') {
				geometryService.fromGeoCoordinateString(
					params,
					lang.hitch(this, function (result) {
						var x = Number(result[0][0]);
						var y = Number(result[0][1]);
						if (!isNaN(x) &amp;&amp; !isNaN(y)) {
							resultPoint = new Point(x, y, new SpatialReference({ wkid: 4326 }));
							this._pointOfSpecifiedUtmCache[inputString] = resultPoint;
						}
						retDef.resolve(resultPoint);
					}),
					lang.hitch(this, function () {
						retDef.resolve(resultPoint);
					})
				);
			} else {
				retDef.resolve(resultPoint);
			}

			return retDef;
		},

		_isValidUtmFormat: function (utmString) {
			return utmString &amp;&amp; utmString.indexOf &amp;&amp; utmString.indexOf(',') &lt; 0 ? true : false;
		},

		_getPointFromSpecifiedUtm: function (inputString) {
			var retDef = new Deferred();
			var resultPoint = null;
			if (!inputString || !this._isValidUtmFormat(inputString)) {
				retDef.resolve(resultPoint);
				return retDef;
			}

			if (coordinateFormatter.isSupported()) {
				if (coordinateFormatter.isLoaded()) {
					var point = coordinateFormatter.fromUtm(inputString, new SpatialReference({ wkid: 4326 }), 'latitude-band-indicators');
					if (point &amp;&amp; !isNaN(point.x) &amp;&amp; !isNaN(point.y)) {
						// the 'fromUtm' will convert the string "8430 FOX LAIR CIR, Anchorage, AK" to a point,
						// need to further verify the utm string by geometry service.
						this._getPointFromSpecifiedUtmByGeometryService(inputString).then(
							lang.hitch(this, function (resultPoint) {
								retDef.resolve(resultPoint);
							})
						);
					} else {
						retDef.resolve(resultPoint);
					}
				} else {
					coordinateFormatter.load();
					retDef.resolve(resultPoint);
				}
			} else {
				retDef = this._getPointFromSpecifiedUtmByGeometryService(inputString);
			}
			return retDef;
		},

		_getOutputTextForCustomInput: function (inputText) {
			var outputText = null;
			var pointOfSpecifiedWkid = this._getPointFromSpecifiedWkid(inputText);
			var pointOfSpecifiedUtm = this._pointOfSpecifiedUtmCache[inputText];
			if (pointOfSpecifiedWkid) {
				outputText = 'X:' + pointOfSpecifiedWkid.x + ' ' + 'Y:' + pointOfSpecifiedWkid.y;
			} else if (pointOfSpecifiedUtm) {
				outputText = inputText;
			}
			return outputText;
		},
		/***********************************
		 * Mehtods for control result menu
		 * *********************************/
		_onSearchDijitClick: function () {
			this._resetSelectorPosition('.searchMenu');
		},

		_onSelectSearchResult: function (evt) {
			var target = evt.target;
			while (!(html.hasAttr(target, 'data-source-index') &amp;&amp; html.getAttr(target, 'data-index'))) {
				target = target.parentNode;
			}
			var result = null;
			var dataSourceIndex = html.getAttr(target, 'data-source-index');
			var dataIndex = parseInt(html.getAttr(target, 'data-index'), 10);
			// var sources = this.searchDijit.get('sources');

			if (dataSourceIndex !== 'all') {
				dataSourceIndex = parseInt(dataSourceIndex, 10);
			}
			if (this.searchResults &amp;&amp; this.searchResults[dataSourceIndex] &amp;&amp; this.searchResults[dataSourceIndex][dataIndex]) {
				result = this.searchResults[dataSourceIndex][dataIndex];
				this.searchDijit.select(result);
			}
		},

		_hideResultMenu: function () {
			query('.show-all-results', this.searchResultsNode).style('display', 'block');
			query('.searchMenu', this.searchResultsNode).style('display', 'none');
		},

		_showResultMenu: function () {
			html.setStyle(this.searchResultsNode, 'display', 'block');
			query('.show-all-results', this.searchResultsNode).style('display', 'none');
			query('.searchMenu', this.searchResultsNode).style('display', 'block');

			var groupNode = query('.searchInputGroup', this.searchDijit.domNode)[0];
			if (groupNode) {
				var groupBox = html.getMarginBox(groupNode);
				var style = {
					width: groupBox.w + 'px',
				};
				if (window.isRTL) {
					var box = html.getMarginBox(this.searchDijit.domNode);
					style.right = box.w - groupBox.l - groupBox.w + 'px';
				} else {
					style.left = groupBox.l + 'px';
				}
				query('.show-all-results', this.searchResultsNode).style(style);
				query('.searchMenu', this.searchResultsNode).style(style);
			}
		},

		// set position for 'searchSuggestiongMenu', 'searchResultMenu', 'showAllResultsBox'
		_resetSelectorPosition: function (cls) {
			var layoutBox = html.getMarginBox(window.jimuConfig.layoutId);
			query(cls, this.domNode).forEach(
				lang.hitch(this, function (menu) {
					var menuPosition = html.position(menu);
					if (html.getStyle(menu, 'display') === 'none') {
						return;
					}
					var dijitPosition = html.position(this.searchDijit.domNode);
					var up = dijitPosition.y - 2;
					var down = layoutBox.h - dijitPosition.y - dijitPosition.h;
					if (down > menuPosition.y + menuPosition.h || up > menuPosition.h) {
						html.setStyle(menu, 'top', (down > menuPosition.y + menuPosition.h ? dijitPosition.h : -menuPosition.h - 2) + 'px');
					} else {
						html.setStyle(menu, 'height', Math.max(down, up) + 'px');
						html.setStyle(menu, 'top', (down > up ? dijitPosition.h : -up - 2) + 'px');
					}
				})
			);
		},

		_inputKey: function (e) {
			if (e) {
				var lists = query('li', this.searchResultsNode);
				if (e.keyCode === keys.TAB || e.keyCode === keys.ESCAPE) {
					/*
            if(html.hasClass(evt.target, this.baseClass) &amp;&amp; evt.keyCode === keys.ENTER) {//enter to first node
              this.searchDijit.sourcesBtnNode.focus();
            }
            //esc to close searched list
            else if(!html.hasClass(evt.target, this.baseClass) &amp;&amp; evt.keyCode === keys.ESCAPE) {
              if(html.getStyle(this.searchResultsNode, 'display') === 'block'){
                html.setStyle(this.searchResultsNode, 'display', 'none');
              }
            }
            */
				} else if (e.keyCode === keys.UP_ARROW) {
					e.stopPropagation();
					e.preventDefault();
					array.some(
						lists,
						function (li, index) {
							if (html.hasClass(li, 'result-item-selected')) {
								var nextLi = lists[index - 1];
								if (nextLi) {
									html.removeClass(li, 'result-item-selected');
									html.addClass(nextLi, 'result-item-selected');
									focusUtil.focus(nextLi);
								}
								return true;
							} else {
								return false;
							}
						},
						this
					);
				} else if (e.keyCode === keys.DOWN_ARROW) {
					e.stopPropagation();
					e.preventDefault();
					array.some(
						lists,
						function (li, index) {
							if (html.hasClass(li, 'result-item-selected')) {
								var nextLi = lists[index + 1];
								if (nextLi) {
									html.removeClass(li, 'result-item-selected');
									html.addClass(nextLi, 'result-item-selected');
									focusUtil.focus(nextLi);
								}
								return true;
							} else {
								return false;
							}
						},
						this
					);
				}
				// ignored keys
				else if (e.ctrlKey || e.metaKey || e.keyCode === keys.copyKey || e.keyCode === keys.LEFT_ARROW || e.keyCode === keys.RIGHT_ARROW || e.keyCode === keys.ENTER) {
					// just return. don't do anything
					return e;
				}
			}
		},

		_onSearchResultLiKey: function (e) {
			if (e) {
				if (e.keyCode === keys.ENTER) {
					this._onSelectSearchResult(e);
				} else if (e.keyCode === keys.DOWN_ARROW || e.keyCode === keys.UP_ARROW) {
					this._inputKey(e);
				}
			}
		},
	});
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="echarts_coord_scale_Ordinal%250D%250Dhttp___en.wikipedia.org_wiki_Level_of_measurementmodule_.html">echarts/coord/scale/Ordinalhttp://en.wikipedia.org/wiki/Level_of_measurement</a></li><li><a href="echarts-module_ECharts.html">ECharts</a></li><li><a href="echarts-module_MessageCenter.html">MessageCenter</a></li><li><a href="module-AttributeTable.html">AttributeTable</a></li><li><a href="module-BasemapGallery.html">BasemapGallery</a></li><li><a href="module-Draw.html">Draw</a></li><li><a href="module-echarts_animation_Animator.html">echarts/animation/Animator</a></li><li><a href="module-echarts_chart_helper_Line.html">echarts/chart/helper/Line</a></li><li><a href="module-echarts_chart_helper_LineDraw.html">echarts/chart/helper/LineDraw</a></li><li><a href="module-echarts_chart_helper_Symbol.html">echarts/chart/helper/Symbol</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_geo_parseGeoJson.html">echarts/coord/geo/parseGeoJson</a></li><li><a href="module-echarts_coord_geo_Region.html">echarts/coord/geo/Region</a></li><li><a href="module-echarts_core_BoundingRect.html">echarts/core/BoundingRect</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-echarts_scale_Interval.html">echarts/scale/Interval</a></li><li><a href="module-echarts_scale_Log.html">echarts/scale/Log</a></li><li><a href="module-echarts_scale_Scale.html">echarts/scale/Scale</a></li><li><a href="module-echarts_stream_Scheduler.html">echarts/stream/Scheduler</a></li><li><a href="module-Geoprocessing.html">Geoprocessing</a></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Infographic.html">Infographic</a></li><li><a href="module-LayerList.html">LayerList</a></li><li><a href="module-MapProgress.html">MapProgress</a></li><li><a href="module-PickColumns.html">PickColumns</a></li><li><a href="module-Search.html">Search</a></li><li><a href="module-Select.html">Select</a></li><li><a href="module-Splash.html">Splash</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_BaseIconItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/BaseIconItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_DockableItem.html">themes/LaunchpadTheme/widgets/AnchorBarController/DockableItem</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_GroupItems.html">themes/LaunchpadTheme/widgets/AnchorBarController/GroupItems</a></li><li><a href="module-themes_LaunchpadTheme_widgets_AnchorBarController_Widget.html">themes/LaunchpadTheme/widgets/AnchorBarController/Widget</a></li><li><a href="module-Treatment.html">Treatment</a></li><li><a href="module-widgets_Coordinate.html">widgets/Coordinate</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_easing.html">zrender/animation/easing</a></li><li><a href="module-zrender_core_bbox.html">zrender/core/bbox</a></li><li><a href="module-zrender_core_curve.html">zrender/core/curve</a></li><li><a href="module-zrender_core_event.html">zrender/core/event</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_core_util.html">zrender/core/util</a></li><li><a href="module-zrender_graphic_Displayable.html">zrender/graphic/Displayable</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_shape_Arc.html">zrender/graphic/shape/Arc</a></li><li><a href="module-zrender_graphic_shape_Line.html">zrender/graphic/shape/Line</a></li><li><a href="module-zrender_graphic_shape_Polyline.html">zrender/graphic/shape/Polyline</a></li><li><a href="module-zrender_graphic_shape_Rect.html">zrender/graphic/shape/Rect</a></li><li><a href="module-zrender_graphic_shape_Ring.html">zrender/graphic/shape/Ring</a></li><li><a href="module-zrender_graphic_shape_Sector.html">zrender/graphic/shape/Sector</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_RectText.html">zrender/mixin/RectText</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_shape_BezierCurve.html">zrender/shape/BezierCurve</a></li><li><a href="module-zrender_shape_Circle.html">zrender/shape/Circle</a></li><li><a href="module-zrender_shape_Polygon.html">zrender/shape/Polygon</a></li><li><a href="module-zrender_shape_util_smoothBezier.html">zrender/shape/util/smoothBezier</a></li><li><a href="module-zrender_shape_util_smoothSpline.html">zrender/shape/util/smoothSpline</a></li><li><a href="module-zrender_tool_matrix.html">zrender/tool/matrix</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="module-%257Becharts_model_Global%257D.html">{echarts/model/Global}</a></li><li><a href="module-%257Becharts_model_OptionManager%257D.html">{echarts/model/OptionManager}</a></li></ul><h3>Namespaces</h3><ul><li><a href="crc.html">crc</a></li><li><a href="LocalMediaStream%2520--%2520https___developer.mozilla.org_en-US_docs_WebRTC_MediaStream_API_LocalMediaStream.html">LocalMediaStream</a></li><li><a href="xhr.sendAsBinary%2520%2520https___developer.mozilla.org_ru_XMLHttpRequest_Sending_binary_content.html">Sending_binary_content</a></li></ul><h3>Classes</h3><ul><li><a href="FileAPI.Camera.html">Camera</a></li><li><a href="FileAPI.Camera.Shot.html">Shot</a></li><li><a href="modue_zrender_mixin_Animatable.html">modue:zrender/mixin/Animatable</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html">echarts/chart/helper/SymbolDraw</a></li><li><a href="module-echarts_component_marker_LineDraw.html">echarts/component/marker/LineDraw</a></li><li><a href="module-echarts_component_tooltip_TooltipContent.html">echarts/component/tooltip/TooltipContent</a></li><li><a href="module-echarts_coord_Cartesian.html">echarts/coord/Cartesian</a></li><li><a href="module-echarts_coord_Cartesian-module_echarts_coord_cartesian_Axis2D.html">echarts/coord/cartesian/Axis2D</a></li><li><a href="module-echarts_coord_scale_Interval.html">echarts/coord/scale/Interval</a></li><li><a href="module-echarts_coord_scale_Time.html">echarts/coord/scale/Time</a></li><li><a href="module-echarts_data_List.html">echarts/data/List</a></li><li><a href="module-echarts_model_Component.html">echarts/model/Component</a></li><li><a href="module-echarts_model_Model.html">echarts/model/Model</a></li><li><a href="module-zrender_animation_Animation.html">zrender/animation/Animation</a></li><li><a href="module-zrender_animation_Animator.html">zrender/animation/Animator</a></li><li><a href="module-zrender_core_LRU.html">zrender/core/LRU</a></li><li><a href="module-zrender_core_PathProxy.html">zrender/core/PathProxy</a></li><li><a href="module-zrender_Element.html">zrender/Element</a></li><li><a href="module-zrender_graphic_Group.html">zrender/graphic/Group</a></li><li><a href="module-zrender_graphic_Path.html">zrender/graphic/Path</a></li><li><a href="module-zrender_Handler.html">zrender/Handler</a></li><li><a href="module-zrender_Layer.html">zrender/Layer</a></li><li><a href="module-zrender_mixin_Eventful.html">zrender/mixin/Eventful</a></li><li><a href="module-zrender_mixin_Transformable.html">zrender/mixin/Transformable</a></li><li><a href="module-zrender_Painter.html">zrender/Painter</a></li><li><a href="module-zrender_Storage.html">zrender/Storage</a></li><li><a href="module-zrender_ZRender.html">zrender/ZRender</a></li><li><a href="zrender_graphic_Image.html">zrender/graphic/Image</a></li><li><a href="zrender_graphic_Text.html">zrender/graphic/Text</a></li><li>{<a href="module-echarts_chart_helper_Line.html">module:echarts/chart/helper/Line</a>}</li><li>{<a href="module-echarts_chart_helper_Symbol.html">module:echarts/chart/helper/Symbol</a>}</li></ul><h3>Events</h3><ul><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendScroll">legendScroll</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendSelect">legendSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendToggleSelect">legendToggleSelect</a></li><li><a href="module-echarts_chart_helper_SymbolDraw.html#~event:legendUnSelect">legendUnSelect</a></li></ul><h3>Mixins</h3><ul><li><a href="module-echarts_chart_helper_LineDraw-%257Bmodule_zrender_mixin_Eventful%257D.html">{zrender/mixin/Eventful}</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_addExternalStyleSheets">_addExternalStyleSheets</a></li><li><a href="global.html#_addSectionTitle">_addSectionTitle</a></li><li><a href="global.html#_createLayout">_createLayout</a></li><li><a href="global.html#_createPrintMapParameters">_createPrintMapParameters</a></li><li><a href="global.html#_createPrintTask">_createPrintTask</a></li><li><a href="global.html#_createReportNote">_createReportNote</a></li><li><a href="global.html#_displayLayers">_displayLayers</a></li><li><a href="global.html#_executePrintTask">_executePrintTask</a></li><li><a href="global.html#_filters">_filters</a></li><li><a href="global.html#_findContentItemById">_findContentItemById</a></li><li><a href="global.html#_formatAndRenderTables">_formatAndRenderTables</a></li><li><a href="global.html#_getFixedThemeStyles">_getFixedThemeStyles</a></li><li><a href="global.html#_handleDataSourceForWidgets">_handleDataSourceForWidgets</a></li><li><a href="global.html#_onAppProxyForMapChanged">_onAppProxyForMapChanged</a></li><li><a href="global.html#_onAppProxyForUrlChanged">_onAppProxyForUrlChanged</a></li><li><a href="global.html#_onFieldVisibleChange">_onFieldVisibleChange</a></li><li><a href="global.html#_renderHTMLData">_renderHTMLData</a></li><li><a href="global.html#_renderTable">_renderTable</a></li><li><a href="global.html#_resetCoordinate">_resetCoordinate</a></li><li><a href="global.html#_setButtonLabels">_setButtonLabels</a></li><li><a href="global.html#_setCoordControlsTabindex">_setCoordControlsTabindex</a></li><li><a href="global.html#_setFootNotes">_setFootNotes</a></li><li><a href="global.html#_setPageSize">_setPageSize</a></li><li><a href="global.html#_setReportData">_setReportData</a></li><li><a href="global.html#_setReportLogo">_setReportLogo</a></li><li><a href="global.html#_setReportSizeMessage">_setReportSizeMessage</a></li><li><a href="global.html#_setReportTitle">_setReportTitle</a></li><li><a href="global.html#_updatePartForBetween">_updatePartForBetween</a></li><li><a href="global.html#_validateParameters">_validateParameters</a></li><li><a href="global.html#acceptValue">acceptValue</a></li><li><a href="global.html#action">action</a></li><li><a href="global.html#applyWidgetFilter">applyWidgetFilter</a></li><li><a href="global.html#calculateLayerIndex">calculateLayerIndex</a></li><li><a href="global.html#canAssignUsersToOrgGroups">canAssignUsersToOrgGroups</a></li><li><a href="global.html#canChangeUserRoles">canChangeUserRoles</a></li><li><a href="global.html#canCreateGroup">canCreateGroup</a></li><li><a href="global.html#canCreateItem">canCreateItem</a></li><li><a href="global.html#canDeleteOrgGroups">canDeleteOrgGroups</a></li><li><a href="global.html#canDeleteOrgItems">canDeleteOrgItems</a></li><li><a href="global.html#canDeleteUsers">canDeleteUsers</a></li><li><a href="global.html#canDesignateOpenDataGroups">canDesignateOpenDataGroups</a></li><li><a href="global.html#canDisableUsers">canDisableUsers</a></li><li><a href="global.html#canEditFeatures">canEditFeatures</a></li><li><a href="global.html#canEditFeaturesFullControl">canEditFeaturesFullControl</a></li><li><a href="global.html#canInviteUsers">canInviteUsers</a></li><li><a href="global.html#canJoinNonOrgGroup">canJoinNonOrgGroup</a></li><li><a href="global.html#canJoinOrgGroup">canJoinOrgGroup</a></li><li><a href="global.html#canManageEnterpriseGroups">canManageEnterpriseGroups</a></li><li><a href="global.html#canManageLicenses">canManageLicenses</a></li><li><a href="global.html#canManageMarketplace">canManageMarketplace</a></li><li><a href="global.html#canManageOpenData">canManageOpenData</a></li><li><a href="global.html#canPublishFeatures">canPublishFeatures</a></li><li><a href="global.html#canPublishScenes">canPublishScenes</a></li><li><a href="global.html#canPublishTiles">canPublishTiles</a></li><li><a href="global.html#canPurchaseMarketplace">canPurchaseMarketplace</a></li><li><a href="global.html#canReassignOrgGroups">canReassignOrgGroups</a></li><li><a href="global.html#canReassignOrgItems">canReassignOrgItems</a></li><li><a href="global.html#canShareGroupToOrg">canShareGroupToOrg</a></li><li><a href="global.html#canShareGroupToPublic">canShareGroupToPublic</a></li><li><a href="global.html#canShareItemToGroup">canShareItemToGroup</a></li><li><a href="global.html#canShareItemToOrg">canShareItemToOrg</a></li><li><a href="global.html#canShareItemToPublic">canShareItemToPublic</a></li><li><a href="global.html#canTrialMarketplace">canTrialMarketplace</a></li><li><a href="global.html#canUpdateOrgGroups">canUpdateOrgGroups</a></li><li><a href="global.html#canUpdateOrgItems">canUpdateOrgItems</a></li><li><a href="global.html#canUpdateUsers">canUpdateUsers</a></li><li><a href="global.html#canUseDemographics">canUseDemographics</a></li><li><a href="global.html#canUseElevation">canUseElevation</a></li><li><a href="global.html#canUseGeocode">canUseGeocode</a></li><li><a href="global.html#canUseGeoenrichment">canUseGeoenrichment</a></li><li><a href="global.html#canUseNetworkAnalysis">canUseNetworkAnalysis</a></li><li><a href="global.html#canUseSpatialAnalysis">canUseSpatialAnalysis</a></li><li><a href="global.html#canViewOrgGroups">canViewOrgGroups</a></li><li><a href="global.html#canViewOrgItems">canViewOrgItems</a></li><li><a href="global.html#canViewUsers">canViewUsers</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#constructor">constructor</a></li><li><a href="global.html#coordTextInputKeyWasPressed">coordTextInputKeyWasPressed</a></li><li><a href="global.html#cpBtnWasClicked">cpBtnWasClicked</a></li><li><a href="global.html#cpSubBtnWasClicked">cpSubBtnWasClicked</a></li><li><a href="global.html#createPages">createPages</a></li><li><a href="global.html#deactivateDrawTool">deactivateDrawTool</a></li><li><a href="global.html#destroyOnScreenWidgetsAndGroups">destroyOnScreenWidgetsAndGroups</a></li><li><a href="global.html#drawPointButtonWasClicked">drawPointButtonWasClicked</a></li><li><a href="global.html#expandButtonWasClicked">expandButtonWasClicked</a></li><li><a href="global.html#formatButtonWasClicked">formatButtonWasClicked</a></li><li><a href="global.html#formatDialogApplyButtonClicked">formatDialogApplyButtonClicked</a></li><li><a href="global.html#geomSrvcDidComplete">geomSrvcDidComplete</a></li><li><a href="global.html#geomSrvcDidFail">geomSrvcDidFail</a></li><li><a href="global.html#getCandidateParamNames">getCandidateParamNames</a></li><li><a href="global.html#getCleanInput">getCleanInput</a></li><li><a href="global.html#getCoordValues">getCoordValues</a></li><li><a href="global.html#getCurrentMapCoordinate">getCurrentMapCoordinate</a></li><li><a href="global.html#getDDPoint">getDDPoint</a></li><li><a href="global.html#getExportString">getExportString</a></li><li><a href="global.html#getFormattedCoordinates">getFormattedCoordinates</a></li><li><a href="global.html#getFormattedCoordinateText">getFormattedCoordinateText</a></li><li><a href="global.html#getFormattedDDMStr">getFormattedDDMStr</a></li><li><a href="global.html#getFormattedDDStr">getFormattedDDStr</a></li><li><a href="global.html#getFormattedDMSStr">getFormattedDMSStr</a></li><li><a href="global.html#getFormattedGARSStr">getFormattedGARSStr</a></li><li><a href="global.html#getFormattedGEOREFStr">getFormattedGEOREFStr</a></li><li><a href="global.html#getFormattedMGRSStr">getFormattedMGRSStr</a></li><li><a href="global.html#getFormattedUSNGStr">getFormattedUSNGStr</a></li><li><a href="global.html#getFormattedUTMHStr">getFormattedUTMHStr</a></li><li><a href="global.html#getFormattedUTMStr">getFormattedUTMStr</a></li><li><a href="global.html#getIcon">getIcon</a></li><li><a href="global.html#getMapCoordinateDD">getMapCoordinateDD</a></li><li><a href="global.html#getOrderableInput">getOrderableInput</a></li><li><a href="global.html#getOrderableOutput">getOrderableOutput</a></li><li><a href="global.html#getProjectedPoint">getProjectedPoint</a></li><li><a href="global.html#getStatisticsResult">getStatisticsResult</a></li><li><a href="global.html#getSupportExportFormats">getSupportExportFormats</a></li><li><a href="global.html#getWidgetFilter">getWidgetFilter</a></li><li><a href="global.html#getXYNotation">getXYNotation</a></li><li><a href="global.html#iconClass">iconClass</a></li><li><a href="global.html#iconFormat">iconFormat</a></li><li><a href="global.html#initUI">initUI</a></li><li><a href="global.html#inputError">inputError</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#isBasedOnAdmin">isBasedOnAdmin</a></li><li><a href="global.html#isBasedOnPublisher">isBasedOnPublisher</a></li><li><a href="global.html#isBasedOnUser">isBasedOnUser</a></li><li><a href="global.html#isCustom">isCustom</a></li><li><a href="global.html#isFeatureSupported">isFeatureSupported</a></li><li><a href="global.html#isPublisher">isPublisher</a></li><li><a href="global.html#isUser">isUser</a></li><li><a href="global.html#label">label</a></li><li><a href="global.html#loadAndLayout">loadAndLayout</a></li><li><a href="global.html#mapWasClicked">mapWasClicked</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#nodes">nodes</a></li><li><a href="global.html#onClose">onClose</a></li><li><a href="global.html#onExecute">onExecute</a></li><li><a href="global.html#onMinimize">onMinimize</a></li><li><a href="global.html#onNormalize">onNormalize</a></li><li><a href="global.html#parentWidget">parentWidget</a></li><li><a href="global.html#popupDidClose">popupDidClose</a></li><li><a href="global.html#postCreate">postCreate</a></li><li><a href="global.html#postMixInProperties">postMixInProperties</a></li><li><a href="global.html#print">print</a></li><li><a href="global.html#processCoordTextInput">processCoordTextInput</a></li><li><a href="global.html#profile">profile</a></li><li><a href="global.html#QRCode">QRCode</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#setActions">setActions</a></li><li><a href="global.html#setCoordUI">setCoordUI</a></li><li><a href="global.html#setHidden">setHidden</a></li><li><a href="global.html#setMapLayout">setMapLayout</a></li><li><a href="global.html#setPosition">setPosition</a></li><li><a href="global.html#setPrivileges">setPrivileges</a></li><li><a href="global.html#setReportLayout">setReportLayout</a></li><li><a href="global.html#setSubCoordUI">setSubCoordUI</a></li><li><a href="global.html#setUIListeners">setUIListeners</a></li><li><a href="global.html#setVisible">setVisible</a></li><li><a href="global.html#showToolTip">showToolTip</a></li><li><a href="global.html#statInfo">statInfo</a></li><li><a href="global.html#stringify">stringify</a></li><li><a href="global.html#stringifyPretty">stringifyPretty</a></li><li><a href="global.html#stringifyPrivileges">stringifyPrivileges</a></li><li><a href="global.html#stringifyRole">stringifyRole</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#zoomButtonWasClicked">zoomButtonWasClicked</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Dec 31 2020 13:49:27 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
